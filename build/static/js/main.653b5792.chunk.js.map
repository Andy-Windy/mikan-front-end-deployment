{"version":3,"sources":["cover.jpeg","theme.js","Border/SidebarItem.js","Border/Sidebar.js","Component/AvatarIcon/AvatarIcon.js","reducers/site.js","constant.js","reducers/user.js","controller/user.js","controller/site.js","controller/utils.js","Border/Topbar.js","Border/Footer.js","Border/Border.js","Component/UserAutocomplete/UserAutocomplete.js","Component/ImgUrlTextField/ImgUrlTextField.js","Component/MagazineAutocomplete/MagazineAutoComplete.js","MainPage/NewMangaButton.js","Component/TagChip/colors.js","Component/TagChip/TagChip.js","MainPage/MangaCard.js","MainPage/MangaCardList.js","MainPage/MainPage.js","Component/MaterialTable/tableIcons.js","TasksPage/TasksTable.js","TasksPage/TasksPage.js","LoginPage/LoginPage.js","MangaPage/NewChapterButton.js","Component/TaskChip/icons.js","Component/TaskChip/TaskChip.js","Component/UserChip/UserChip.js","MangaPage/ChapterStepper/ChapterStepper.js","MangaPage/NewTaskButton.js","MangaPage/ChapterList/EditChapterButton.js","Component/DeleteButton/DeleteButton.js","MangaPage/ChapterList/ChapterListItem.js","MangaPage/ChapterList/ChapterList.js","MangaPage/EditMangaButton.js","controller/timer.js","MangaPage/ChapterAuthList/ChapterAuthTable.js","MangaPage/ChapterAuthList/ChapterAuthList.js","MangaPage/Metadata.js","Component/TagChip/AddTagChip.js","MangaPage/ChapterBlock/TaskBlock/EditTaskButton.js","MangaPage/ChapterBlock/TaskBlock/DataRender.js","Component/StatusIcon/StatusIcon.js","MangaPage/ChapterBlock/TaskBlock/TaskInfo.js","MangaPage/ChapterBlock/TaskBlock/TaskBlock.js","MangaPage/ChapterBlock/ChapterInfo.js","MangaPage/ChapterBlock/ChapterBlock.js","MangaPage/MangaPage.js","PrivateRoute.js","DashboardPage/TasksBlock.js","Component/ChangePasswordButton/ChangePasswordButton.js","DashboardPage/SettingsBlock.js","DashboardPage/AdminBlock.js","DashboardPage/DashboardPage.js","Snackbar.js","OAuthPage/OAuthPage.js","CloudPage/CloudPage.js","PeoplePage/UsersTable.js","PeoplePage/PeoplePage.js","MessagePage/MessagePage.js","Component/ChangePermissionsButton/ChangePermissionsButton.js","UserPage/UserPage.js","NotFound.js","LoginPage/SignUpPage.js","Component/UserChip/ForTableUserChip.js","RunningTasksPage/RunningTasksTable.js","RunningTasksPage/RunningTasksPage.js","Component/MultiDatePicker/MultiDatePicker.js","MagazinePage/NewMagazineButton.js","MagazinePage/MagazineCard.js","MagazinePage/MagazineCardList.js","MagazinePage/DelMagazineButton.js","MagazinePage/MainMagazinePage.js","MagazinePage/EditMagazineButton.js","Component/MagazineAutocomplete/MangaAutocomplete.js","MagazinePage/AddMangaButton.js","Component/MagazineAutocomplete/MagazineMangaAutocomplete.js","MagazinePage/DelMangaButton.js","MagazinePage/UpdateMagazineButton.js","MagazinePage/SkipUpdateButton.js","MagazinePage/MagazinePage.js","Routes.js","serviceWorker.js","reducers/index.js","index.js"],"names":["module","exports","mainThem","createMuiTheme","palette","primary","orange","secondary","deepOrange","responsiveMainThem","responsiveFontSizes","useStyles","makeStyles","theme","popover","pointerEvents","paper","padding","spacing","listItem","breakpoints","up","paddingTop","paddingBottom","SidebarItem","props","name","to","sidebarToggle","React","useState","anchorEl","setAnchorEl","match","useRouteMatch","path","exact","classes","useTheme","isDesktop","useMediaQuery","handlePopoverClose","open","Boolean","ListItem","button","disableGutters","className","onClick","component","Link","selected","Hidden","smDown","Button","onMouseEnter","event","currentTarget","onMouseLeave","children","mdUp","ListItemIcon","style","minWidth","ListItemText","Popover","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","useStyle","drawer","width","flexShrink","placeholder","mixins","toolbar","drawerPaper","Sidebar","openStatus","privilege","useSelector","state","user","height","Box","display","flexDirection","justifyContent","alignItems","Divider","List","disablePadding","fontSize","Deck","implementation","Drawer","variant","anchor","ModalProps","keepMounted","backgroundColor","n","red","pink","purple","indigo","blue","cyan","teal","lime","brown","grey","textColor","AvatarIcon","avatar","hashCode","str","i","hash","length","charCodeAt","Avatar","alt","src","color","site","broadcast","snackMsg","message","busy","showCherry","action","type","Object","assign","isBusy","API_BASE","API_USER","API_MANGA","API_MAGAZINE","logging","uid","nickname","number_of_notifications","goo_timestamp","number","loginWithToken","dispatch","a","setLogging","setBusy","axios","get","headers","tokenHeader","validateStatus","status","then","res","data","window","localStorage","setItem","catch","err","console","log","finally","getItem","setGoo","time","Date","now","getTimezoneOffset","initSite","setShowCherry","params","key","setBroadcast","response","detail","setSnackbar","e","dismissable","msg","setTitle","title","document","localtime","stamp","getFullYear","getMonth","getDate","localtime_exact","getHours","slice","getMinutes","menuButton","appBar","zIndex","buttonProgress","position","top","left","marginTop","marginLeft","Topbar","useDispatch","number_of_notification","goo","anchorName","setAnchorName","handlePopoverOpen","AppBar","IconButton","aria-label","create_time","s","secs","mins","hrs","dys","ms2string","getTime","timelapse","Badge","badgeContent","overlap","CircularProgress","size","LinearProgress","Footer","ver","mikanVer","setMikanVer","useEffect","withCredentials","Typography","align","root","content","flexGrow","mainArea","Border","mobileOpen","setMobileOpen","fetchData","handleDrawerToggle","CssBaseline","UserAutocomplete","input","label","initVal","setOpen","loading","setLoading","userList","setUserList","users","Autocomplete","onOpen","loadingText","noOptionsText","options","onChange","value","getOptionLabel","option","defaultValue","renderOption","getOptionSelected","filterOptions","inputValue","matchSorter","keys","renderInput","TextField","required","InputProps","endAdornment","Fragment","ImgUrlTextField","script","createElement","setAttribute","async","head","appendChild","margin","id","fullWidth","target","data-chevereto-pup-trigger","data-target","ariant","MagazineAutocomplete","isRequired","rest","magazineList","setMagazineList","setValue","magazines","foundMagazine","find","magazine","newValue","NewMangaButton","handleClose","Dialog","aria-labelledby","onSubmit","values","getElementById","attribute_magazine","put","location","reload","render","handleSubmit","DialogTitle","DialogContent","autoFocus","helperText","DialogActions","tagColor","TagChip","tag","mid","cid","tid","deletable","lid","Chip","onDelete","level","post","maxWidth","labels","right","marginRight","bottom","opacity","details","MangaCard","manga","cover","img","changeImg","Image","onload","Card","CardActionArea","CardMedia","image","flexWrap","tags","map","CardContent","gutterBottom","MangaCardList","showFinished","mangas","setMangas","Grid","container","cherry","item","xs","sm","md","lg","titleArea","marginBottom","cardsArea","expand","transform","transition","transitions","create","duration","shortest","expandOpen","MainPage","expanded","setExpanded","setShowFinished","Container","alignSelf","clsx","aria-expanded","Collapse","filterArea","in","timeout","unmountOnExit","FormControlLabel","checked","control","Switch","labelPlacement","Alert","severity","AlertTitle","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","smallBadge","borderRadius","lightBlueBadge","lightYellowBadge","lightRedBadge","getBadgeContent","tasks","task","filter","t","mname","String","wait_status","getBadgeStatus","waitStatuses","Math","max","TasksTable","history","useHistory","getBadgeClass","icons","columns","field","defaultGroupOrder","split","badge","paddingRight","lookup","0","1","2","3","4","5","6","grouping","sorting","pageSize","rowStyle","rowData","components","Toolbar","onRowClick","togglePanel","push","localization","groupedBy","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","taskListItem","TasksPage","setTasks","processedTasks","main","form","submit","LoginPage","from","useLocation","pathname","preventDefault","stopPropagation","pass","qs","stringify","username","password","replace","auth","autoComplete","NewChapterButton","no1","no2","no4","no8","empty","route","setRoute","handleRouteChange","FormControl","FormLabel","FormGroup","row","Checkbox","disabled","taskIcon","TaskChip","icon","clickable","UserChip","undefined","nominee","completed","ChapterListItem","chapter","Stepper","alternativeLabel","nonLinear","activeStep","orientation","index","Step","StepButton","StepLabel","NewTaskButton","order","initialValues","MenuItem","EditChapterButton","tasksList","setTasksList","ps","multiline","rowsMax","subheader","ListSubheader","DialogContentText","list","setList","animation","DeleteButton","api","callback","others","setInput","delete","rootExpanded","heading","typography","pxToRem","secondaryHeading","text","taskChip","summary","adminAuth","ExpansionPanel","TransitionProps","ExpansionPanelSummary","expandIcon","aria-controls","noWrap","ExpansionPanelDetails","ExpansionPanelActions","ChapterList","Tabs","Tab","SubChapterList","listName","chapters","setChapters","query_status","EditMangaButton","status_at_magazine","producer","change2Time","date","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","hours","getUTCHours","minutes","getUTCMinutes","ChapterAuthTable","auths","lastComplete","paging","Pagination","tabsWrap","overflowX","textAlign","ChapterAuthList","isAll","setIsAll","buttonName","setButtonName","borderColor","SubChapterAuthList","listNumber","setAuths","is_all_flag","Metadata","create_on","last_update","magazine_name","RouterLink","Skeleton","next_update_time","magazine_status","paragraph","AddTagChip","InputLabel","EditTaskButton","DataRender","StatusIcon","statusToColor","TaskBlock","taskState","setTaskState","accept_by","ToggleButtons","ToggleStatusButtons","WaitStatusChip","assign_to","handleAssign","handleStatusClick","selectedValue","setSelectedValue","selected_value","RadioGroup","Radio","setTask","staffItem","ChapterInfo","ChapterBlock","useParams","setChapter","setOrder","MobileStepper","backButton","nextButton","steps","coverCard","MangaPage","setAdminAuth","setManga","p","PrivateRoute","Tasks","defaultSort","ChangePasswordButton","Settings","setUser","introduction","Admin","codes","setCodes","EditBroadcast","new_codes","code","Paper","onCopy","DashboardPage","removeItem","tabs","TabPanel","other","hidden","Snackbar","useSnackbar","enqueueSnackbar","closeSnackbar","errorMsg","omitAction","messageProps","OAuthPage","fail","setFail","query","URLSearchParams","search","API_THIRD_PARTY","client_id","auth_code","href","CloudPage","UsersTable","buttonStyle","PeoplePage","setUsers","filteredUsers","setFilteredUsers","filterText","setFilterText","filterCondition","setFilterCondition","filtered","trim","regex","RegExp","some","test","permissions","ButtonGroup","userChip","unreadHeading","fontWeight","MessagePage","messages","setMessages","deleteFromList","mrn","result","MessageItem","unread","setUnread","body","setBody","ChangePermissionsButton","UserPage","current_uid","NotFound","setTimeout","redirect","SignUpPage","cursor","ForTableUserChip","RunningTasksTable","RunningTasksPage","calendarContainer","border","weekDayHeader","gridTemplateColumns","mode","gap","dayContainer","weekNumber","dayButton","aspectRatio","selectedDay","emptyDay","visibility","CustomDatePicker","memo","weekDays","useMemo","days","Array","_","emptyDays","startDayOfWeek","fill","weeks","currentWeek","forEach","handleDayClick","useCallback","newSelectedDays","Set","has","add","week","includes","MultiDatePicker","safeValue","isArray","join","readOnly","disableAutoFocus","disableEnforceFocus","textField","NewMagazineButton","isScheduled","setIsScheduled","scheduleType","setScheduleType","MemoizedMultiDatePicker","handleScheduleChange","handleScheduleTypeChange","magazine_schedule_dates","magazine_schedule_time","FormHelperText","Select","dates","InputLabelProps","shrink","inputProps","step","MagazineCard","datestatus","isNaN","currentTimeUTC","currentTime","givenTime","timeDifference","floor","timeUntilUpdate","inclusion","MagazineCardList","setMagazines","DelMagazineButton","confirmDelete","setConfirmDelete","selectedMagazine","setSelectedMagazine","selectedId","setSelectedId","MainMagazinePage","mr","EditMagazineButton","magazine_schedule_flag","magazine_schedule_type","adisableEnforceFocus","change2StandTime","media","url","Number","secondsToTime","toISOString","seconds","h","m","hh","padStart","mm","MangaAutocomplete","mangaList","setMangaList","AddMangaButton","MagazineMangaAutocomplete","DelMangaButton","customBlue","MangaEntry","onUpdate","isUpdating","setIsUpdating","hasProofreading","setHasProofreading","TableRow","TableCell","nextChapter","manga_name","Tooltip","recentChapters","idx","placement","latestChapter","MangaTable","onMangasChange","TableContainer","Table","TableHead","TableBody","updating","UpdateMagazineButton","manga_list","grouped","manga_id","chapter_name","groupMangasByChapter","need_update","newMangas","SkipUpdateButton","objectFit","contentBox","MagazinePage","setMagazine","rel","timeToUpdate","Routes","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","error","mikanPeel","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","ThemeProvider","URL","process","origin","addEventListener","fetch","contentType","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.653b5792.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cover.d753b4ce.jpeg\";","import { createMuiTheme, responsiveFontSizes} from '@material-ui/core/styles';\nimport orange from '@material-ui/core/colors/orange';\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\n\nconst mainThem = createMuiTheme({\n    palette: {\n        primary: orange,\n        secondary: deepOrange,\n    },\n});\n\nexport const responsiveMainThem = responsiveFontSizes(mainThem);","import React from 'react';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Hidden, Popover} from \"@material-ui/core\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {Link, useRouteMatch} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    popover: {\n        pointerEvents: 'none',\n    },\n    paper: {\n        padding: theme.spacing(1),\n    },\n    listItem: {\n        [theme.breakpoints.up(\"md\")]: {\n            paddingTop: 0,\n            paddingBottom: 0\n        },\n    }\n}));\n\n\nexport default function SidebarItem(props) {\n    const {name, to, sidebarToggle} = props;\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const match = useRouteMatch({path: to, exact: to === \"/\"});\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const handlePopoverOpen = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<div>\n            <ListItem button disableGutters={isDesktop} className={classes.listItem}\n                      onClick={isDesktop? null: sidebarToggle}\n                      component={Link} to={to}\n                      selected={match !== null}>\n                <Hidden smDown>\n                    <Button onMouseEnter={handlePopoverOpen}\n                            onMouseLeave={handlePopoverClose}>{props.children}</Button>\n                </Hidden>\n                <Hidden mdUp>\n                    <ListItemIcon style={{minWidth: \"40px\"}}>{props.children}</ListItemIcon>\n                    <ListItemText primary={name}/>\n                </Hidden>\n            </ListItem>\n            <Popover\n                className={classes.popover}\n                classes={{\n                    paper: classes.paper,\n                }}\n                open={open}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'center',\n                    horizontal: 'right',\n                }}\n                transformOrigin={{\n                    vertical: 'center',\n                    horizontal: 'left',\n                }}\n                onClose={handlePopoverClose}\n                disableRestoreFocus\n            >\n                {name}\n            </Popover>\n        </div>\n\n\n    );\n}","import React from \"react\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport SidebarItem from \"./SidebarItem\";\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport DateRangeIcon from '@material-ui/icons/DateRange';\nimport FolderSharedIcon from '@material-ui/icons/FolderShared';\nimport PeopleIcon from '@material-ui/icons/People';\nimport EqualizerIcon from '@material-ui/icons/Equalizer';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport Storage from '@material-ui/icons/Storage';\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\n\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {Box} from \"@material-ui/core\";\nimport {useSelector} from \"react-redux\";\nimport {Deck} from \"@material-ui/icons\";\n\nexport const desktopWidth = 80;\nconst mobileWidth = 150;\n\nconst useStyle = makeStyles((theme) => ({\n    drawer: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n            flexShrink: 0,\n        },\n    },\n    placeholder: theme.mixins.toolbar,\n    drawerPaper: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n        },\n        width: mobileWidth,\n    }\n}));\n\nexport default function Sidebar(props) {\n    const {sidebarToggle, openStatus} = props;\n    const classes = useStyle();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const privilege = useSelector(state => state.user.privilege);\n\n    const drawer = (\n        <span style={{height: \"100%\"}}>\n            <Box style={{height: \"100%\"}} display=\"flex\" flexDirection={\"column\"}\n                 justifyContent={\"space-between\"} alignItems={\"stretch\"}>\n                <Box>\n                    <div className={classes.placeholder}/>\n                    <Divider/>\n                    <List disablePadding={true}>\n                        <SidebarItem to={\"/\"} name={\"漫画\"} sidebarToggle={sidebarToggle}>\n                            <MenuBookIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/magazinePage\"} name={\"杂志\"} sidebarToggle={sidebarToggle}>\n                            <Storage style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/tasks\"} name={\"任务\"} sidebarToggle={sidebarToggle}>\n                            <DateRangeIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/runningTasks\"} name={\"进行中的任务\"} sidebarToggle={sidebarToggle}>\n                            <Deck style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/cloud\"} name={\"文件\"} sidebarToggle={sidebarToggle}>\n                            <FolderSharedIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/users\"} name={\"成员\"} sidebarToggle={sidebarToggle}>\n                            <PeopleIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        {privilege > 99 &&\n                        <SidebarItem to={\"/stat\"} name={\"统计\"} sidebarToggle={sidebarToggle}>\n                            <EqualizerIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>}\n                    </List>\n                </Box>\n                {privilege > 99 &&\n                <Box>\n                    <Divider/>\n                    <List>\n                        <SidebarItem name={\"管理\"} sidebarToggle={sidebarToggle}>\n                            <ExtensionIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                    </List>\n                </Box>\n                }\n            </Box>\n        </span>\n\n    );\n\n    return (<nav className={classes.drawer}>\n        <Hidden mdUp implementation=\"css\">\n            <Drawer\n                variant=\"temporary\"\n                anchor=\"left\"\n                open={openStatus}\n                onClose={sidebarToggle}\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                ModalProps={{\n                    keepMounted: true,\n                }}\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n        <Hidden smDown implementation=\"css\">\n            <Drawer\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                variant=\"permanent\"\n                open\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n    </nav>);\n}","import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport red from \"@material-ui/core/colors/red\";\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nfunction backgroundColor(n) {\n    switch (n) {\n        case 0:\n            return red[500];\n        case 1:\n            return pink[300];\n        case 2:\n            return purple[500];\n        case 3:\n            return indigo[900];\n        case 4:\n            return blue[500];\n        case 5:\n            return cyan[500];\n        case 6:\n            return teal[500];\n        case 7:\n            return lime[600];\n        case 8:\n            return orange[500];\n        case 9:\n            return brown[500];\n        case 10:\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nfunction textColor(n) {\n    switch (n) {\n        case 0:\n            return \"white\";\n        case 1:\n            return \"white\";\n        case 2:\n            return \"white\";\n        case 3:\n            return \"white\";\n        case 4:\n            return \"white\";\n        case 5:\n            return \"black\";\n        case 6:\n            return \"white\";\n        case 7:\n            return \"black\";\n        case 8:\n            return \"black\";\n        case 9:\n            return \"white\";\n        case 10:\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}\n\nexport default function AvatarIcon(props) {\n    const {avatar, name} = props;\n\n    const hashCode = (str) => {\n        let hash = 0, i, chr;\n        for (i = 0; i < str.length; i++) {\n            chr   = str.charCodeAt(i);\n            hash  = ((hash << 5) - hash) + chr;\n            hash |= 0; // Convert to 32bit integer\n        }\n        return hash;\n    };\n\n    return (\n        <Avatar alt={name} src={avatar} {...props}\n        style={{color: textColor(hashCode(name) % 11),\n        backgroundColor: backgroundColor(hashCode(name) % 11)}}>{name[0] ? name[0] : \"柑\"}</Avatar>\n    );\n}","export const SET_BROADCAST = 'SET_BROADCAST';\nexport const SET_SNACK_MSG = 'SET_SNACK_MSG';\nexport const SET_BUSY = 'SET_BUSY';\nexport const SET_SHOW_CHERRY = 'SET_SHOW_CHERRY';\n\nconst site = (state = {broadcast : \"\", snackMsg : {message: \"\"}, busy : 0, showCherry : true}, action) => {\n    switch (action.type) {\n        case 'SET_BROADCAST':\n            return Object.assign({}, state, {\n                broadcast: action.broadcast,\n            });\n        case 'SET_SNACK_MSG':\n            return Object.assign({}, state, {\n                snackMsg: action.snackMsg,\n            });\n        case 'SET_BUSY':\n            return Object.assign({}, state, {\n                busy: state.busy + (action.isBusy ? 1 : -1),\n            });\n        case 'SET_SHOW_CHERRY':\n            return Object.assign({}, state, {\n                showCherry: action.showCherry,\n            });\n        default:\n            return state\n    }\n};\n\nexport default site;","export const API_BASE = \"https://api.mikan.mom\";\nexport const CLOUD_URL = \"https://pan.mikan.mom\";\n\nexport const API_THIRD_PARTY = API_BASE + '/third_party';\nexport const API_USER = API_BASE + \"/user\";\nexport const API_TAG = API_BASE + \"/tag\";\nexport const API_TAG_DELETE = API_BASE + \"/tag_delete\";\nexport const API_MANGA = API_BASE + \"/manga\";\nexport const API_MAGAZINE = API_BASE + \"/magazine\";\nexport const API_TASK = API_BASE + \"/task\";\nexport const API_RUNNING_TASK = API_BASE + \"/running_task\";\n\n\nexport function api_chapter(cid, listName = undefined) {\n    return API_MANGA + \"/\" + cid + (listName? \"/\" + listName : \"\");\n}","export const FILL_USER = 'FILL_USER';\nexport const CLEAN_USER = 'CLEAN_USER';\nexport const SET_LOGGING = 'SET_LOGGING';\nexport const SET_NOTIFICATIONS = 'SET_NOTIFICATIONS';\nexport const SET_GOO = 'SET_GOO';\n\nconst user = (state = {privilege: 0, logging: true}, action) => {\n    switch (action.type) {\n        case 'FILL_USER':\n            return {\n                uid: action.uid,\n                nickname: action.nickname,\n                avatar: action.avatar,\n                privilege: action.privilege,\n                number_of_notifications: action.number_of_notifications,\n                goo_timestamp: action.goo_timestamp\n            };\n        case 'CLEAN_USER':\n            return {\n                privilege: 0\n            };\n        case 'SET_LOGGING':\n            return Object.assign({}, state, {\n                logging: action.logging\n            });\n        case 'SET_NOTIFICATIONS':\n            return Object.assign({}, state, {\n                number_of_notifications: state.number_of_notifications + action.number\n            });\n        case 'SET_GOO':\n            return Object.assign({}, state, {\n                goo_timestamp: action.goo_timestamp\n            });\n        default:\n            return state\n    }\n};\n\nexport default user;","import axios from \"axios\";\nimport qs from 'qs';\nimport {FILL_USER, SET_GOO, SET_LOGGING, SET_NOTIFICATIONS} from \"../reducers/user\";\nimport {setBusy, setSnackbar} from \"./site\";\nimport {API_BASE} from \"../constant\";\n\nexport function auth(id, pass, history, from) {\n    return dispatch => {\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/token\", qs.stringify({\n                username: id,\n                password: pass\n            }), {\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n                    dispatch(loginWithToken());\n                    history.replace(from);\n                }\n            ).catch((err) => {\n                try {\n                    console.log(err.response.data.detail);\n                    dispatch(setSnackbar(err.response.data.detail, \"error\"));\n                } catch (e) {\n                    dispatch(setSnackbar(\"未知的错误\", \"error\"));\n                }\n            }).finally(() => dispatch(setBusy(false)));\n    };\n}\n\n\nexport function loginWithToken() {\n    return async dispatch => {\n        dispatch(setLogging(true));\n        dispatch(setBusy(true));\n        await axios.get(API_BASE + \"/profile\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(Object.assign({type: FILL_USER}, res));\n            // dispatch(setSnackbar(\"登录成功\", \"success\"));\n            refreshToken()\n        }).catch(err => {\n            console.log(\"未登录\");\n        }).finally(() => {\n            dispatch(setBusy(false));\n            dispatch(setLogging(false));\n        });\n    };\n}\n\nfunction refreshToken() {\n    axios.get(API_BASE + \"/refresh_token\", {\n        headers: tokenHeader(),\n        validateStatus: status => status === 200\n    }).then(res => res.data).then(res => {\n        window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n    });\n}\n\n\nexport function tokenHeader() {\n    let token = window.localStorage.getItem(\"access_token\");\n    return {'Authorization': 'Bearer ' + token};\n}\n\n\nexport function setLogging(logging) {\n    return dispatch => {\n        dispatch({\n            type: SET_LOGGING,\n            logging: logging\n        })\n    }\n}\n\nexport function setNotifications(number) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_NOTIFICATIONS}, {number: number}));\n    };\n}\n\nexport function setGoo() {\n    let time = new Date();\n    return dispatch => {\n        dispatch(Object.assign({type: SET_GOO}, {goo_timestamp: (Date.now() - time.getTimezoneOffset() * 60000) / 1000}));\n    };\n}","import {SET_SNACK_MSG, SET_SHOW_CHERRY, SET_BUSY, SET_BROADCAST} from \"../reducers/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"./user\";\n\nexport function initSite() {\n    return dispatch => {\n        if (window.localStorage.getItem(\"noCherry\") === \"1\") {\n            dispatch(setShowCherry(false));\n        }\n        axios.get(API_BASE + \"/env\", {\n                params: {\n                    key: \"broadcast\"\n                },\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    dispatch(setBroadcast(res[\"result\"]));\n                }\n            ).catch((err) => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"无法拉取站点，未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    }\n}\n\nexport function setSnackbar(message, variant = \"info\", dismissable = true) {\n    return dispatch =>\n    dispatch(Object.assign({type: SET_SNACK_MSG}, {snackMsg:\n            {\n                message: message,\n                variant: variant,\n                dismissable: dismissable\n            }}));\n}\n\nexport function setBusy(isBusy) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_BUSY}, {isBusy: isBusy}));\n    };\n}\n\nexport function setShowCherry(showCherry) {\n    window.localStorage.setItem(\"noCherry\", showCherry ? \"0\" : \"1\");\n    return dispatch =>\n        dispatch(Object.assign({type: SET_SHOW_CHERRY}, {showCherry: showCherry}));\n}\n\nexport function setBroadcast(msg) {\n    return dispatch => dispatch(Object.assign({type: SET_BROADCAST}, {broadcast: msg}));\n}","export function setTitle(title) {\n    if (typeof title === \"string\")\n        if (title !== \"\")\n            document.title = title + \"-汉化工房九九组\";\n        else\n            document.title = \"汉化工房九九组\"\n}\n\nexport function timelapse(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var create_time = new Date(stamp * 1000);\n    let create_time = new Date();\n    stamp += create_time.getTimezoneOffset() * 60;\n    create_time = new Date(stamp * 1000);\n    var current_time = new Date().getTime();\n    var lapse =  current_time - create_time;\n    function ms2string(s) {\n        var ms = s % 1000;\n        s = (s - ms) / 1000;\n        var secs = s % 60;\n        s = (s - secs) / 60;\n        var mins = s % 60;\n        s = (s - mins) / 60;\n        var hrs = s % 24;\n        var dys = (s - hrs) / 24;\n        return (dys !== 0?(dys+'天'):\"\") + (hrs !== 0 || dys !== 0?((\"0\"+hrs).slice(-2)+'小时'):\"\") +\n            (mins !== 0 || hrs !== 0 || dys !== 0 ?((\"0\"+mins).slice(-2)+'分钟'):\"\") + (\"0\"+secs).slice(-2) +'秒';\n    }\n    return ms2string(lapse);\n}\n\n\nexport function localtime(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日\";\n}\n\nexport function localtime_exact(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日 \" +\n        (\"0\"+time.getHours()).slice(-2) + \":\" + (\"0\"+time.getMinutes()).slice(-2);\n}","import React from \"react\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\n\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport {Badge, Popover} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport AvatarIcon from \"../Component/AvatarIcon/AvatarIcon\";\nimport {Duck} from \"mdi-material-ui\";\nimport {setSnackbar} from \"../controller/site\";\nimport {timelapse} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    menuButton: {\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n        padding: 0,\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n    },\n    popover: {\n        pointerEvents: 'none',\n    },\n    buttonProgress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        marginTop: -12,\n        marginLeft: -12,\n    },\n}));\n\nexport default function Topbar(props) {\n    const {sidebarToggle} = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    const privilege = useSelector(state => state.user.privilege);\n    const isBusy = useSelector(state => state.site.busy);\n    const logging = useSelector(state => state.user.logging);\n    const number_of_notification = useSelector(state => state.user.number_of_notifications);\n    const nickname = useSelector(state => state.user.nickname);\n    const avatar = useSelector(state => state.user.avatar);\n    const goo = useSelector(state => state.user.goo_timestamp);\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [anchorName, setAnchorName] = React.useState(\"\");\n\n    const handlePopoverOpen = (event, name) => {\n        setAnchorName(name);\n        setAnchorEl(event.currentTarget);\n\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleGoo = () => {\n        dispatch(setSnackbar(timelapse(goo), \"info\"));\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n            <div style={{width: \"100%\"}}>\n                <Box display=\"flex\"\n                     justifyContent={\"space-between\"} alignItems={\"center\"}>\n                    <Box>\n                        <IconButton\n                            onClick={sidebarToggle}\n                            className={classes.menuButton}\n                        >\n                            <MenuIcon/>\n                        </IconButton>\n                    </Box>\n                    <Box>\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"咕~\")}\n                                                       onMouseLeave={handlePopoverClose} aria-label={\"goo\"} onClick={handleGoo}>\n                            <Duck fontSize=\"large\"/>\n                        </IconButton>)}\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"通知\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"notification\"} component={Link} to={\"/message\"}>\n                            <Badge badgeContent={number_of_notification} overlap={\"circle\"} color={\"secondary\"}>\n                                <NotificationsIcon fontSize={\"large\"}/>\n                            </Badge>\n                        </IconButton>)}\n                        <IconButton onMouseEnter={(e) => handlePopoverOpen(e, nickname || \"登录\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"account\"}\n                                    component={Link} to={\"/me\"}>\n                            {nickname ? <AvatarIcon name={nickname} avatar={avatar}/> : <AccountCircleIcon fontSize={\"large\"}/>}\n                            {logging && <CircularProgress size={24} className={classes.buttonProgress}/>}\n                        </IconButton>\n\n                    </Box>\n                </Box>\n            </div>\n        </Toolbar>\n        {isBusy > 0 ? <LinearProgress/> : <></>}\n        <Popover\n            className={classes.popover}\n            classes={{\n                paper: classes.paper,\n            }}\n            open={open}\n            anchorEl={anchorEl}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n            }}\n            onClose={handlePopoverClose}\n            disableRestoreFocus\n        >\n            {anchorName}\n        </Popover>\n    </AppBar>);\n}","import Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Divider} from \"@material-ui/core\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE, API_USER} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n    placeholder: {\n        height: theme.spacing(4)\n    }\n}));\nexport default function Footer(props) {\n    const {ver} = props;\n    const classes = useStyles();\n    const [mikanVer, setMikanVer] = React.useState(\"0\");\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/ver\", {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setMikanVer(res[\"version\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取后台版本失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <div>\n            <div className={classes.placeholder}/>\n            <Divider />\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n                Mikan v{mikanVer}, Mikan-Peel v{ver}\n            </Typography>\n        </div>\n    );\n}","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Sidebar from \"./Sidebar\";\nimport Topbar from \"./Topbar\";\nimport Footer from \"./Footer\";\nimport {desktopWidth} from \"./Sidebar\";\n\nimport { useDispatch } from \"react-redux\";\nimport {loginWithToken} from \"../controller/user\";\nimport {initSite} from \"../controller/site\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        alignItems: 'stretch',\n    },\n    placeholder: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n    },\n    mainArea: {\n        minWidth: 600,\n        width: 600,\n        [theme.breakpoints.up(\"md\")]: {\n            width: 960\n        },\n        [theme.breakpoints.up(\"lg\")]: {\n            width: `calc(1280px - ${desktopWidth}px)`\n        },\n        [theme.breakpoints.up(\"xl\")]: {\n            width: `calc(1920px - ${desktopWidth}px)`\n        }\n    }\n}));\n\nfunction Border(props) {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n\n    React.useEffect( () => {\n        async function fetchData() {\n            dispatch(initSite());\n            await dispatch(loginWithToken());\n        }\n        fetchData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleDrawerToggle = () => {\n        setMobileOpen(!mobileOpen);\n    };\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <Topbar sidebarToggle={handleDrawerToggle}/>\n            <Sidebar sidebarToggle={handleDrawerToggle} openStatus={mobileOpen}/>\n            <main className={classes.content}>\n                <div className={classes.placeholder}/>\n\n                        {props.children}\n\n                <Footer ver={\"1.1.0\"}/>\n            </main>\n\n        </div>\n    );\n}\n\nexport default Border;\n","import React from \"react\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport matchSorter from \"match-sorter\";\n\nexport default function UserAutocomplete(props) {\n    const {input, label, initVal} = props;\n    const [open, setOpen] = React.useState(false);\n    const [loading, setLoading] = React.useState(false);\n    const [userList, setUserList] = React.useState([]);\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        if (open && !loading && userList.length === 0) {\n            setLoading(true);\n            axios.get(API_USER, {\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res.users === \"object\" && setUserList(res.users);\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"拉取用户列表失败，请重试\", \"error\"));\n            }).finally(() => setLoading(false));\n        }\n    }, [open]);\n\n    return (\n        <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\n                      loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有这个人\" options={userList}\n                      {...props} onChange={((event, value) => input.onChange(value ? value.uid : null))}\n                      getOptionLabel={(option) => option.uid} defaultValue={initVal}\n                      renderOption={(option) => option.nickname + \"@\" + option.uid}\n                      getOptionSelected={(option, value) => option.uid === value.uid}\n                      filterOptions={(options, { inputValue }) =>\n                          matchSorter(options, inputValue, {keys: [\"nickname\", \"uid\"]})}\n                      renderInput={(params) => (\n                          <TextField required\n                              {...params}\n                              label={label}\n                              InputProps={{\n                                  ...params.InputProps,\n                                  endAdornment: (\n                                      <React.Fragment>\n                                          {loading ? <CircularProgress size={20}/> : null}\n                                          {params.InputProps.endAdornment}\n                                      </React.Fragment>\n                                  ),\n                              }}\n                          />\n                      )}/>\n    );\n}","import React from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\n\n\nexport default function ImgUrlTextField(props) {\n    const {input, initVal} = props;\n\n    React.useEffect(() => {\n        const script = document.createElement(\"script\");\n        script.src = \"https://imgchr.com/sdk/pup.js\";\n        script.setAttribute(\"data-url\", \"https://imgchr.com/upload\");\n        script.setAttribute(\"data-auto-insert\", \"direct-links\");\n        script.setAttribute(\"data-mode\", \"manual\");\n        script.async = true;\n        document.head.appendChild(script);\n    }, []);\n\n    return (\n        <Box display=\"flex\" alignItems=\"flex-end\">\n            <Box flexGrow={1}>\n                <TextField\n                    margin=\"dense\" id=\"cover\" name=\"cover\" label=\"封面URL\" type=\"string\" fullWidth defaultValue={initVal}\n                    onChange={(event) => input.onChange(event.target.value)}\n                />\n            </Box>\n            <Box>\n                <Button data-chevereto-pup-trigger data-target=\"#cover\"\n                        ariant=\"contained\" color=\"secondary\" component=\"span\">图床上传</Button>\n            </Box>\n        </Box>\n    );\n}","// import React from \"react\";\r\n// import Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n// import TextField from \"@material-ui/core/TextField\";\r\n// import CircularProgress from \"@material-ui/core/CircularProgress\";\r\n// import axios from \"axios\";\r\n// import {API_MAGAZINE} from \"../../constant\";\r\n// import {setSnackbar} from \"../../controller/site\";\r\n// import {useDispatch} from \"react-redux\";\r\n// import matchSorter from \"match-sorter\";\r\n\r\n// export default function MagazineAutocomplete(props) {\r\n//     const {input, label, initVal, isRequired} = props;\r\n//     const [open, setOpen] = React.useState(false);\r\n//     const [loading, setLoading] = React.useState(false);\r\n//     const [magazineList, setMagazineList] = React.useState([]);\r\n//     const dispatch = useDispatch();\r\n\r\n//     React.useEffect(() => {\r\n//         if (open && !loading && magazineList.length === 0) {\r\n//             setLoading(true);\r\n//             axios.get(API_MAGAZINE, {\r\n//                 withCredentials: true,\r\n//                 validateStatus: status => status === 200\r\n//             })\r\n//                 .then(res => res.data)\r\n//                 .then(res => {\r\n//                         typeof res.magazines === \"object\" && setMagazineList(res.magazines);\r\n//                     }\r\n//                 ).catch(err => {\r\n//                 dispatch(setSnackbar(\"拉取杂志列表失败，请重试\", \"error\"));\r\n//             }).finally(() => setLoading(false));\r\n//         }\r\n//     }, [open]);\r\n\r\n//     return (\r\n//         <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\r\n//                       loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有此杂志\" options={magazineList}\r\n//                       {...props} onChange={((event, value) => input.onChange(value ? { id: value.id, name: value.name } : null))}\r\n//                       getOptionLabel={(option) => option.name} defaultValue={initVal}\r\n//                       renderOption={(option) => option.name + \"@\" + option.id}\r\n//                       getOptionSelected={(option, value) => option.id === value.id}\r\n//                       filterOptions={(options, { inputValue }) =>\r\n//                           matchSorter(options, inputValue, {keys: [\"name\", \"id\"]})}\r\n//                       renderInput={(params) => (\r\n//                           <TextField required = {isRequired}\r\n//                               {...params}\r\n//                               label={label}\r\n//                               InputProps={{\r\n//                                   ...params.InputProps,\r\n//                                   endAdornment: (\r\n//                                       <React.Fragment>\r\n//                                           {loading ? <CircularProgress size={20}/> : null}\r\n//                                           {params.InputProps.endAdornment}\r\n//                                       </React.Fragment>\r\n//                                   ),\r\n//                               }}\r\n//                           />\r\n//                       )}/>\r\n//     );\r\n// }\r\n\r\nimport React from \"react\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport axios from \"axios\";\r\nimport { API_MAGAZINE } from \"../../constant\";\r\nimport { setSnackbar } from \"../../controller/site\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport matchSorter from \"match-sorter\";\r\n\r\nexport default function MagazineAutocomplete(props) {\r\n    const { input, label, initVal, isRequired, ...rest } = props; // 解构时排除 initVal\r\n    const [open, setOpen] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [magazineList, setMagazineList] = React.useState([]);\r\n    const [value, setValue] = React.useState(null); // 用于受控组件的 value 状态\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        if (!loading && magazineList.length === 0) {\r\n            setLoading(true);\r\n            axios\r\n                .get(API_MAGAZINE, {\r\n                    withCredentials: true,\r\n                    validateStatus: (status) => status === 200,\r\n                })\r\n                .then((res) => res.data)\r\n                .then((res) => {\r\n                    if (typeof res.magazines === \"object\") {\r\n                        setMagazineList(res.magazines);\r\n                        // 查找与 initVal 匹配的对象\r\n                        if (initVal) {\r\n                            const foundMagazine = res.magazines.find(\r\n                                (magazine) => magazine.id === initVal\r\n                            );\r\n                            if (foundMagazine) {\r\n                                setValue(foundMagazine); // 设置受控组件的 value\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    dispatch(setSnackbar(\"拉取杂志列表失败，请重试\", \"error\"));\r\n                })\r\n                .finally(() => setLoading(false));\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <Autocomplete\r\n            open={open}\r\n            onOpen={() => setOpen(true)}\r\n            onClose={() => setOpen(false)}\r\n            loading={loading}\r\n            loadingText=\"加载中...\"\r\n            noOptionsText=\"没有此杂志\"\r\n            options={magazineList}\r\n            value={value} // 使用受控组件的 value\r\n            onChange={(event, newValue) => {\r\n                setValue(newValue); // 更新受控组件的 value\r\n                input.onChange(newValue ? { id: newValue.id, name: newValue.name } : null); // 触发外部的 onChange\r\n            }}\r\n            getOptionLabel={(option) => option.name}\r\n            renderOption={(option) => option.name + \"@\" + option.id}\r\n            getOptionSelected={(option, value) => option.id === value.id}\r\n            filterOptions={(options, { inputValue }) =>\r\n                matchSorter(options, inputValue, { keys: [\"name\", \"id\"] })\r\n            }\r\n            renderInput={(params) => (\r\n                <TextField\r\n                    required={isRequired}\r\n                    {...params}\r\n                    label={label}\r\n                    InputProps={{\r\n                        ...params.InputProps,\r\n                        endAdornment: (\r\n                            <React.Fragment>\r\n                                {loading ? <CircularProgress size={20} /> : null}\r\n                                {params.InputProps.endAdornment}\r\n                            </React.Fragment>\r\n                        ),\r\n                    }}\r\n                />\r\n            )}\r\n            {...rest} // 传递其他属性\r\n        />\r\n    );\r\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\nimport MagazineAutocomplete from '../Component/MagazineAutocomplete/MagazineAutoComplete';\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\nimport {Form, Field} from 'react-final-form';\nimport {TextField} from 'mui-rff';\n\n\nexport default function NewMangaButton() {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"attribute_magazine\"] = values.attribute_magazine?.id;\n        values[\"ps\"] = \"\";\n        console.log(values);\n        axios.put(API_MANGA, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant={\"contained\"} color={\"primary\"} onClick={handleClickOpen}>创建漫画</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">创建漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。建议：罗马字/英文简写。\"/>\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\"/>\n                            <Field component={ MagazineAutocomplete } name=\"attribute_magazine\" label=\"杂志\" id=\"attribute_magazine\" fullWidth isRequired={false}/>\n                            <Field component={ ImgUrlTextField } name=\"cover\"/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                创建\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","import red from '@material-ui/core/colors/red';\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from '@material-ui/core/colors/blue';\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nexport function tagColor(n) {\n    switch (n) {\n        case \"red\":\n            return red[500];\n        case \"pink\":\n            return pink[300];\n        case \"purple\":\n            return purple[500];\n        case \"indigo\":\n            return indigo[900];\n        case \"blue\":\n            return blue[500];\n        case \"cyan\":\n            return cyan[500];\n        case \"teal\":\n            return teal[500];\n        case \"lime\":\n            return lime[600];\n        case \"orange\":\n            return orange[500];\n        case \"brown\":\n            return brown[500];\n        case \"grey\":\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nexport function textColor(n) {\n    switch (n) {\n        case \"red\":\n            return \"white\";\n        case \"pink\":\n            return \"white\";\n        case \"purple\":\n            return \"white\";\n        case \"indigo\":\n            return \"white\";\n        case \"blue\":\n            return \"white\";\n        case \"cyan\":\n            return \"black\";\n        case \"teal\":\n            return \"white\";\n        case \"lime\":\n            return \"black\";\n        case \"orange\":\n            return \"black\";\n        case \"brown\":\n            return \"white\";\n        case \"grey\":\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {tagColor, textColor} from \"./colors\";\nimport axios from \"axios\";\nimport {API_TAG_DELETE} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function TagChip(props) {\n    const {tag, mid, cid, tid, deletable, lid} = props;\n    const dispatch = useDispatch();\n\n    const handleDelete = () => {\n        let level = 2;\n        if (typeof lid !== \"string\")\n        {\n            if (typeof tid !== \"string\") level = 1;\n            if (typeof cid !== \"string\") level = 0;\n        }\n        else\n        {\n            level = 3;\n        }\n        axios.post(API_TAG_DELETE, {name: tag.name, color: tag.color,\n            mid: mid, cid: level > 0 ? cid : \"\", tid: level > 1 ? tid : \"\",lid: level <3 ? \"\" : lid, level: level}, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <Chip style={{\n            backgroundColor: tagColor(tag.color),\n            color: textColor(tag.color)\n        }} label={tag.name} onDelete={deletable === \"true\" ? handleDelete : null} {...props}/>\n    );\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport cover from '../cover.jpeg';\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport TagChip from \"../Component/TagChip/TagChip\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        maxWidth: 175,\n        [theme.breakpoints.up(\"md\")]: {\n            maxWidth: 275,\n        },\n        position: \"relative\",\n        margin: theme.spacing(2)\n    },\n    labels: {\n        position: \"absolute\",\n        right: theme.spacing(0),\n        top: theme.spacing(0)\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    content: {\n        width: \"100%\",\n        position: \"absolute\",\n        bottom: 0,\n        backgroundColor: \"black\",\n        // boxShadow: \"20px -20px 20px black, -20px -20px 20px black\",\n        opacity: 0.8\n    },\n    details: {\n        opacity: 1,\n        color: \"white\"\n    }\n}));\n\nexport default function MangaCard(props) {\n    const classes = useStyles();\n    const {manga} = props;\n    const [img, changeImg] = useState(cover);\n\n    React.useEffect(() => {\n        const img = new Image();\n        img.src = manga.cover;\n        img.onload = function () {\n            changeImg(manga.cover);\n        }\n    }, []);\n\n    return (\n        <Card className={classes.root}\n              component={Link} to={\"/manga/\" + manga.id}>\n            <CardActionArea>\n                <CardMedia\n                    component={\"img\"}\n                    image={img}\n                    title={manga.name}\n                />\n                <Box display={\"flex\"} flexDirection={\"row-reverse\"} flexWrap=\"wrap\" className={classes.labels}>\n                    {typeof manga.tags === \"object\" && manga.tags.map((tag, key) =>\n                        (<TagChip className={classes.label} tag={tag} size=\"small\" key={key}/>))}\n                </Box>\n                <CardContent className={classes.content}>\n                    <div className={classes.details}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                            {manga.name || <CircularProgress/>}\n                        </Typography>\n                    </div>\n                </CardContent>\n            </CardActionArea>\n        </Card>\n    );\n}\n","import React, {useState} from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport MangaCard from \"./MangaCard\";\nimport axios from \"axios\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {API_MANGA} from \"../constant\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\nexport default function MangaCardList(props) {\n    const {showFinished} = props;\n    const [mangas, setMangas] = useState([]);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const dispatch = useDispatch();\n\n    React.useEffect(  () => {\n        dispatch(setBusy(true));\n         axios.get(API_MANGA, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                typeof res.mangas === \"object\" && setMangas(res.mangas);\n                }\n            ).catch(err => {\n                dispatch(setSnackbar(\"获取漫画列表失败\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n            <Grid container spacing={1}>\n                {mangas.map((manga) => {\n                    if ((!manga.cherry || showCherry) && (manga.status === 0 || showFinished))\n                        return (<Grid item xs={6} sm={3} md={3} lg={2} key={manga.id}><MangaCard manga={manga}/></Grid>);\n                })}\n            </Grid>\n    );\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport clsx from \"clsx\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport NewMangaButton from \"./NewMangaButton\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport MangaCardList from \"./MangaCardList\";\nimport {setShowCherry} from \"../controller/site\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    cardsArea: {\n        margin: theme.spacing(5)\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n}));\n\nexport default function MainPage(props) {\n    const classes = useStyles();\n    const privilege = useSelector(state => state.user.privilege);\n    const [expanded, setExpanded] = React.useState(false);\n    const [showFinished, setShowFinished] = React.useState(false);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const broadcast = useSelector(state => state.site.broadcast);\n    const dispatch = useDispatch();\n\n    useEffect(() => setTitle(\"\"), []);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const onChangeCherry = (event) => {\n        dispatch(setShowCherry(event.target.checked));\n    };\n\n    const onChangeFinish = (event) => {\n        setShowFinished(event.target.checked);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">汉化工房</Typography>\n                    <Typography variant=\"h2\">九九组</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"更多选项\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n\n            <Collapse className={classes.filterArea} in={expanded} timeout=\"auto\" unmountOnExit>\n\n                <Box flexGrow={1}>\n                </Box>\n                <Box display={\"flex\"} justifyContent=\"flex-end\">\n                    {privilege >= 2 && <NewMangaButton/>}\n                    <FormControlLabel\n                        checked={showFinished}\n                        onChange={onChangeFinish}\n                        value={showCherry}\n                        size={\"small\"}\n                        control={<Switch color=\"primary\"/>}\n                        label=\"显示汉化完成的作品\"\n                        labelPlacement=\"start\"/>\n                </Box>\n            </Collapse>\n            {broadcast !== \"\" && \n            <Alert variant=\"outlined\" severity=\"info\">\n                <AlertTitle>公告</AlertTitle>\n                {broadcast}\n            </Alert>}\n            <MangaCardList showFinished={showFinished}/>\n        </Container>\n    );\n}","import React, {forwardRef} from \"react\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport Check from \"@material-ui/icons/Check\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport Search from \"@material-ui/icons/Search\";\nimport ArrowUpward from \"@material-ui/icons/ArrowUpward\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nexport const tableIcons = {\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref}/>),\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref}/>),\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref}/>),\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref}/>),\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref}/>),\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref}/>),\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref}/>),\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref}/>),\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref}/>),\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref}/>),\n    SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref}/>),\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref}/>),\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref}/>)\n};","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport TagChip from \"../Component/TagChip/TagChip\";\nimport { Badge } from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\"\n\n//1个月lightBule\n//2个月#FFFF00 lightYellow\n//3个月#FF5252 lightRed\nconst useStyles = makeStyles((theme) => ({\n    smallBadge: {\n        minWidth: '14px', // 设置最小宽度\n        width: '14px', // 设置宽度\n        height: '14px', // 设置高度\n        fontSize: '10px', // 设置字体大小\n        padding: '0', // 移除内边距\n        borderRadius: '50%', // 保持圆形\n    },\n    lightBlueBadge: {\n        backgroundColor: \"lightBlue\",\n    },\n    lightYellowBadge: {\n        backgroundColor: 'rgba(255, 255, 0, 0.5)',\n    },\n    lightRedBadge: {\n        backgroundColor: \"rgba(255, 82, 82, 0.5)\",\n    },\n}));\n\nconst getBadgeContent = (tasks, task, type) => {\n    // 假设tasks是一个包含所有漫画任务的数组\n    // 计算等待状态大于0的任务数量\n    return tasks.filter(t => t.mname === task && String(t.type) === type && t.wait_status%4 > 0).length;\n};\n\nconst getBadgeStatus = (tasks, task, type) => {\n    const waitStatuses = tasks\n        .filter(t => t.mname === task && String(t.type) === type && t.wait_status % 4 > 0)\n        .map(t => t.wait_status % 4);\n    return waitStatuses.length > 0 ? Math.max(...waitStatuses) : 0;\n};\n\nexport default function TasksTable(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const {tasks} = props;\n    const getBadgeClass = (value) => {\n        switch (value) {\n            case 1:\n                return `${classes.smallBadge} ${classes.lightBlueBadge}`;\n            case 2:\n                return `${classes.smallBadge} ${classes.lightYellowBadge}`;\n            case 3:\n                return `${classes.smallBadge} ${classes.lightRedBadge}`;\n            default:\n                return classes.smallBadge;\n        }\n    };\n\n    return (\n        <MaterialTable icons={tableIcons} columns={[\n            {title: \"漫画\", field: \"mname\", defaultGroupOrder: 1,\n                render: (task) => { // 自定义渲染函数\n                const [mname, type] = task.split('鸪鸪鸪');\n                return(\n                <Badge badgeContent={getBadgeContent(tasks,task,type)} anchorOrigin={{ vertical: 'top', horizontal: 'right' }} overlap=\"rectangle\" classes={{ badge: getBadgeClass(getBadgeStatus(tasks,task,type)) }}>\n                    <span style={{ paddingRight: '10px' }}>{mname}</span>\n                </Badge>\n                );\n            },},\n            {title: \"章节\", field: \"cname\"},\n            {title: \"任务\", field: \"name\"},\n            {title: \"类型\", field: \"type\", lookup: {\n                    0: \"其他\",\n                    1: \"图源\",\n                    2: \"翻译\",\n                    3: \"校对\",\n                    4: \"嵌字\",\n                    5: \"审核\",\n                    6: \"发布\",\n                }, defaultGroupOrder: 0},\n            {title: \"标签\", field: \"tags\", grouping: false, render: task =>\n                <>{task[\"tags\"].map((tag, key) => {\n                    return <TagChip tag={tag} size=\"small\" key={key}/>;\n                })}</>\n                , sorting: false},\n            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"]), grouping: false},\n        ]} options={{\n            pageSize: 20,\n            grouping: true,\n            rowStyle: rowData => {\n                const colorMapping = {\n                    0: 'transparent',\n                    1: 'lightBlue', // 第一种颜色\n                    2: 'rgba(255, 255, 0, 0.5)', // 第二种颜色\n                    3: 'rgba(255, 82, 82, 0.5)', // 第三种颜色\n                };\n                const backgroundColor = colorMapping[rowData.wait_status % 4] || 'transparent';\n\n                return { backgroundColor };\n            }\n        }} data={tasks} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n    );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_TASK} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\nimport TasksTable from \"./TasksTable\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    taskListItem: {\n        marginTop: theme.spacing(1)\n    }\n}));\n\nexport default function TasksPage() {\n    const classes = useStyles();\n    const [tasks, setTasks] = useState([]);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"任务广场\");\n        dispatch(setBusy(true));\n        axios.get(API_TASK, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                const processedTasks = res[\"tasks\"].map(task => ({\n                    ...task,\n                    mname: `${task.mname}鸪鸪鸪${task.type}`\n                }));\n                setTasks(processedTasks);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">任务广场</Typography>\n                </div>\n                <TasksTable tasks={tasks}/>\n            </Box>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport { useDispatch } from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {auth} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\nimport Leaf from \"mdi-material-ui/Leaf\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nexport default function LoginPage() {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    let history = useHistory();\n    let location = useLocation();\n    let { from } = location.state || { from: { pathname: \"/\" } };\n\n    useEffect(() => setTitle(\"登录\"), []);\n\n    let login = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch(auth(document.getElementById('uid').value, document.getElementById('pass').value, history, from));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    登录\n                </Typography>\n                <form className={classes.form} onSubmit={login}>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth id=\"uid\" label=\"用户ID\" name=\"uid\"\n                               autoComplete=\"uid\" autoFocus/>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"pass\" label=\"密码\"\n                               type=\"password\" id=\"pass\" autoComplete=\"current-password\"/>\n                    <Button fullWidth variant=\"contained\" color=\"primary\" className={classes.submit} type=\"submit\">\n                        登录\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport {Form} from 'react-final-form';\nimport {TextField} from 'mui-rff';\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function NewChapterButton(props) {\n    const {mid} = props;\n    const [open, setOpen] = React.useState(false);\n    const [route, setRoute] = React.useState({no1: true, no2: false, no4: true, no8: true, empty: false});\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleRouteChange = (event) => {\n        setRoute({...route, [event.target.name]: event.target.checked});\n    };\n\n    const onSubmit = (values) => {\n        let type = route[\"no1\"] ? 1 : 0;\n        type += route[\"no2\"] ? 2 : 0;\n        type += route[\"no4\"] ? 4 : 0;\n        type += route[\"no8\"] ? 8 : 0;\n        type += route[\"empty\"] ? 16 : 0;\n        values[\"ps\"] = \"\";\n        axios.put(API_MANGA + \"/\" + mid + \"/chapter\", values, {\n            params: {type: type},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button color=\"primary\" onClick={handleClickOpen} variant=\"outlined\">\n                新建章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建章节</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth required helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。\"/>\n                            <FormControl component=\"fieldset\">\n                                <FormLabel component=\"legend\">自定义任务流程</FormLabel>\n                                <FormGroup row>\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no1\"]} onChange={handleRouteChange}\n                                                           name=\"no1\"/>}\n                                        label=\"无图源\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no2\"]} onChange={handleRouteChange}\n                                                           name=\"no2\"/>}\n                                        label=\"无校对\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no4\"]} onChange={handleRouteChange}\n                                                           name=\"no4\"/>}\n                                        label=\"无审核\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no8\"]} onChange={handleRouteChange}\n                                                           name=\"no8\"/>}\n                                        label=\"无发布\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"empty\"]} onChange={handleRouteChange}\n                                                           name=\"empty\"/>}\n                                        label=\"空项目\"\n                                    />\n                                </FormGroup>\n                            </FormControl>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import Briefcase from \"mdi-material-ui/Briefcase\";\nimport ImageMultiple from \"mdi-material-ui/ImageMultiple\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport FormTextboxPassword from \"mdi-material-ui/FormTextboxPassword\";\nimport Palette from \"mdi-material-ui/Palette\";\nimport Gavel from \"mdi-material-ui/Gavel\";\nimport Rocket from \"mdi-material-ui/Rocket\";\nimport React from \"react\";\n\nexport function taskIcon(n) {\n    const icons = {\n        0: <Briefcase/>,\n        1: <ImageMultiple/>,\n        2: <TranslateIcon/>,\n        3: <FormTextboxPassword/>,\n        4: <Palette/>,\n        5: <Gavel/>,\n        6: <Rocket/>\n    };\n    return icons[n];\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {taskIcon} from \"./icons\";\n\nexport default function TaskChip(props) {\n    const {label} = props;\n\n    return (\n        <div>\n            <Chip {...props} variant={label[\"accept_by\"][\"uid\"] === \"\" ? \"outlined\" : \"default\"} icon={taskIcon(label[\"type\"])}\n                  color={label[\"status\"] === 0 || label[\"status\"] === 1 ? \"primary\" :\n                      label[\"status\"] === 2 ? \"secondary\" : \"\"} size={\"small\"}\n                  label={label[\"name\"]} clickable aria-label=\"Task Chip\"\n                  to={\"/manga/\" + label[\"mid\"] + \"/\" + label[\"cid\"] + \"/\" + label[\"id\"]}/>\n        </div>\n    );\n}\n","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AvatarIcon from \"../AvatarIcon/AvatarIcon\";\nimport {useHistory} from \"react-router-dom\";\n\nexport default function UserChip(props) {\n    const {user} = props;\n    const history = useHistory();\n\n    if (user === undefined) return (<></>);\n\n    const handleClick = () => {\n        history.push(\"/user/\" + user[\"uid\"]);\n    };\n\n    return (\n        <Chip variant=\"outlined\" aria-label=\"User Chip\" onClick={handleClick} clickable\n              avatar={<AvatarIcon avatar={user[\"avatar\"]} name={user[\"nickname\"]}/>} label={user[\"nickname\"]} {...props}/>\n    );\n}","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Stepper from \"@material-ui/core/Stepper\";\nimport StepButton from \"@material-ui/core/StepButton\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Step from \"@material-ui/core/Step\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\nimport UserChip from '../../Component/UserChip/UserChip';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    nominee: {\n        marginBottom: 10\n    },\n    completed: {\n        color: theme.palette.primary\n    }\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const {vertical, chapter, mid} = props;\n\n    const tasks = chapter[\"tasks\"];\n    const cid = chapter[\"id\"];\n\n    return (\n        <div className={classes.root}>\n            <Stepper alternativeLabel={!vertical} nonLinear activeStep={-1} orientation={vertical ? \"vertical\" : \"horizontal\"}>\n                {tasks.map((label, index) => (\n                    <Step key={label[\"name\"]}>\n                        <StepButton component={Link} to={\"/manga/\" + mid + \"/\" + cid + \"/\" + label[\"id\"]}\n                                    completed={label[\"status\"] === 1}>\n                            <StepLabel>\n                                <TaskChip label={label}/>\n                            </StepLabel>\n                        </StepButton>\n                        {label[\"accept_on\"] !== 0 && (!vertical ? (\n                            <StepLabel icon={null}>\n                                <UserChip user={label[\"accept_by\"]} size=\"small\"/>\n                            </StepLabel>\n                        ):\n                        <StepLabel icon={\n                            <span style={{ display: 'inline-block', width: '24px', height: '24px' }}></span>}> \n                            <UserChip user={label[\"accept_by\"]} size=\"small\" style={{ marginTop: '5px' }}/>\n                        </StepLabel>\n                        )}\n                    </Step>\n                ))}\n            </Stepper>\n        </div>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport {taskIcon} from \"../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport {TextField, Select} from \"mui-rff\";\n\n\nexport default function NewTaskButton(props) {\n    const {chapter, order} = props;\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.put(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"] + \"/task\", values, {\n            params: {order: order},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                新建任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: 0}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Box from \"@material-ui/core/Box\";\n\nimport {ReactSortable} from \"react-sortablejs\";\nimport NewTaskButton from \"../NewTaskButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport {taskIcon} from \"../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {TextField} from \"mui-rff\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useHistory} from \"react-router\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function EditChapterButton(props) {\n    const {chapter} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const [tasksList, setTasksList] = React.useState([]);\n\n    React.useEffect(() => {\n        let tasks = chapter[\"tasks\"].slice();\n        for (let i = 0; i < tasks.length; i++) {\n            tasks[i][\"order\"] = i;\n        }\n        setTasksList(tasks);\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"tasks\"] = tasksList.map(task => task.order);\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== chapter[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                编辑章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑章节</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{name: chapter[\"name\"], id: chapter[\"id\"], ps: chapter[\"ps\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <TextField margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth/>\n                    <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。建议：章节数字。\"/>\n                    <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                    <List subheader={\n                        <ListSubheader component=\"div\">\n                            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"flex-end\">\n                                <Box flexGrow={1}><DialogContentText>任务</DialogContentText></Box>\n                                <Box><NewTaskButton chapter={chapter} order={chapter[\"tasks\"].length}/></Box>\n                            </Box>\n                        </ListSubheader>\n                    }>\n                        <ReactSortable list={tasksList} setList={setTasksList} animation={150}>\n                            {tasksList.map((task, order) => (\n                                <ListItem key={order}>\n                                    <ListItemIcon>\n                                        {taskIcon(task[\"type\"])}\n                                    </ListItemIcon>\n                                    <ListItemText primary={task[\"name\"]}/>\n                                    <DragHandleIcon/>\n                                </ListItem>\n                            ))}\n                        </ReactSortable>\n                    </List>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        取消\n                    </Button>\n                    <Button type=\"submit\" color=\"primary\">\n                        保存\n                    </Button>\n                </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from \"@material-ui/core/TextField\";\n\nimport axios from \"axios\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function DeleteButton(props) {\n    const {id, name, api, callback, reload, ...others} = props;\n    const [open, setOpen] = React.useState(false);\n    const [input, setInput] = React.useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleInput = (event) => {setInput(event.target.value)};\n\n    const onSubmit = () => {\n        axios.delete(api, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            if (reload) window.location.reload();\n            history.replace(callback);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} {...others}>删除{name}</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                        <DialogTitle id=\"form-dialog-title\">确认删除</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText>\n                                删除后将不可恢复\n                            </DialogContentText>\n                            {id && <><DialogContentText>请在下方重复输入ID以确认</DialogContentText>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label={id} type=\"string\" onChange={handleInput} fullWidth required/></>}\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\" disabled={input !== id}>\n                                删除\n                            </Button>\n                        </DialogActions>\n            </Dialog>\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterStepper from \"../ChapterStepper/ChapterStepper\";\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport {useTheme} from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"./EditChapterButton\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    taskChip: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up('md'));\n\n    const {chapter, adminAuth, mid, expanded, setExpanded} = props;\n\n    const handleExpand = () => {\n        if (expanded === chapter[\"id\"]) setExpanded(\"\");\n        else setExpanded(chapter[\"id\"]);\n    };\n\n    return (\n        <div className={expanded === chapter[\"id\"] ? classes.rootExpanded : classes.root}>\n            <ExpansionPanel TransitionProps={{ unmountOnExit: true }} expanded={expanded === chapter[\"id\"]} onChange={handleExpand}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Box display=\"flex\" flexDirection=\"row\" className={classes.summary}>\n                        <Box flexGrow={1}>\n                            <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                        </Box>\n                        <Box display=\"flex\" flexDirection=\"row\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                return task[\"status\"] === 0 &&\n                                    <TaskChip label={task} key={key} className={classes.taskChip} component={Link} />\n                            })}\n                        </Box>\n                    </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box  display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                    <ChapterStepper vertical={!isDesktop} chapter={chapter} mid={mid}/>\n                    <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + mid + \"/chapter/\" + chapter[\"id\"]}\n                                      callback={\"/manga/\" + mid} className={classes.button} size=\"small\" variant=\"outlined\" reload/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterListItem from \"./ChapterListItem\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    }\n}));\n\n\nexport default function ChapterList(props) {\n    const classes = useStyles();\n    const {mid, adminAuth} = props;\n    const [value, setValue] = React.useState(0);\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" color={\"transparent\"}>\n                <Tabs value={value} onChange={handleChange}>\n                    <Tab label=\"未完成\"/>\n                    <Tab label=\"已完成\"/>\n                </Tabs>\n            </AppBar>\n            <SubChapterList mid={mid} listName={value} adminAuth={adminAuth}/>\n\n        </div>\n    );\n}\n\nexport function SubChapterList(props) {\n    const {mid, listName, adminAuth} = props;\n    const [loading, setLoading] = useState(true);\n    const [chapters, setChapters] = useState([]);\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setLoading(true);\n        setChapters([]);\n        axios.get(API_MANGA + \"/\" + mid + \"/chapter\", {\n            params: {\n                query_status: listName\n            },\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"chapters\"] === \"object\" && setChapters(res[\"chapters\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => setLoading(false));\n    },[listName]);\n\n    return <>{loading ? <LinearProgress/> : chapters.map((chapter) =>\n            (<ChapterListItem chapter={chapter} adminAuth={adminAuth} mid={mid} key={chapter.id} expanded={expanded} setExpanded={setExpanded}/>)\n        )}</>;\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\nimport MagazineAutocomplete from '../Component/MagazineAutocomplete/MagazineAutoComplete';\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\n\nimport axios from \"axios\";\nimport {Form, Field} from 'react-final-form';\nimport {TextField, Checkboxes} from 'mui-rff';\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useHistory} from \"react-router\";\n\n\n\nexport default function EditMangaButton(props) {\n    const {manga} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"producer\"] = document.getElementById(\"producer\").value;\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"attribute_magazine\"] = values.attribute_magazine?.id;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"status\"] = values[\"status\"] === true ? 1 : 0;\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        values[\"status_at_magazine\"] = values[\"status_at_magazine\"] === true ? 1 : 0;\n        axios.post(API_MANGA + \"/\" + manga[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== manga[\"id\"])\n                history.replace(\"/manga/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>编辑漫画</Button>\n\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form initialValues={{name: manga.name, id: manga.id, cherry: manga.cherry, status: manga.status === 1, ps: manga.ps, status_at_magazine: manga.status_at_magazine === 1,}}\n                    onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">编辑漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。\"/>\n                            <Checkboxes name=\"status\" data={{label: \"汉化完成\", value: \"cherry\"}}/>\n                            <Checkboxes name=\"status_at_magazine\" data={{label: \"已完结\", value: \"status_at_magazine\"}}/>\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\" disabled={privilege < 2} initVal={manga.producer} style={{ marginBottom: '7px' }}/>\n                            <Field component={ MagazineAutocomplete } name=\"attribute_magazine\" label=\"杂志\" id=\"attribute_magazine\" fullWidth isRequired={false} initVal={manga.attribute_magazine}/>\n                            <Field component={ ImgUrlTextField } name=\"cover\" initVal={manga.cover}/>\n                            <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                修改\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","export function change2Time(stamp) {\r\n    if (!stamp) return \"\";\r\n    const date = new Date(stamp * 1000); // 乘以 1000 转换为毫秒\r\n\r\n    const year = date.getUTCFullYear();\r\n    const month = String(date.getUTCMonth() + 1);\r\n    const day = String(date.getUTCDate());\r\n    const hours = String(date.getUTCHours());\r\n    const minutes = String(date.getUTCMinutes());\r\n\r\n    const formattedDate = `${year}年${month}月${day}日 ${hours}时${minutes}分`;\r\n    return formattedDate;\r\n}\r\n","import React from \"react\";\r\nimport MaterialTable from \"material-table\";\r\n\r\nimport {useHistory} from \"react-router\";\r\nimport {tableIcons} from \"../../Component/MaterialTable/tableIcons\";\r\nimport {localtime} from \"../../controller/utils\";\r\n\r\n  \r\n\r\nexport default function ChapterAuthTable(props) {\r\n    const history = useHistory();\r\n    const {auths} = props;\r\n\r\n    return (\r\n        <MaterialTable icons={tableIcons} columns={[\r\n            {title: \"用户\", field: \"nickname\"},\r\n            {title: \"完成话数\", field: \"count\"},\r\n            {title: \"最近活跃\", field: \"lastComplete\",render: rowData => localtime(rowData.lastComplete), }\r\n        ]} options={{\r\n            pageSize: 7 ,\r\n            paging: false,\r\n        }} data={auths} components={{\r\n            Pagination: () => null,\r\n            Toolbar: props => (<></>)\r\n        }} onRowClick={(event, rowData, togglePanel) => {\r\n            history.push(\"/user/\" + rowData[\"accept_uid\"]);\r\n        }} \r\n        />\r\n        );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport ChapterAuthTable from \"./ChapterAuthTable\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport axios from \"axios\";\r\nimport {API_MANGA} from \"../../constant\";\r\nimport {setSnackbar} from \"../../controller/site\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    tabsWrap: { // 新增样式类\r\n        '& .MuiTabs-scrollableX': {\r\n            overflowX: 'auto', // 添加滚动条，如果需要\r\n        },\r\n        '& .MuiTabs-flexContainer': {\r\n            justifyContent: 'space-around', // 或 'space-between' 根据需要调整对齐方式\r\n            flexWrap: 'wrap', // 允许标签换行\r\n        },\r\n        '& .MuiTab-root': {\r\n            minWidth: '33%', // 可以根据实际情况调整，确保三个标签能够舒适地显示\r\n            textAlign: 'center', // 让标签文本居中\r\n        },\r\n    },\r\n}));\r\n\r\n\r\nexport default function ChapterAuthList(props) {\r\n    const classes = useStyles();\r\n    const {mid} = props;\r\n    const [value, setValue] = React.useState(0);\r\n    const [isAll, setIsAll] = React.useState(false);\r\n    const [buttonName, setButtonName] = React.useState(\"近期\");\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const handleClickOpen = () => {\r\n        if(!isAll)\r\n            setButtonName(\"所有\")\r\n        else\r\n            setButtonName(\"近期\")\r\n\r\n        setIsAll(!isAll);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Grid container alignItems=\"center\" spacing={0}>\r\n                <Grid item xs>\r\n                    <Tabs value={value} onChange={handleChange} className={classes.tabsWrap}>\r\n                        <Tab label=\"翻译\" />\r\n                        <Tab label=\"校对\" />\r\n                        <Tab label=\"嵌字\" />\r\n                    </Tabs>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Button variant=\"outlined\" onClick={handleClickOpen}  style={{ borderColor: 'lightblue', color: '#34ACE8',\r\n                        '&:hover': { backgroundColor: 'lightblue',borderColor: 'lightblue',}\r\n                    }}>{buttonName}</Button>\r\n                </Grid>\r\n            </Grid>\r\n            <SubChapterAuthList mid={mid} listNumber={value} isAll={isAll}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function SubChapterAuthList(props) {\r\n    const {mid, listNumber, isAll} = props;\r\n    const [loading, setLoading] = useState(true);\r\n    const [auths, setAuths] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        if (mid !== undefined && mid !== null) { // 确保mid有值\r\n            setLoading(true);\r\n            setAuths([]); // 清空auths以准备接受新数据\r\n            axios.get(`${API_MANGA}/${mid}/chapterAuth`, {\r\n                params: {\r\n                    query_status: listNumber,\r\n                    is_all_flag: isAll\r\n                },\r\n                withCredentials: true,\r\n                validateStatus: status => status === 200\r\n            })\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                    if (typeof res[\"chapterauth\"] === \"object\") {\r\n                        setAuths(res[\"chapterauth\"]);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\r\n                })\r\n                .finally(() => setLoading(false));\r\n        }\r\n    }, [mid, listNumber,isAll]);\r\n\r\n    return (\r\n        <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\r\n            <ChapterAuthTable auths={auths}/>\r\n        </Box>\r\n    );\r\n}","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport EditMangaButton from \"./EditMangaButton\";\nimport UserChip from \"../Component/UserChip/UserChip\";\n\nimport {localtime} from \"../controller/utils\";\nimport {API_MANGA} from \"../constant\";\nimport {change2Time} from '../controller/timer';\nimport {Link as RouterLink} from \"react-router-dom\";\nimport DeleteButton from \"../Component/DeleteButton/DeleteButton\";\nimport ChapterAuthList from './ChapterAuthList/ChapterAuthList';\nimport Link from \"@material-ui/core/Link\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        marginTop: theme.spacing(1)\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n}));\n\nexport default function Metadata(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const [expanded, setExpanded] = React.useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    return (\n        <Box display={\"flex\"} flexDirection={\"column\"} className={classes.root}>\n            <Box display={\"flex\"}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">详细信息</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"详情\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n            <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>制作人</Typography></Box>\n                            <Box><UserChip user={manga.producer} size=\"small\"/></Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>开坑时间</Typography></Box>\n                            <Box>{localtime(manga.create_on)}</Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                            <Box>{localtime(manga.last_update)}</Box>\n                        </Box>\n                        {manga.magazine_name && <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>所属杂志</Typography></Box>\n                            <Box>{<Link component={RouterLink} to={\"/magazine/\" + manga.attribute_magazine} color=\"inherit\">{manga.magazine_name}</Link> || <Skeleton/>}</Box>\n                        </Box>}\n                        {manga.next_update_time !== 0 && manga.status_at_magazine === 0 && manga.magazine_status === 0 && <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>下一次更新时间（日本时间）</Typography></Box>\n                            <Box>{change2Time(manga.next_update_time)}</Box>\n                        </Box>}\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>状态</Typography></Box>\n                            <Box>{(manga.status_at_magazine === 0 && manga.magazine_status === 0)? \"连载中\" : \"已完结\"}</Box>\n                        </Box>\n                        <Box>\n                            <Typography paragraph>{manga.ps}</Typography>\n                        </Box>\n                    </Box>\n                </ExpansionPanelDetails>\n                <Divider/>\n                <ExpansionPanelActions>\n                    {adminAuth && <>\n                        <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"]} size=\"small\" variant=\"outlined\"\n                                      callback={\"\"} className={classes.button} id={manga[\"id\"]} name={\"漫画\"}/>\n                                      <EditMangaButton manga={manga}/></>}\n                </ExpansionPanelActions>\n            </Collapse>\n            <ChapterAuthList mid={manga[\"id\"]}/>\n        </Box>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Chip from \"@material-ui/core/Chip\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport TagChip from \"../TagChip/TagChip\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\n\nimport {TextField, Select} from \"mui-rff\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_TAG} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function AddTagChip(props) {\n    const [open, setOpen] = React.useState(false);\n    const {level, mid, cid, tid, lid} = props;\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"level\"] = level;\n        values[\"mid\"] = mid;\n        values[\"cid\"] = typeof cid === \"string\" ? cid : \"\";\n        values[\"tid\"] = typeof tid === \"string\" ? tid : \"\";\n        values[\"lid\"] = typeof lid === \"string\" ? lid : \"\";\n        axios.put(API_TAG, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n\n    return (\n        <>\n            <Chip label={\"+\"} size=\"small\" clickable onClick={handleClickOpen} {...props}/>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">添加标签</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"名称\" type=\"string\" fullWidth required/>\n                            <InputLabel>颜色</InputLabel>\n                            <Select name=\"color\" required>\n                                <MenuItem value={\"red\"}><TagChip tag={{color: \"red\", name: \"红色\"}} size=\"small\"\n                                                                 clickable/></MenuItem>\n                                <MenuItem value={\"pink\"}><TagChip tag={{color: \"pink\", name: \"粉色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"blue\"}><TagChip tag={{color: \"blue\", name: \"蓝色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"purple\"}><TagChip tag={{color: \"purple\", name: \"紫色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"indigo\"}><TagChip tag={{color: \"indigo\", name: \"靛蓝色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"cyan\"}><TagChip tag={{color: \"cyan\", name: \"青色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"teal\"}><TagChip tag={{color: \"teal\", name: \"水鸭色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"lime\"}><TagChip tag={{color: \"lime\", name: \"绿黄色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"orange\"}><TagChip tag={{color: \"orange\", name: \"橘黄色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"brown\"}><TagChip tag={{color: \"brown\", name: \"棕色\"}} size=\"small\"\n                                                                   clickable/></MenuItem>\n                                <MenuItem value={\"gray\"}><TagChip tag={{color: \"gray\", name: \"灰色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                            </Select>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={handleSubmit} color=\"primary\">\n                                添加\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {useDispatch} from \"react-redux\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {tokenHeader} from \"../../../controller/user\";\nimport {setSnackbar} from \"../../../controller/site\";\nimport {TextField, Select} from \"mui-rff\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function EditTaskButton(props) {\n    const {task} = props;\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + task[\"mid\"] + \"/chapter/\" + task[\"cid\"] + \"/task/\" + task[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== task[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"] + \"/\" + res[\"cid\"] + \"/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen} {...props}>\n                编辑任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: task[\"type\"], name: task[\"name\"], \"id\": task[\"id\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\n\nexport default function DataRender(props) {\n    return (\n        <></>\n    );\n}\n","import React from \"react\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport LockIcon from '@material-ui/icons/Lock';\n\n\nexport default function StatusIcon(props) {\n    const {status, ...others} = props;\n\n    return (<>\n        {status === 0 && <EditIcon {...others}/>}\n        {status === 1 && <DoneIcon {...others}/>}\n        {status === 2 && <LockIcon {...others}/>}\n    </>);\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Box from \"@material-ui/core/Box\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport DataRender from \"./DataRender\";\nimport {localtime_exact} from \"../../../controller/utils\";\nimport UserChip from \"../../../Component/UserChip/UserChip\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setGoo, tokenHeader} from \"../../../controller/user\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport {Field, Form} from \"react-final-form\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport UserAutocomplete from \"../../../Component/UserAutocomplete/UserAutocomplete\";\nimport StatusIcon from \"../../../Component/StatusIcon/StatusIcon\";\nimport Chip from \"@material-ui/core/Chip\";\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Radio from \"@material-ui/core/Radio\"\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    listItem: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nconst statusToColor = (status) => {\n    switch (status % 4) {\n        case 1:\n            return { color: 'lightBlue', label: '三成熟' }\n        case 2:\n            return { color: 'rgba(255, 255, 0, 0.5)', label: '五成熟' }\n        case 3:\n            return { color: 'rgba(255, 82, 82, 0.5)', label: '七成熟' }\n        default:\n            return { color: 'rgba(46, 255, 60, 0.7)', label: '新鲜' }\n    }\n};\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {task, adminAuth} = props;\n    const [taskState, setTaskState] = useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setTaskState(task);\n    }, [task]);\n\n    const handleDismiss = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(Object.assign({}, taskState, {accept_by: {uid: \"\", nickname: \"\", avatar: \"\"}}));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <div className={classes.root}>\n            <Box display=\"flex\" flexDirection=\"column\">\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">承接人</Typography></Box>\n                    <Box>\n                        {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n                        <UserChip user={taskState[\"accept_by\"]}\n                                  onDelete={adminAuth && (taskState[\"status\"] === 0 || taskState[\"status\"] === 2) && handleDismiss}/>}\n                        {taskState && taskState[\"accept_by\"][\"uid\"] === \"\" &&\n                        <ToggleButtons taskState={taskState} setTaskState={setTaskState} {...props} />}\n                    </Box>\n                </Box>\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">状态</Typography></Box>\n                    <Box><Typography variant=\"h6\">{taskState && taskState[\"status\"] === 0 && <StatusIcon status={0}/>}\n                        {taskState && taskState[\"status\"] === 1 && <StatusIcon status={1}/>}\n                        {taskState && taskState[\"status\"] === 2 && <StatusIcon status={2}/>}\n                    </Typography></Box>\n                    <Box>{taskState &&\n                    <ToggleStatusButtons taskState={taskState} setTaskState={setTaskState} {...props}/>}</Box>\n\n                </Box>\n                {taskState && taskState[\"wait_status\"] !== null && taskState[\"status\"] === 0 && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography variant=\"h6\">鸽度</Typography></Box>\n                        <WaitStatusChip taskState={taskState} setTaskState={setTaskState} {...props}></WaitStatusChip>\n                    </Box>\n                </>}\n                {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>承接时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"accept_on\"])}</Box>\n                    </Box>\n                </>}\n                {taskState && taskState[\"status\"] === 1 && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>完成时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"complete_on\"])}</Box>\n                    </Box>\n                </>}\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography>创建时间</Typography></Box>\n                    <Box>{taskState && localtime_exact(taskState[\"create_on\"])}</Box>\n                </Box>\n            </Box>\n            <DataRender data={taskState && taskState[\"data\"]}/>\n        </div>\n    );\n}\n\nfunction ToggleButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        handleAssign(values[\"assign_to\"])();\n        handleClose();\n    };\n\n    const handleAssign = (assign_to) => () => {\n        if (assign_to === uid) dispatch(setGoo());\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            params: {assign_to: assign_to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    const handleAssignNormal = (assign_to) => () => {\n        if (assign_to === uid) dispatch(setGoo());\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge_normal\", {\n            params: {assign_to: assign_to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    if (privilege === 0) return <Typography>无</Typography>;\n\n    return <>\n        {adminAuth && <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen} className={classes.button}>分配</Button>}\n        {taskState[\"status\"] === 0 && <Button variant=\"contained\" color=\"primary\" onClick={handleAssignNormal(uid)} className={classes.button}>承接</Button>}\n\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\n            <DialogTitle id=\"form-dialog-title\">分配</DialogTitle>\n            <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogContent>\n                        <Field component={ UserAutocomplete } name=\"assign_to\" label=\"分配\"/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>;\n}\n\nfunction ToggleStatusButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const handleStatusClick = (to) => () => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/status\", {\n            params: {to: to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n            if (to === 1 && taskState[\"accept_by\"][\"uid\"] === uid) dispatch(setGoo());\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return <>{taskState[\"status\"] === 0 && <>\n        {adminAuth && <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={handleStatusClick(2)} className={classes.button}><StatusIcon status={2}/>停止</Button>}\n        {(taskState[\"accept_by\"][\"uid\"] === uid || adminAuth) && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(1)} className={classes.button}><StatusIcon status={1}/>完成</Button>}\n    </>}\n        {adminAuth && <>{taskState && taskState[\"status\"] === 1 &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>再开</Button>}\n            {taskState && taskState[\"status\"] === 2 &&\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>开始</Button>}</>}\n    </>;\n}\n\n\nfunction WaitStatusChip(props) {\n    const {taskState, adminAuth, setTaskState} = props;\n    const [selectedValue, setSelectedValue] = useState(taskState[\"wait_status\"]); // 初始化状态\n\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = () => {\n        handleAssign(selectedValue)();\n        handleClose();\n    };\n\n    const handleRadioChange = (event) => {\n        setSelectedValue(event.target.value); // 更新状态\n    };\n\n    const handleAssign = (selectedValue) => () => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/waitStatusChange\", {\n            params: {selected_value: selectedValue},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return <>\n        {adminAuth && <Chip style={{ backgroundColor: statusToColor(taskState[\"wait_status\"]).color }} onClick={handleClickOpen} label={statusToColor(taskState[\"wait_status\"]).label}/>}\n        {(!adminAuth) && <Chip style={{ backgroundColor: statusToColor(taskState[\"wait_status\"]).color }} label={statusToColor(taskState[\"wait_status\"]).label}/>}\n\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\n            <DialogTitle id=\"form-dialog-title\">修改</DialogTitle>\n            <DialogContent>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup aria-label=\"gender\" name=\"gender1\" value={String(selectedValue)} onChange={handleRadioChange} row>\n                        <FormControlLabel value=\"4\" control={<Radio />} label=\"新鲜\" />\n                        <FormControlLabel value=\"5\" control={<Radio />} label=\"三成熟\" />\n                        <FormControlLabel value=\"6\" control={<Radio />} label=\"五成熟\" />\n                        <FormControlLabel value=\"7\" control={<Radio />} label=\"七成熟\" />\n                        <FormControlLabel value=\"0\" control={<Radio />} label=\"自动设置\" />\n                    </RadioGroup>\n                </FormControl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} color=\"primary\">\n                    取消\n                </Button>\n                <Button onClick={onSubmit} color=\"primary\">\n                    保存\n                </Button>\n            </DialogActions>\n        </Dialog>\n    </>;\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setTitle} from \"../../../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport EditTaskButton from \"./EditTaskButton\";\nimport TagChip from \"../../../Component/TagChip/TagChip\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport AddTagChip from \"../../../Component/TagChip/AddTagChip\";\nimport TaskInfo from \"./TaskInfo\";\nimport DeleteButton from \"../../../Component/DeleteButton/DeleteButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {manga, chapter, tid, adminAuth} = props;\n    const [task, setTask] = useState();\n    const dispatch = useDispatch();\n\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTask(res);\n                    setTitle(manga.name + chapter.name + res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取任务信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tid]);\n\n    return (\n        <div className={classes.root}>\n            <Typography variant=\"h5\">\n                {(typeof task === \"object\" && typeof task.tags === \"object\" && task.tags.map((tag, key) => {\n                    return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                    deletable={adminAuth ? \"true\" : \"false\"} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>;\n                })) || <Skeleton/>}\n                {typeof manga.tags === \"object\" && adminAuth &&\n                <AddTagChip className={classes.label} level={2} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>}\n            </Typography>\n            <Box display=\"flex\" flexDirection=\"row\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h3\">{(task && <>{taskIcon(task[\"type\"])}{task[\"name\"]}</>) || <Skeleton/>}</Typography>\n                </Box>\n                {task && adminAuth && <>\n                    <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid} name=\"任务\"\n                                  variant=\"outlined\" size=\"small\" callback={\"/manga/\" + manga[\"id\"]} className={classes.button}/>\n                    <EditTaskButton task={task} className={classes.button}/></>}\n            </Box>\n            {task && <TaskInfo task={task} adminAuth={adminAuth}/>}\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"../ChapterList/EditChapterButton\";\nimport UserChip from \"../../Component/UserChip/UserChip\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    staffItem: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterInfo(props) {\n    const classes = useStyles();\n    const {chapter, adminAuth} = props;\n\n    return (\n        <div className={classes.root}>\n            <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                        <Typography>Staff</Typography>\n                        <Box display=\"flex\" alignItems=\"center\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                if (task[\"accept_by\"][\"uid\"] !== \"\") {\n                                    return <span className={classes.staffItem} key={key}>\n                                        <span>{task[\"name\"]}</span><UserChip user={task[\"accept_by\"]} size=\"small\"/>\n                                    </span>\n                                }\n                            })}\n                        </Box>\n                        <Typography>備考</Typography>\n                        <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"]} name=\"章节\"\n                                      callback={\"/manga/\" + chapter[\"mid\"]} className={classes.button} size=\"small\" variant=\"outlined\"/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useHistory, useParams} from \"react-router-dom\";\nimport TaskBlock from \"./TaskBlock/TaskBlock\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {useDispatch} from \"react-redux\";\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport ChapterInfo from \"./ChapterInfo\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n}));\n\nexport default function ChapterBlock(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const {cid, tid} = useParams();\n    const [chapter, setChapter] = useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [order, setOrder] = useState(0);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + cid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    for (let i = 0; i < res[\"tasks\"].length; i++) {\n                        if (res[\"tasks\"][i][\"id\"] === tid) {\n                            setOrder(i);\n                            break;\n                        }\n                    }\n                    setChapter(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取章节信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleBack = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order - 1][\"id\"]);\n        setOrder(order - 1);\n    };\n\n    const handleNext = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order + 1][\"id\"]);\n        setOrder(order + 1);\n    };\n\n\n    return (\n        <div className={classes.root}>\n            {chapter && <ChapterInfo chapter={chapter} mid={manga.id} adminAuth={adminAuth}/>}\n            {chapter && <MobileStepper position=\"static\" activeStep={order} backButton={\n                <Button size=\"small\" onClick={handleBack} disabled={order === 0}>\n                    <KeyboardArrowLeft/>上一个任务\n                </Button>\n            } nextButton={\n                <Button size=\"small\" onClick={handleNext} disabled={order === chapter[\"tasks\"].length - 1}>\n                    下一个任务<KeyboardArrowRight/>\n                </Button>\n            } steps={chapter[\"tasks\"].length}/>}\n            {chapter && <TaskBlock chapter={chapter} {...props} tid={chapter[\"tasks\"][order][\"id\"]}/>}\n        </div>\n    );\n}\n","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {Route, Switch, useParams, useRouteMatch, Link as RouterLink} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport cover from \"../cover.jpeg\";\n\nimport NewChapterButton from \"./NewChapterButton\";\nimport ChapterList from \"./ChapterList/ChapterList\";\nimport Metadata from \"./Metadata\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport TagChip from \"../Component/TagChip/TagChip\";\nimport {setTitle} from \"../controller/utils\";\nimport AddTagChip from \"../Component/TagChip/AddTagChip\";\nimport Link from \"@material-ui/core/Link\";\nimport ChapterBlock from \"./ChapterBlock/ChapterBlock\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function MangaPage(props) {\n    const classes = useStyles();\n    const {mid} = useParams();\n    const {path} = useRouteMatch();\n    const dispatch = useDispatch();\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const [adminAuth, setAdminAuth] = useState(false);\n\n    const [manga, setManga] = useState({});\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + mid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setManga(res);\n                    setTitle(res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取漫画信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        setAdminAuth(privilege >= 2 || (typeof manga.producer === \"object\" && manga.producer.uid === uid));\n    }, [privilege, uid, manga]);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        {(typeof manga.tags === \"object\" && manga.tags.map((tag, key) => {\n                            return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                            deletable={adminAuth ? \"true\" : \"false\"} mid={mid}/>;\n                        })) || <Skeleton/>}\n                        {typeof manga.tags === \"object\" && adminAuth &&\n                        <AddTagChip className={classes.label} level={0} mid={manga[\"id\"]}/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/manga/\" + manga[\"id\"]}\n                               color=\"inherit\">{manga.name}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Switch>\n                    <Route exact path={path}>\n                        <Box>{adminAuth && <NewChapterButton mid={manga[\"id\"]}/>}</Box>\n                    </Route>\n                </Switch>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={manga.cover || cover}\n                                title={manga.name}\n                            />\n                        </Card>\n                        <Metadata manga={manga} adminAuth={adminAuth}/>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Switch>\n                        <Route exact path={path}>\n                            <ChapterList mid={mid} adminAuth={adminAuth}/>\n                        </Route>\n                        <Route path={`${path}/:cid/:tid`}>\n                            {manga[\"id\"] && <ChapterBlock adminAuth={adminAuth} manga={manga}/>}\n                        </Route>\n                    </Switch>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nexport default function PrivateRoute({ children, ...rest }) {\n    const privilege = useSelector(state => state.user.privilege);\n    const logging = useSelector(state => state.user.logging);\n\n    return (!logging ? (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                privilege > 0 ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    ) : (<div/>));\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\n\nexport function Tasks(props) {\n    const [tasks, setTasks] = React.useState();\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n        <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n            {tasks &&\n            <MaterialTable icons={tableIcons} columns={[\n                {title: \"漫画\", field: \"mname\"},\n                {title: \"章节\", field: \"cname\"},\n                {title: \"任务\", field: \"name\"},\n                {title: \"类型\", field: \"type\", lookup: {\n                        0: \"其他\",\n                        1: \"图源\",\n                        2: \"翻译\",\n                        3: \"校对\",\n                        4: \"嵌字\",\n                        5: \"审核\",\n                        6: \"发布\",\n                    }},\n                {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n            ]} options={{\n                pageSize: 20,\n            }} data={tasks} components={{\n                Toolbar: props => (<></>)\n            }} onRowClick={(event, rowData, togglePanel) => {\n                history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n            }} localization={{\n                grouping: {\n                    placeholder: \"拖拽表头至此以聚合显示...\",\n                    groupedBy: \"聚合:\"\n                },\n                pagination: {\n                    labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                    labelRowsSelect: '行',\n                    labelRowsPerPage: '每页行数:',\n                    firstAriaLabel: '首页',\n                    firstTooltip: '首页',\n                    previousAriaLabel: '上一页',\n                    previousTooltip: '上一页',\n                    nextAriaLabel: '下一页',\n                    nextTooltip: '下一页',\n                    lastAriaLabel: '末页',\n                    lastTooltip: '末页'\n                },\n            }}/>}\n        </Box>\n    </>\n}","import React from \"react\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function ChangePasswordButton(props) {\n    const {uid} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid + \"/password\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"secondary\" style={{marginTop: \"0.5rem\"}} onClick={handleClickOpen}>修改密码</Button>\n        <Dialog open={open} onClose={handleClose}>\n            <Form onSubmit={onChangePassword} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改密码</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\n                        </DialogContentText>\n                        <TextField autoFocus margin=\"dense\" name=\"password\" label=\"新密码\" type=\"password\" fullWidth required/>\n                        <TextField margin=\"dense\" name=\"re-password\" label=\"重复新密码\" type=\"password\" fullWidth required/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            修改\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport React, {useEffect} from \"react\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {Form} from \"react-final-form\";\nimport Box from \"@material-ui/core/Box\";\nimport {TextField} from \"mui-rff\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport Button from \"@material-ui/core/Button\";\n\nexport function Settings(props) {\n    const uid = useSelector(state => state.user.uid);\n    const [user, setUser] = React.useState();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"introduction\"] = values[\"introduction\"] || \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>账户设置</Typography>\n        <Form initialValues={user && {uid: user[\"uid\"], nickname: user[\"nickname\"], introduction: user[\"introduction\"]}}\n              onSubmit={onSubmit} render={({handleSubmit}) => (\n            <form onSubmit={handleSubmit}>\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n                    <TextField name=\"uid\" label=\"用户ID\" disabled required/>\n                    <TextField name=\"nickname\" label=\"昵称\" required/>\n                    <TextField name=\"introduction\" label=\"自我介绍\" multiline rowsMax={5}/>\n                    <ChangePasswordButton uid={uid}/>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{marginTop: \"1rem\"}}>保存</Button>\n                </Box>\n            </form>)}/>\n\n    </>\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBroadcast, setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ClipboardText from \"mdi-material-ui/ClipboardText\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nexport function Admin(props) {\n    const [codes, setCodes] = React.useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/i_code\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setCodes(res[\"icodes\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取邀请码列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const handleAdd = () => {\n        axios.put(API_BASE + \"/profile/i_code\", null, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            let new_codes = codes.slice(0);\n            new_codes.push(res);\n            setCodes(Object.assign(new_codes));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>管理</Typography>\n        <Box display=\"flex\" flexDirection=\"column\">\n            <Box><EditBroadcast style={{marginBottom: \"1rem\"}}/></Box>\n            <Box>\n                <Button variant=\"contained\" color=\"primary\" onClick={handleAdd}>添加邀请码</Button>\n                {codes && codes.map((code, key) =>\n                    <Paper style={{width: \"100%\"}} key={key}>\n                        <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n                            <CopyToClipboard text={\"https://mikan.mom/signup?icode=\" + code[\"icode\"]} onCopy={() => {\n                                dispatch(setSnackbar(\"已复制邀请链接\", \"success\"))\n                            }}>\n                                <IconButton><ClipboardText/></IconButton>\n                            </CopyToClipboard>\n                            <Typography variant=\"body1\" noWrap flexGrow={1}>{code[\"icode\"]}</Typography>\n                        </Box>\n                    </Paper>\n                )}\n            </Box>\n        </Box>\n    </>\n}\n\nfunction EditBroadcast(props) {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const broadcast = useSelector(state => state.site.broadcast);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        if (!values[\"broadcast\"]) values[\"broadcast\"] = \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/env\", null, {\n            params: {\n                key: \"broadcast\",\n                value: values[\"broadcast\"]\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setBroadcast(values[\"broadcast\"]));\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"primary\" style={{marginTop: \"0.5rem\"}}\n                onClick={handleClickOpen} {...props}>修改公告</Button>\n        <Dialog open={open} onClose={handleClose} maxWidth=\"md\">\n            <Form onSubmit={onChangePassword} initialValues={{broadcast: broadcast}} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改公告</DialogTitle>\n                    <DialogContent>\n                        <TextField autoFocus margin=\"dense\" name=\"broadcast\" label=\"公告\" fullWidth multiline\n                                   rowsMax={5}/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {CLEAN_USER} from \"../reducers/user\";\nimport {useHistory} from \"react-router\";\nimport {setTitle} from \"../controller/utils\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {Tasks} from \"./TasksBlock\";\nimport {Settings} from \"./SettingsBlock\";\nimport {Admin} from \"./AdminBlock\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n}));\n\nexport default function DashboardPage(props) {\n    const classes = useStyles();\n    const [value, setValue] = React.useState(0);\n    const username = useSelector(state => state.user.nickname);\n    const privilege = useSelector(state => state.user.privilege);\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    useEffect(() => setTitle(username), []);\n\n    const onLogOut = () => {\n        window.localStorage.removeItem(\"access_token\");\n        dispatch({type: CLEAN_USER});\n        history.push(\"/\");\n    };\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1} alignItems=\"flex-end\">\n                    <Typography variant=\"h5\">欢迎您,</Typography>\n                    <Typography variant=\"h2\">{username}</Typography>\n                </Box>\n                <Box><Button onClick={onLogOut}>登出</Button></Box>\n            </Box>\n\n            <Box display=\"flex\" flexGrow={1} alignItems=\"flex-start\" flexDirection={isDesktop ? \"row\" : \"column\"}>\n                <Tabs\n                    orientation={isDesktop ? \"vertical\" : \"horizontal\"}\n                    variant=\"scrollable\"\n                    value={value}\n                    onChange={handleChange}\n                    className={classes.tabs}\n                >\n                    <Tab label=\"任务\"/>\n                    <Tab label=\"设置\"/>\n                    {privilege > 2 && <Tab label=\"管理\"/>}\n                </Tabs>\n                <TabPanel value={value} index={0}>\n                    <Tasks/>\n                </TabPanel>\n                <TabPanel value={value} index={1}>\n                    <Settings/>\n                </TabPanel>\n                <TabPanel value={value} index={2}>\n                    <Admin/>\n                </TabPanel>\n            </Box>\n        </Container>\n    );\n}\n\nfunction TabPanel(props) {\n    const {children, value, index, ...other} = props;\n\n    return (\n        <div style={{width: \"100%\"}} hidden={value !== index} {...other}>\n            {value === index && (\n                <Box p={3}>\n                    {children}\n                </Box>\n            )}\n        </div>\n    );\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport {useSelector} from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function Snackbar(props) {\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    const errorMsg = useSelector(state => state.site.snackMsg);\n\n    const omitAction = (key) => () => closeSnackbar(key);\n\n    React.useEffect(() => {\n        if (typeof errorMsg === \"object\" &&\n            typeof errorMsg.message === \"string\" &&\n            errorMsg.message !== \"\") {\n            const messageProps = {variant: errorMsg.variant};\n            if (errorMsg.dismissable)\n                Object.assign(messageProps, {\n                action: (key) => (\n                <Button onClick={omitAction(key)}>\n                    忽略\n                </Button>\n            )});\n            enqueueSnackbar(errorMsg.message, messageProps);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [errorMsg]);\n\n    return (<div/>);\n}","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport axios from \"axios\";\nimport {useLocation} from \"react-router\";\nimport {API_THIRD_PARTY} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function OAuthPage(props) {\n    const classes = useStyles();\n    const [fail, setFail] = useState(false);\n    const query = useQuery();\n\n    React.useEffect(() => {\n        setTitle(\"授权\");\n        axios.get(API_THIRD_PARTY + \"/auth_code\", {\n            params: {\n                client_id: query.get(\"client_id\")\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data)\n            .then(res => {\n                let auth_code = res[\"access_token\"];\n                window.location.href = query.get(\"redirect_uri\") + \"?code=\" + auth_code + \"&state=\" + query.get(\"state\");\n            }).catch(() => setFail(true))\n    }, []);\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">{fail ? \"请重试\" : \"登录到\" + query.get(\"client_id\")}</Typography>\n                    <Typography variant=\"h2\">{fail ? \"授权失败\" : \"正在授权...\"}</Typography>\n                </Box>\n            </Box>\n        </Container>\n    );\n}","import React from 'react';\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {CLOUD_URL} from \"../constant\";\n\nexport default function CloudPage() {\n\n    React.useEffect(() => {\n        window.location.href = CLOUD_URL;\n    }, []);\n\n    return (<Container>\n        <Typography variant={\"h3\"}>正在跳转...</Typography>\n        <Typography variant={\"h5\"}>如无跳转, <a href={CLOUD_URL}>请点击这里。</a></Typography>\n    </Container>);\n}\n","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {useSelector} from \"react-redux\";\n\nexport default function UsersTable(props) {\n    const history = useHistory();\n    const privilege = useSelector(state => state.user.privilege);\n    const {users} = props;\n\n    const columns = [\n        {title: \"昵称\", field: \"nickname\"},\n        {title: \"用户ID\", field: \"uid\"},\n    ];\n    if (privilege>2) { columns.push({ title: \"权限\", field: \"permissions\" , lookup: {\n        0: \"不活跃组员\",\n        1: \"普通组员\",\n        2: \"不设上限组员\",\n    },}); }\n\n    return (\n        <MaterialTable icons={tableIcons} columns={columns} options={{\n            pageSize: 20\n        }} data={users} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/user/\" + rowData[\"uid\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n        );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport TextField from \"@material-ui/core/TextField\";\nimport UsersTable from \"./UsersTable\";\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\n\nimport axios from \"axios\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {API_USER} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {useSelector} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-end',\n    },\n    buttonStyle: {\n        borderColor: 'lightblue', color: '#34ACE8','&:hover': { backgroundColor: 'lightblue',borderColor: 'lightblue',}\n    }\n}));\n\nexport default function PeoplePage() {\n    const classes = useStyles();\n    const [users, setUsers] = useState([]); // 原始的用户列表\n    const [filteredUsers, setFilteredUsers] = useState([]); // 过滤后的用户列表\n    const [filterText, setFilterText] = useState(\"\"); // 用户输入的筛选文本\n    const [filterCondition, setFilterCondition] = useState(-1);\n    const privilege = useSelector(state => state.user.privilege);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"组员\");\n        dispatch(setBusy(true));\n        axios.get(API_USER, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                setUsers(res[\"users\"]);\n                setFilteredUsers(res[\"users\"]); // 初始情况下过滤结果和原始列表相同\n            })\n            .catch(err => {\n            dispatch(setSnackbar(\"拉取组员列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    // 当筛选文本改变时，重新过滤用户列表\n    useEffect(() => {\n        let filtered = users;\n        if (filterText.trim() !== \"\") {\n            const regex = new RegExp(filterText, \"i\"); // 创建不区分大小写的正则表达式\n            filtered = users.filter(user =>\n                user && Object.values(user).some(value =>\n                    typeof value === 'string' && regex.test(value)\n                )\n            );\n        }\n        if( 3 > filterCondition && filterCondition > -1) {\n            filtered = filtered.filter(user => user.permissions === filterCondition);\n        }\n\n        setFilteredUsers(filtered);\n    }, [filterText, users, filterCondition]);\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">组员</Typography>\n                </div>\n                {privilege >2 && <div className={classes.root} >\n                    <ButtonGroup>\n                        <Button className={classes.buttonStyle} onClick={() => setFilterCondition(0)}>不活跃</Button>\n                        <Button className={classes.buttonStyle} onClick={() => setFilterCondition(1)}>普通</Button>\n                        <Button className={classes.buttonStyle} onClick={() => setFilterCondition(2)}>不设上限</Button>\n                        <Button className={classes.buttonStyle} onClick={() => setFilterCondition(-1)}>全部</Button>\n                    </ButtonGroup>\n                </div>}\n                <TextField\n                    label=\"搜索\"\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    value={filterText}\n                    onChange={e => setFilterText(e.target.value)}\n                />\n                {filteredUsers.length === 0 ? (\n                    <Typography variant=\"body1\" color=\"textSecondary\">\n                        没有找到符合条件的组员。\n                    </Typography>\n                ) : (\n                    <UsersTable users={filteredUsers} />\n                )}\n            </Box>\n        </Container>\n    );\n}\n","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport {localtime_exact, setTitle} from \"../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport UserChip from \"../Component/UserChip/UserChip\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {setNotifications, tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    details: {\n        alignItems: 'center',\n    },\n    summary: {\n        width: '100%',\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    userChip: {\n        marginRight: theme.spacing(1),\n    },\n    unreadHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        fontWeight: \"bold\",\n    }\n}));\n\nexport default function MessagePage(props) {\n    const classes = useStyles();\n    const [messages, setMessages] = useState();\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const deleteFromList = (mrn) => {\n        let result = [];\n        for (let message of messages) {\n            message[\"mrn\"] !== mrn && result.push(message);\n        }\n        setMessages(result);\n    };\n\n    useEffect(() => {\n        setTitle(\"通知\");\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/inbox\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"messages\"] === \"object\" && setMessages(res[\"messages\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea} flexDirection=\"column\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h2\">我的通知</Typography>\n                </Box>\n                <Box display={\"flex\"} flexWrap={\"wrap\"}\n                     justifyContent={\"center\"} alignItems={\"center\"} flexDirection=\"column\">\n                    {messages && messages.map((message) => (\n                        <MessageItem message={message} expanded={expanded} setExpanded={setExpanded}\n                                     deleteFromList={deleteFromList} key={message[\"mrn\"]}/>\n                    ))}\n                </Box>\n            </Box>\n        </Container>\n    );\n}\n\nfunction MessageItem(props) {\n    const classes = useStyles();\n    const {message, expanded, setExpanded, deleteFromList} = props;\n    const [unread, setUnread] = useState(false);\n    const dispatch = useDispatch();\n\n    const [body, setBody] = useState();\n\n    const handleDelete = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_BASE + \"/message/\" + message[\"mrn\"], {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        }).then(res => {\n                deleteFromList(message[\"mrn\"]);\n            }\n        ).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    React.useEffect(() => setUnread(message[\"unread\"]), []);\n\n    React.useEffect(() => {\n        if (expanded === message[\"mrn\"] && !body) {\n            dispatch(setBusy(true));\n            axios.get(API_BASE + \"/message/\" + message[\"mrn\"], {\n                headers: tokenHeader(),\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res[\"body\"] === \"string\" && setBody(res[\"body\"]);\n                        if (unread) {\n                            setUnread(false);\n                            dispatch(setNotifications(-1));\n                        }\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"获取消息失败, 请刷新重试\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        }\n    }, [expanded]);\n\n    const handleExpand = () => {\n        if (expanded === message[\"mrn\"]) setExpanded(\"\");\n        else setExpanded(message[\"mrn\"]);\n    };\n\n    return <div className={expanded === message[\"mrn\"] ? classes.rootExpanded : classes.root}>\n        <ExpansionPanel TransitionProps={{unmountOnExit: true}} expanded={expanded === message[\"mrn\"]}\n                        onChange={handleExpand}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"message-summary\">\n                <Box display=\"flex\" alignItems={\"center\"} flexDirection=\"row\" className={classes.summary}>\n                    <UserChip user={message[\"from_by\"]} className={classes.userChip}/>\n                    <Box flexGrow={1}>\n                        <Typography className={unread ? classes.unreadHeading : classes.heading}\n                                    noWrap>{message[\"title\"]}</Typography>\n                    </Box>\n                    <Typography>{localtime_exact(message[\"create_on\"])}</Typography>\n                </Box>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails className={classes.details}>\n                <Typography variant=\"body1\">{body}</Typography>\n            </ExpansionPanelDetails>\n            <Divider/>\n            <ExpansionPanelActions>\n                <Button onClick={handleDelete} color=\"secondary\" variant=\"outlined\" size=\"small\">删除消息</Button>\n            </ExpansionPanelActions>\n        </ExpansionPanel>\n    </div>\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport axios from \"axios\";\r\nimport { Form } from 'react-final-form';\r\nimport { tokenHeader } from '../../controller/user';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setSnackbar } from '../../controller/site';\r\nimport { API_USER } from '../../constant';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { Select } from \"mui-rff\";\r\n\r\n\r\n\r\nexport default function ChangePermissionsButton(props) {\r\n    const {user} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        axios.post(API_USER +\"/\" + user.uid + \"/permissions\", values, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"contained\" color=\"secondary\" style={{marginTop: \"0.5rem\",marginRight: \"0.5rem\"}} onClick={handleClickOpen}>修改接取权限</Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Form onSubmit={onSubmit} initialValues={{permissions: user.permissions}} render={({handleSubmit}) => (\r\n                    <form onSubmit={handleSubmit}>\r\n                        <DialogTitle id=\"form-dialog-title\">修改接取权限</DialogTitle>\r\n                        <DialogContent>\r\n                            <Select name=\"permissions\" fullWidth required>\r\n                                <MenuItem value={0}>不活跃组员</MenuItem>\r\n                                <MenuItem value={1}>普通组员</MenuItem>\r\n                                <MenuItem value={2}>不设上限组员</MenuItem>\r\n                            </Select>\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\">\r\n                                取消\r\n                            </Button>\r\n                            <Button type=\"submit\" color=\"primary\">\r\n                                修改\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {useParams, Link as RouterLink, useHistory} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {localtime, localtime_exact, setTitle} from \"../controller/utils\";\nimport Link from \"@material-ui/core/Link\";\nimport {tokenHeader} from \"../controller/user\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\nimport MaterialTable from \"material-table\";\nimport ChangePermissionsButton from \"../Component/ChangePermissionsButton/ChangePermissionsButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function UserPage(props) {\n    const classes = useStyles();\n    const {uid} = useParams();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const privilege = useSelector(state => state.user.privilege);\n    const current_uid = useSelector(state => state.user.uid);\n\n    const [user, setUser] = useState({});\n    const [tasks, setTasks] = useState();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                    setTitle(res.nickname);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取用户信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        @{user[\"uid\"] || <Skeleton/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/user/\" + uid}\n                               color=\"inherit\">{user[\"nickname\"]}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Box>{privilege >2 && <ChangePermissionsButton user={user}/>}</Box>\n                <Box>{privilege > 2 && <ChangePasswordButton uid={user[\"uid\"]}/>}</Box>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        {user && user[\"avatar\"] !== \"\" && <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={user[\"avatar\"]}\n                                title={user[\"nickname\"]}\n                            />\n                        </Card>}\n                        <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>加入时间</Typography></Box>\n                                <Box>{user && localtime(user[\"join_time\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                                <Box>{user && localtime(user[\"goo_timestamp\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>管理权限</Typography></Box>\n                                <Box>{user && user[\"privilege\"]}</Box>\n                            </Box>\n                            { (privilege>2 || uid === current_uid) &&\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>接取权限</Typography></Box>\n                                <Box>\n                                    {user[\"permissions\"] === 0 && \"不活跃组员\"}\n                                    {user[\"permissions\"] === 1 && \"普通组员\"}\n                                    {user[\"permissions\"] === 2 && \"不设上限组员\"}\n                                </Box>\n                            </Box>\n                            }\n                            <Box>\n                                <Typography paragraph>{user && user[\"introduction\"]}</Typography>\n                            </Box>\n                        </Box>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n                    <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                        {tasks &&\n                        <MaterialTable icons={tableIcons} columns={[\n                            {title: \"漫画\", field: \"mname\"},\n                            {title: \"章节\", field: \"cname\"},\n                            {title: \"任务\", field: \"name\"},\n                            {title: \"类型\", field: \"type\", lookup: {\n                                    0: \"其他\",\n                                    1: \"图源\",\n                                    2: \"翻译\",\n                                    3: \"校对\",\n                                    4: \"嵌字\",\n                                    5: \"审核\",\n                                    6: \"发布\",\n                                }},\n                            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                            {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n                        ]} options={{\n                            pageSize: 20,\n                        }} data={tasks} components={{\n                            Toolbar: props => (<></>)\n                        }} onRowClick={(event, rowData, togglePanel) => {\n                            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n                        }} localization={{\n                            grouping: {\n                                placeholder: \"拖拽表头至此以聚合显示...\",\n                                groupedBy: \"聚合:\"\n                            },\n                            pagination: {\n                                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                                labelRowsSelect: '行',\n                                labelRowsPerPage: '每页行数:',\n                                firstAriaLabel: '首页',\n                                firstTooltip: '首页',\n                                previousAriaLabel: '上一页',\n                                previousTooltip: '上一页',\n                                nextAriaLabel: '下一页',\n                                nextTooltip: '下一页',\n                                lastAriaLabel: '末页',\n                                lastTooltip: '末页'\n                            },\n                        }}/>}\n                    </Box>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React, {useEffect} from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport {useHistory} from \"react-router-dom\";\nimport {setTitle} from \"./controller/utils\";\nimport GoogleDownasaur from \"mdi-material-ui/GoogleDownasaur\"\n\nexport default function NotFound() {\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"404\"), []);\n\n    useEffect(() => {\n        setTimeout(redirect, 3000);\n    });\n\n    const redirect = () => history.push(\"\");\n\n    return (\n        <Container component=\"main\">\n\n            <Typography variant=\"h1\"><GoogleDownasaur style={{fontSize: 90}}/>404什么也没有找到</Typography>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {TextField} from \"mui-rff\";\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Leaf from \"mdi-material-ui/Leaf\";\nimport {useDispatch} from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {setTitle} from \"../controller/utils\";\nimport {Form} from \"react-final-form\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function SignUpPage() {\n    const classes = useStyles();\n    let query = useQuery();\n    const dispatch = useDispatch();\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"注册\"), []);\n\n    let onSubmit = (values) => {\n        values[\"icode\"] = query.get(\"icode\");\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/signup\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"注册成功，请登录。\", \"success\"));\n            history.push(\"/\");\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    欢迎加入汉化工房九九组\n                </Typography>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"用户ID\" name=\"uid\"\n                                   autoComplete=\"uid\" autoFocus helperText=\"ID将被用于登录\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"昵称\" name=\"nickname\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"password\" label=\"密码\"\n                                   type=\"password\" autoComplete=\"current-password\" helperText=\"密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"re-password\" label=\"重复密码\"\n                                   type=\"password\"/>\n                        <Button fullWidth variant=\"contained\" color=\"primary\" type=\"submit\">\n                            注册\n                        </Button>\n                    </form>)}/>\n            </div>\n        </Container>\n    );\n}","import React from \"react\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport AvatarIcon from \"../AvatarIcon/AvatarIcon\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    userChip: {\r\n        backgroundColor: 'white',\r\n        color: 'black', // 文本颜色\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: 'lightgray', // 鼠标悬停时的颜色\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function ForTableUserChip(props) {\r\n    const {user} = props;\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    if (user === undefined) return (<></>);\r\n\r\n    return (\r\n        <Chip aria-label=\"User Chip\" onClick={(e) => { e.stopPropagation();  history.push(\"/user/\" + user[\"uid\"]); }} className={classes.userChip}\r\n        clickable avatar={<AvatarIcon avatar={user[\"avatar\"]} name={user[\"nickname\"]}/>} label={user[\"nickname\"]} {...props}/>\r\n    );\r\n}","import React from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport {useHistory} from \"react-router\";\r\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\r\nimport {localtime_exact} from \"../controller/utils\";\r\nimport TagChip from \"../Component/TagChip/TagChip\";\r\nimport { Badge } from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\"\r\nimport ForTableUserChip from \"../Component/UserChip/ForTableUserChip\";\r\n\r\n//1个月lightBule\r\n//2个月#FFFF00 lightYellow\r\n//3个月#FF5252 lightRed\r\nconst useStyles = makeStyles((theme) => ({\r\n    smallBadge: {\r\n        minWidth: '14px', // 设置最小宽度\r\n        width: '14px', // 设置宽度\r\n        height: '14px', // 设置高度\r\n        fontSize: '10px', // 设置字体大小\r\n        padding: '0', // 移除内边距\r\n        borderRadius: '50%', // 保持圆形\r\n    },\r\n    lightBlueBadge: {\r\n        backgroundColor: \"lightBlue\",\r\n    },\r\n    lightYellowBadge: {\r\n        backgroundColor: 'rgba(255, 255, 0, 0.5)',\r\n    },\r\n    lightRedBadge: {\r\n        backgroundColor: \"rgba(255, 82, 82, 0.5)\",\r\n    },\r\n}));\r\n\r\nconst getBadgeContent = (tasks, task, type) => {\r\n    // 假设tasks是一个包含所有漫画任务的数组\r\n    // 计算等待状态大于0的任务数量\r\n    return tasks.filter(t => t.mname === task && String(t.type) === type && t.wait_status%4 > 0).length;\r\n};\r\n\r\nconst getBadgeStatus = (tasks, task, type) => {\r\n    const waitStatuses = tasks\r\n        .filter(t => t.mname === task && String(t.type) === type && t.wait_status % 4 > 0)\r\n        .map(t => t.wait_status % 4);\r\n    return waitStatuses.length > 0 ? Math.max(...waitStatuses) : 0;\r\n};\r\n\r\nexport default function RunningTasksTable(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const {tasks} = props;\r\n    const getBadgeClass = (value) => {\r\n        switch (value) {\r\n            case 1:\r\n                return `${classes.smallBadge} ${classes.lightBlueBadge}`;\r\n            case 2:\r\n                return `${classes.smallBadge} ${classes.lightYellowBadge}`;\r\n            case 3:\r\n                return `${classes.smallBadge} ${classes.lightRedBadge}`;\r\n            default:\r\n                return classes.smallBadge;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MaterialTable icons={tableIcons} columns={[\r\n            {title: \"漫画\", field: \"mname\", defaultGroupOrder: 1,\r\n                render: (task) => { // 自定义渲染函数\r\n                const [mname, type] = task.split('鸪鸪鸪');\r\n                return(\r\n                <Badge badgeContent={getBadgeContent(tasks,task,type)} anchorOrigin={{ vertical: 'top', horizontal: 'right' }} overlap=\"rectangle\" classes={{ badge: getBadgeClass(getBadgeStatus(tasks,task,type)) }}>\r\n                    <span style={{ paddingRight: '10px' }}>{mname}</span>\r\n                </Badge>\r\n                );\r\n            },},\r\n            {title: \"章节\", field: \"cname\"},\r\n            {title: \"任务\", field: \"name\"},\r\n            {title: \"类型\", field: \"type\", lookup: {\r\n                    0: \"其他\",\r\n                    1: \"图源\",\r\n                    2: \"翻译\",\r\n                    3: \"校对\",\r\n                    4: \"嵌字\",\r\n                    5: \"审核\",\r\n                    6: \"发布\",\r\n                }, defaultGroupOrder: 0},\r\n            {title: \"标签\", field: \"tags\", grouping: false, render: task =>\r\n                <>{task[\"tags\"].map((tag, key) => {\r\n                    return <TagChip tag={tag} size=\"small\" key={key}/>;\r\n                })}</>\r\n                , sorting: false},\r\n            {title: \"用户\",field: \"accept_by\",grouping: false,render: task =>\r\n            {\r\n                return <ForTableUserChip user={task[\"accept_by\"]}></ForTableUserChip>;\r\n            }\r\n            },\r\n            {title: \"接取时间\", field: \"accept_on\", render: task => localtime_exact(task[\"accept_on\"]), grouping: false},\r\n        ]} options={{\r\n            pageSize: 20,\r\n            grouping: true,\r\n            rowStyle: rowData => {\r\n                const colorMapping = {\r\n                    0: 'transparent',\r\n                    1: 'lightBlue', // 第一种颜色\r\n                    2: 'rgba(255, 255, 0, 0.5)', // 第二种颜色\r\n                    3: 'rgba(255, 82, 82, 0.5)', // 第三种颜色\r\n                };\r\n                const backgroundColor = colorMapping[rowData.wait_status % 4] || 'transparent';\r\n\r\n                return { backgroundColor };\r\n            }\r\n        }} data={tasks} components={{\r\n            Toolbar: props => (<></>)\r\n        }} onRowClick={(event, rowData, togglePanel) => {\r\n            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\r\n        }} localization={{\r\n            grouping: {\r\n                placeholder: \"拖拽表头至此以聚合显示...\",\r\n                groupedBy: \"聚合:\"\r\n            },\r\n            pagination: {\r\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\r\n                labelRowsSelect: '行',\r\n                labelRowsPerPage: '每页行数:',\r\n                firstAriaLabel: '首页',\r\n                firstTooltip: '首页',\r\n                previousAriaLabel: '上一页',\r\n                previousTooltip: '上一页',\r\n                nextAriaLabel: '下一页',\r\n                nextTooltip: '下一页',\r\n                lastAriaLabel: '末页',\r\n                lastTooltip: '末页'\r\n            },\r\n        }}/>\r\n    );\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {setTitle} from \"../controller/utils\";\r\nimport {setBusy, setSnackbar} from \"../controller/site\";\r\nimport axios from \"axios\";\r\nimport {API_RUNNING_TASK} from \"../constant\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport RunningTasksTable from \"./RunningTasksTable\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        marginTop: theme.spacing(5),\r\n        marginBottom: theme.spacing(5),\r\n    },\r\n    taskListItem: {\r\n        marginTop: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nexport default function RunningTasksPage() {\r\n    const classes = useStyles();\r\n    const [tasks, setTasks] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setTitle(\"进行中的任务\");\r\n        dispatch(setBusy(true));\r\n        axios.get(API_RUNNING_TASK, {\r\n            withCredentials: true,\r\n            validateStatus: status => status === 200\r\n        })\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                const processedTasks = res[\"tasks\"].map(task => ({\r\n                    ...task,\r\n                    mname: `${task.mname}鸪鸪鸪${task.type}`\r\n                }));\r\n                setTasks(processedTasks);\r\n                }\r\n            ).catch(err => {\r\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\r\n        }).finally(() => dispatch(setBusy(false)));\r\n    }, []);\r\n\r\n    return (\r\n        <Container>\r\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\r\n                <div className={classes.title}>\r\n                    <Typography variant=\"h2\">进行中的任务</Typography>\r\n                </div>\r\n                <RunningTasksTable tasks={tasks}/>\r\n            </Box>\r\n        </Container>\r\n    );\r\n}","import React, { useState, memo, useMemo, useCallback, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Typography, TextField, Popover } from '@material-ui/core';\r\nimport { debounce } from 'lodash';\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  calendarContainer: {\r\n    maxWidth: '350px',\r\n    minWidth: '280px',\r\n    margin: '0 auto',\r\n    padding: '16px',\r\n    border: '1px solid #ccc',\r\n    borderRadius: '8px',\r\n  },\r\n  weekDayHeader: {\r\n    display: 'grid',\r\n    gridTemplateColumns: (props) => (props.mode === 0 ? 'repeat(7, 1fr)' : '50px repeat(7, 1fr)'),\r\n    gap: '4px',\r\n    marginBottom: '8px',\r\n    fontWeight: 'bold',\r\n  },\r\n  dayContainer: {\r\n    display: 'grid',\r\n    gridTemplateColumns: (props) => (props.mode === 0 ? 'repeat(7, 1fr)' : '50px repeat(7, 1fr)'),\r\n    gap: '4px',\r\n  },\r\n  weekNumber: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontWeight: 'bold',\r\n    minWidth: '50px',\r\n  },\r\n  dayButton: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: '50%',\r\n    cursor: 'pointer',\r\n    border: '1px solid #ccc',\r\n    aspectRatio: '1 / 1',\r\n    '&:hover': {\r\n      backgroundColor: '#f0f0f0',\r\n    },\r\n  },\r\n  selectedDay: {\r\n    backgroundColor: '#3f51b5',\r\n    color: '#fff',\r\n    border: 'none',\r\n  },\r\n  emptyDay: {\r\n    visibility: 'hidden',\r\n  },\r\n}));\r\nconst CustomDatePicker = memo(({ mode = 2, value = [], onChange }) => {\r\n  const classes = useStyles({ mode });\r\n\r\n  // 星期标题\r\n  const weekDays = useMemo(() => ['一', '二', '三', '四', '五', '六', '七'], []);\r\n\r\n  // 生成1到35天的数组\r\n  const days = useMemo(() => Array.from({ length: 35 }, (_, i) => i + 1), []);\r\n\r\n  // 计算1号是星期几（假设1号是星期一）\r\n  const startDayOfWeek = 1; // 0 = Sunday, 1 = Monday, ..., 6 = Saturday\r\n\r\n  // 生成空白占位符（确保1号是星期一）\r\n  const emptyDays = useMemo(\r\n    () => Array(startDayOfWeek - 1).fill(null).map((_, i) => i + 1),\r\n    [startDayOfWeek]\r\n  );\r\n\r\n  // 将日期分组成周\r\n  const weeks = useMemo(() => {\r\n    const weeks = [];\r\n    let currentWeek = [];\r\n    let weekNumber = 1;\r\n\r\n    // 添加空白占位符\r\n    emptyDays.forEach(() => {\r\n      currentWeek.push(null);\r\n    });\r\n\r\n    // 将日期分配到周中\r\n    days.forEach((day) => {\r\n      currentWeek.push(day);\r\n      if (currentWeek.length === 7) {\r\n        weeks.push({ weekNumber, days: currentWeek });\r\n        currentWeek = [];\r\n        weekNumber++;\r\n      }\r\n    });\r\n\r\n    // 如果最后一周不足7天，补全\r\n    if (currentWeek.length > 0) {\r\n      while (currentWeek.length < 7) {\r\n        currentWeek.push(null);\r\n      }\r\n      weeks.push({ weekNumber, days: currentWeek });\r\n    }\r\n\r\n    return weeks;\r\n  }, [days, emptyDays]);\r\n\r\n  // 处理日期选择\r\n  const handleDayClick = useCallback(\r\n    (day) => {\r\n      const newSelectedDays = new Set(value); // 使用 value 而不是 selectedDays\r\n      if (newSelectedDays.has(day)) {\r\n        newSelectedDays.delete(day); // 取消选择\r\n      } else {\r\n        newSelectedDays.add(day); // 添加选择\r\n      }\r\n      onChange([...newSelectedDays]); // 确保传递的是数组\r\n    },\r\n    [value, onChange]\r\n  );\r\n\r\n  return (\r\n    <div className={classes.calendarContainer}>\r\n      <Typography variant=\"h6\" align=\"center\" gutterBottom>\r\n        选择日期\r\n      </Typography>\r\n\r\n      {/* 星期标题 */}\r\n      {mode !== 0 && (\r\n        <div className={classes.weekDayHeader}>\r\n          {mode !== 0 && <div></div>}\r\n          {weekDays.map((day) => (\r\n            <Typography key={day} variant=\"body2\" align=\"center\">\r\n              {day}\r\n            </Typography>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* 日期按钮 */}\r\n      <div className={classes.dayContainer}>\r\n        {weeks.map((week) => (\r\n          <React.Fragment key={week.weekNumber}>\r\n            {/* 显示周数 */}\r\n            {mode !== 0 && (\r\n              <div className={classes.weekNumber}>第{week.weekNumber}周</div>\r\n            )}\r\n\r\n            {/* 显示日期 */}\r\n            {week.days.map((day, index) => {\r\n              // 当 mode 为 0 时，隐藏 32-35 的日期\r\n              if (mode === 0 && day && day >= 32) {\r\n                return null;\r\n              }\r\n\r\n              return day ? (\r\n                <div\r\n                  key={day}\r\n                  className={`${classes.dayButton} ${\r\n                    value.includes(day) ? classes.selectedDay : ''\r\n                  }`}\r\n                  onClick={() => handleDayClick(day)}\r\n                >\r\n                  {mode === 1 ? '' : day}\r\n                </div>\r\n              ) : (\r\n                <div key={`empty-${index}`} className={`${classes.dayButton} ${classes.emptyDay}`} />\r\n              );\r\n            })}\r\n          </React.Fragment>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst MultiDatePicker = memo(({ mode = 2, value = [], onChange }) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleOpenPicker = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClosePicker = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n\r\n  // 确保 value 是一个数组\r\n  const safeValue = Array.isArray(value) ? value : [];\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"flex-end\" flexGrow={1}>\r\n      <TextField\r\n        value={safeValue.join(', ')} // 使用 safeValue\r\n        onClick={handleOpenPicker}\r\n        placeholder=\"选择日期\"\r\n        fullWidth\r\n        InputProps={{ readOnly: true }}\r\n      />\r\n      <Popover\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClosePicker}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'left',\r\n        }}\r\n        disableAutoFocus // 防止 Popover 自动获取焦点\r\n        disableEnforceFocus // 防止 Popover 强制焦点\r\n        disableRestoreFocus // 防止 Popover 关闭时恢复焦点\r\n      >\r\n        <CustomDatePicker\r\n          mode={mode}\r\n          value={safeValue} // 使用 safeValue\r\n          onChange={onChange}\r\n        />\r\n      </Popover>\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default MultiDatePicker;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TextField } from 'mui-rff';\r\nimport { Form, Field } from 'react-final-form';\r\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\r\nimport MultiDatePicker from \"../Component/MultiDatePicker/MultiDatePicker\";\r\nimport axios from \"axios\";\r\nimport { API_MAGAZINE } from \"../constant\";\r\nimport { tokenHeader } from \"../controller/user\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setSnackbar } from \"../controller/site\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { FormHelperText } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n      marginLeft: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n      width: 200,\r\n    },\r\n  }));\r\n\r\nexport default function NewMagazineButton() {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [isScheduled, setIsScheduled] = React.useState(false);\r\n    const [scheduleType, setScheduleType] = React.useState(0); // 0 for date, 1 for week\r\n    const MemoizedMultiDatePicker = React.memo(MultiDatePicker);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleScheduleChange = (event) => {\r\n        setIsScheduled(event.target.checked);\r\n    };\r\n\r\n    const handleScheduleTypeChange = (event) => {\r\n        setScheduleType(event.target.value);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        if (isScheduled) {\r\n            values[\"magazine_schedule_type\"] = scheduleType;\r\n            // 将 magazine_schedule_dates 转换为字符串\r\n            if (values.magazine_schedule_dates && Array.isArray(values.magazine_schedule_dates)) {\r\n                values[\"magazine_schedule_dates\"] = values.magazine_schedule_dates.join(',');\r\n            }\r\n\r\n            delete values[\"next_update_time\"];\r\n        } else {\r\n            delete values[\"magazine_schedule_type\"];\r\n            delete values[\"magazine_schedule_dates\"];\r\n            delete values[\"magazine_schedule_time\"];\r\n        }\r\n        values[\"magazine_schedule_flag\"] = isScheduled;\r\n\r\n        axios.put(API_MAGAZINE, values, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                console.log(err.response.data.detail);\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n            <div>\r\n                <Button variant={\"contained\"} color={\"primary\"} onClick={handleClickOpen}>创建杂志</Button>\r\n                <Dialog open={open} onClose={handleClose} disableEnforceFocus >\r\n                    <Form onSubmit={onSubmit} initialValues={{magazine_schedule_time: \"00:00\" }}render={({ handleSubmit }) => (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <DialogTitle id=\"form-dialog-title\">创建杂志</DialogTitle>\r\n                            <DialogContent>\r\n                                <TextField autoFocus margin=\"dense\" name=\"name\" label=\"杂志名称\" type=\"string\" fullWidth required />\r\n                                <TextField margin=\"dense\" name=\"id\" label=\"杂志ID\" type=\"string\" fullWidth required helperText=\"杂志ID会出现在URL上，不可重名，最好避免使用汉字。建议：罗马字/英文简写。\" />\r\n                                <FormHelperText>注意，以下时间均采用日本时间</FormHelperText>\r\n                                <Grid container spacing={2} alignItems=\"center\">\r\n                                    <Grid item xs={6}> <FormControlLabel control={<Switch checked={isScheduled} onChange={handleScheduleChange} />} label=\"是否自动更新\" style={{ marginLeft: 0 }} labelPlacement=\"start\" /> </Grid>\r\n                                    {isScheduled && (\r\n                                        <Grid item xs={3}> <FormControl fullWidth margin=\"dense\">\r\n                                            <Select value={scheduleType} onChange={handleScheduleTypeChange}>\r\n                                                <MenuItem value={0}>按日期更新</MenuItem>\r\n                                                <MenuItem value={1}>按周次更新</MenuItem>\r\n                                            </Select></FormControl></Grid>)}\r\n                                </Grid> {isScheduled && (\r\n                                    <Grid container spacing={2} alignItems=\"center\">\r\n                                        <Grid item xs={6}>\r\n                                            <Field name=\"magazine_schedule_dates\">\r\n                                                {({ input }) => (\r\n                                                    <MemoizedMultiDatePicker\r\n                                                        mode={scheduleType}\r\n                                                        value={input.value || []}\r\n                                                        onChange={(dates) => input.onChange(dates)}/>)}\r\n                                            </Field>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                        <TextField name=\"magazine_schedule_time\" id=\"time\" type=\"time\"\r\n                                            className={classes.textField}\r\n                                            InputLabelProps={{ shrink: true, }}\r\n                                            inputProps={{ step: 300 }}/>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                )}\r\n                                {!isScheduled && (\r\n                                    <Grid container spacing={2} alignItems=\"center\">\r\n                                        <Grid item xs={12}>\r\n                                            <TextField margin=\"dense\" label=\"下次更新时间\" type=\"datetime-local\" name=\"next_update_time\" InputLabelProps={{ shrink: true }} fullWidth />\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                )}\r\n                                <FormControl fullWidth margin=\"dense\">\r\n                                    <InputLabel>状态</InputLabel>\r\n                                    <Field name=\"status\" defaultValue={0}>\r\n                                        {({ input }) => (\r\n                                            <Select {...input} label=\"状态\">\r\n                                                <MenuItem value={0}>连载中</MenuItem>\r\n                                                <MenuItem value={1}>完结</MenuItem>\r\n                                            </Select>\r\n                                        )}\r\n                                    </Field>\r\n                                </FormControl>\r\n                                <TextField margin=\"dense\" name=\"media\" label=\"媒介\" type=\"string\" fullWidth />\r\n                                <Field component={ImgUrlTextField} name=\"cover\" />\r\n                                <TextField margin=\"dense\" name=\"url\" label=\"杂志发布URL\" type=\"string\" fullWidth />\r\n                            </DialogContent>\r\n\r\n                            <DialogActions>\r\n                                <Button onClick={handleClose} color=\"primary\">取消</Button>\r\n                                <Button type=\"submit\" color=\"primary\">创建</Button>\r\n                            </DialogActions>\r\n                        </form>\r\n                    )} />\r\n                </Dialog>\r\n            </div>\r\n    );\r\n}","import React, {useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport cover from '../cover.jpeg';\r\nimport Box from \"@material-ui/core/Box\";\r\nimport {Link} from \"react-router-dom\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport TagChip from \"../Component/TagChip/TagChip\";\r\nimport {tagColor, textColor} from '../Component/TagChip/colors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        maxWidth: 175,\r\n        [theme.breakpoints.up(\"md\")]: {\r\n            maxWidth: 275,\r\n        },\r\n        position: \"relative\",\r\n        margin: theme.spacing(2)\r\n    },\r\n    labels: {\r\n        position: \"absolute\",\r\n        right: theme.spacing(0),\r\n        top: theme.spacing(0)\r\n    },\r\n    label: {\r\n        marginTop: theme.spacing(0.5),\r\n        marginRight: theme.spacing(0.5)\r\n    },\r\n    content: {\r\n        width: \"100%\",\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        backgroundColor: \"black\",\r\n        opacity: 0.8\r\n    },\r\n    details: {\r\n        opacity: 1,\r\n        color: \"white\"\r\n    }\r\n}));\r\n\r\nexport default function MagazineCard(props) {\r\n    const classes = useStyles();\r\n    const {magazine} = props;\r\n    const [img, changeImg] = useState(cover);\r\n    let datestatus;\r\n    if (magazine.status === 0) {\r\n        datestatus = timeUntilUpdate(magazine.next_update_time);\r\n    } else {\r\n        datestatus = { message: \"已完结\", color: \"red\" };\r\n    }\r\n    React.useEffect(() => {\r\n        const img = new Image();\r\n        img.src = magazine.cover;\r\n        img.onload = function () {\r\n            changeImg(magazine.cover);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <Card className={classes.root}\r\n              component={Link} to={\"/magazine/\" + magazine.id}>\r\n            <CardActionArea>\r\n                <CardMedia\r\n                    component={\"img\"}\r\n                    image={img}\r\n                    title={magazine.name}\r\n                />\r\n                <Box display={\"flex\"} flexDirection={\"row-reverse\"} flexWrap=\"wrap\" className={classes.labels}>\r\n                    <Chip style={{backgroundColor: \"#99D9EA\"}} className={classes.label} size=\"small\" label={magazine.inclusion}/>\r\n                    {datestatus.message !== \"无时间\" && <Chip style={{backgroundColor: tagColor(datestatus.color),color: textColor(datestatus.color)}} className={classes.label} size=\"small\" label={datestatus.message}/>}\r\n                    {typeof magazine.tags === \"object\" && magazine.tags.map((tag, key) =>\r\n                        (<TagChip className={classes.label} tag={tag} size=\"small\" key={key}/>))}\r\n                </Box>\r\n                <CardContent className={classes.content}>\r\n                    <div className={classes.details}>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                            {magazine.name || <CircularProgress/>}\r\n                        </Typography>\r\n                    </div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction timeUntilUpdate(stamp) {\r\n    let result = \"\";\r\n    let color = \"lime\"; // 默认颜色\r\n\r\n    if (typeof stamp !== \"number\" || isNaN(stamp)) {\r\n        return { message: \"时间错误\", color: \"orange\" };\r\n    }\r\n\r\n    if( stamp === 0 )\r\n    {\r\n        return { message: \"无时间\", color: \"orange\" };\r\n    }\r\n\r\n    // 创建一个新的 Date 对象来获取当前时间，并调整时间戳以考虑本地时区偏移\r\n    const currentTimeUTC = new Date();\r\n    const currentTime = new Date(currentTimeUTC.getTime() + 9 * 60 * 60 * 1000);\r\n    const givenTime = new Date(stamp * 1000);\r\n\r\n    // 检查给定时间是否已经过去\r\n    if (givenTime <= currentTime) {\r\n        return { message: \"任务可更新\", color: \"orange\" };\r\n    }\r\n\r\n    // 计算时间差（以毫秒为单位）\r\n    const timeDifference = givenTime - currentTime;\r\n\r\n    // 将时间差转换为天、小时和分钟\r\n    const msPerDay = 24 * 60 * 60 * 1000;\r\n    const msPerHour = 60 * 60 * 1000;\r\n    const msPerMinute = 60 * 1000;\r\n\r\n    const days = Math.floor(timeDifference / msPerDay);\r\n    const hours = Math.floor((timeDifference % msPerDay) / msPerHour);\r\n    const minutes = Math.floor((timeDifference % msPerHour) / msPerMinute);\r\n\r\n    // 根据时间差返回相应的字符串\r\n    if (days >= 1) {\r\n        result = `${days}天后`;\r\n    } else if (hours >= 1) {\r\n        result = `${hours}小时后`;\r\n    } else {\r\n        result = `${minutes}分钟后`;\r\n    }\r\n\r\n    return { message: result, color: color };\r\n}","import React, {useState} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport MagazineCard from \"./MagazineCard\"\r\nimport axios from \"axios\";\r\nimport {setBusy, setSnackbar} from \"../controller/site\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nexport default function MagazineCardList(props) {\r\n    const {showFinished} = props;\r\n    const [magazines, setMagazines] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(  () => {\r\n        dispatch(setBusy(true));\r\n         axios.get(API_MAGAZINE, {\r\n            withCredentials: true,\r\n            validateStatus: status => status === 200\r\n        })\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                typeof res.magazines === \"object\" && setMagazines(res.magazines);\r\n                }\r\n            ).catch(err => {\r\n                dispatch(setSnackbar(\"获取漫画列表失败\", \"error\"));\r\n            }).finally(() => dispatch(setBusy(false)));\r\n    }, []);\r\n\r\n    return (\r\n            <Grid container spacing={1}>\r\n                {magazines.map((magazine) => {\r\n                    if (magazine.status === 0 || showFinished)\r\n                        return (<Grid item xs={6} sm={3} md={3} lg={2} key={magazine.id}><MagazineCard magazine={magazine}/></Grid>);\r\n                })}\r\n            </Grid>\r\n    );\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport {Form, Field} from 'react-final-form';\r\nimport MagazineAutocomplete from '../Component/MagazineAutocomplete/MagazineAutoComplete';\r\n\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\n\r\n\r\nexport default function DelMagazineButton() {\r\n    const [open, setOpen] = React.useState(false);\r\n    const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n    const [selectedMagazine, setSelectedMagazine] = React.useState(null);\r\n    const [selectedId, setSelectedId] = React.useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setConfirmDelete(false);\r\n        setSelectedMagazine(null);\r\n        setSelectedId(null);\r\n    };\r\n\r\n    const handleConfirmDelete = () => {\r\n        setConfirmDelete(true);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        if(!confirmDelete)\r\n        {\r\n            handleConfirmDelete();\r\n            setSelectedMagazine(values[\"magazine\"].name)\r\n            setSelectedId(values[\"magazine\"].id)\r\n            return ;\r\n        }\r\n            \r\n        axios.delete(API_MAGAZINE + \"/\" + selectedId, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                console.log(err.response.data.detail);\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant={\"contained\"} color={\"primary\"} onClick={handleClickOpen}>删除杂志</Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\r\n                    <form onSubmit={handleSubmit}>\r\n                        {!confirmDelete ? (\r\n                            <>\r\n                                <DialogTitle id=\"form-dialog-title\">确认删除</DialogTitle>\r\n                                <DialogContent>\r\n                                    <DialogContentText>注意！删除后将不可恢复！</DialogContentText>\r\n                                    <Field component={MagazineAutocomplete} name=\"magazine\" label=\"杂志\" id=\"magazine\" fullWidth isRequired={true}/>\r\n                                </DialogContent>\r\n                                <DialogActions>\r\n                                    <Button onClick={handleClose} color=\"primary\">\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"submit\" color=\"primary\">\r\n                                        删除\r\n                                    </Button>\r\n                                </DialogActions>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <DialogTitle id=\"form-dialog-title\">确认删除</DialogTitle>\r\n                                <DialogContent>\r\n                                <DialogContentText>\r\n                                        你确定要删除《<strong>{selectedMagazine}</strong>》吗？此操作无法撤销。\r\n                                    </DialogContentText>\r\n                                </DialogContent>\r\n                                <DialogActions>\r\n                                    <Button onClick={() => setConfirmDelete(false)} color=\"primary\">\r\n                                        返回\r\n                                    </Button>\r\n                                    <Button type=\"submit\" color=\"primary\">\r\n                                        删除\r\n                                    </Button>\r\n                                </DialogActions>\r\n                            </>\r\n                        )}\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n\r\n}\r\n","import React, {useEffect} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport clsx from \"clsx\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {setTitle} from \"../controller/utils\";\r\n\r\nimport NewMagazineButton from \"./NewMagazineButton\";\r\nimport MagazineCardList from \"./MagazineCardList\";\r\nimport DelMagazineButton from \"./DelMagazineButton\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    titleArea: {\r\n        marginTop: theme.spacing(5),\r\n        marginBottom: theme.spacing(5),\r\n    },\r\n    cardsArea: {\r\n        margin: theme.spacing(5)\r\n    },\r\n    expand: {\r\n        transform: 'rotate(0deg)',\r\n        marginLeft: 'auto',\r\n        transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest,\r\n        }),\r\n    },\r\n    expandOpen: {\r\n        transform: 'rotate(180deg)',\r\n    },\r\n}));\r\n\r\nexport default function MainMagazinePage(props) {\r\n    const classes = useStyles();\r\n    const privilege = useSelector(state => state.user.privilege);\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [showFinished, setShowFinished] = React.useState(false);\r\n\r\n    useEffect(() => setTitle(\"\"), []);\r\n\r\n    const handleExpandClick = () => {\r\n        setExpanded(!expanded);\r\n    };\r\n\r\n    const onChangeFinish = (event) => {\r\n        setShowFinished(event.target.checked);\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Box display={\"flex\"} className={classes.titleArea}>\r\n                <Box flexGrow={1}>\r\n                    <Typography variant=\"h5\">雑誌</Typography>\r\n                    <Typography variant=\"h2\">觀測中</Typography>\r\n                </Box>\r\n                <Box alignSelf={\"flex-end\"}>\r\n                    <IconButton\r\n                        className={clsx(classes.expand, {\r\n                            [classes.expandOpen]: expanded,\r\n                        })}\r\n                        onClick={handleExpandClick}\r\n                        aria-expanded={expanded}\r\n                        aria-label=\"更多选项\"\r\n                    >\r\n                        <ExpandMoreIcon/>\r\n                    </IconButton>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Collapse className={classes.filterArea} in={expanded} timeout=\"auto\" unmountOnExit>\r\n                <Box flexGrow={1}>\r\n                </Box>\r\n                <Box display={\"flex\"} justifyContent=\"flex-end\">\r\n                    {privilege >= 2 && (<><Box mr={2}><NewMagazineButton /></Box><DelMagazineButton/></>)}\r\n                    <FormControlLabel\r\n                        checked={showFinished}\r\n                        onChange={onChangeFinish}\r\n                        value={showFinished}\r\n                        size={\"small\"}\r\n                        control={<Switch color=\"primary\"/>}\r\n                        label=\"显示完结杂志\"\r\n                        labelPlacement=\"start\"/>\r\n                </Box>\r\n            </Collapse>\r\n            <MagazineCardList showFinished={showFinished}/>\r\n        </Container>\r\n    );\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\r\nimport MultiDatePicker from \"../Component/MultiDatePicker/MultiDatePicker\";\r\nimport axios from \"axios\";\r\n\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {Form, Field} from 'react-final-form';\r\nimport {TextField} from 'mui-rff';\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\nimport {useHistory} from \"react-router\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {FormHelperText} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n      marginLeft: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n      width: 200,\r\n    },\r\n  }));\r\n\r\n\r\nexport default function EditMagazineButton(props) {\r\n    const classes = useStyles();\r\n    const {magazine} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const [isScheduled, setIsScheduled] = React.useState(false);\r\n    const [scheduleType, setScheduleType] = React.useState(0);\r\n    const MemoizedMultiDatePicker = React.memo(MultiDatePicker);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    React.useEffect(() => {\r\n        if (magazine) {\r\n            setIsScheduled(magazine.magazine_schedule_flag);\r\n            setScheduleType(magazine.magazine_schedule_type);\r\n        }\r\n    }, [magazine]);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleScheduleChange = (event) => {\r\n        setIsScheduled(event.target.checked);\r\n    };\r\n\r\n    const handleScheduleTypeChange = (event) => {\r\n        setScheduleType(event.target.value);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        if (isScheduled) {\r\n            values[\"magazine_schedule_type\"] = scheduleType;\r\n            if (values.magazine_schedule_dates && Array.isArray(values.magazine_schedule_dates) && values.magazine_schedule_dates.length > 0 ) {\r\n                values[\"magazine_schedule_dates\"] = values.magazine_schedule_dates.join(',');\r\n            }\r\n            else {\r\n                dispatch(setSnackbar(\"请选择至少一个日期\", \"error\"));\r\n                return;\r\n            }\r\n\r\n            delete values[\"next_update_time\"];\r\n        } else {\r\n            delete values[\"magazine_schedule_type\"];\r\n            delete values[\"magazine_schedule_dates\"];\r\n            delete values[\"magazine_schedule_time\"];\r\n        }\r\n        values[\"magazine_schedule_flag\"] = isScheduled;\r\n        values[\"cover\"] = document.getElementById(\"cover\").value;\r\n\r\n        axios.post(API_MAGAZINE + \"/\" + magazine[\"id\"], values, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => res.data).then(res => {\r\n            if (res[\"id\"] !== magazine[\"id\"])\r\n                history.replace(\"/magazine/\" + res[\"id\"]);\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                console.log(err.response.data.detail);\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>编辑杂志</Button>\r\n\r\n            <Dialog open={open} onClose={handleClose} adisableEnforceFocus>\r\n                <Form initialValues={{name: magazine.name, id: magazine.id, status: magazine.status, next_update_time: magazine.next_update_time ? change2StandTime(magazine.next_update_time) : \"\",\r\n                                      media: magazine.media, url: magazine.url,magazine_schedule_dates: magazine.magazine_schedule_dates ? magazine.magazine_schedule_dates.split(',').map(Number) : [],\r\n                                      magazine_schedule_time: magazine.magazine_schedule_time ? secondsToTime(magazine.magazine_schedule_time) : \"00:00\"}}\r\n                    onSubmit={onSubmit} render={({handleSubmit}) => (\r\n                        <form onSubmit={handleSubmit}>\r\n                        <DialogTitle id=\"form-dialog-title\">编辑杂志</DialogTitle>\r\n                        <DialogContent>\r\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"杂志名称\" type=\"string\" fullWidth required />\r\n                            <TextField margin=\"dense\" name=\"id\" label=\"杂志ID\" type=\"string\" fullWidth required helperText=\"杂志ID会出现在URL上，不可重名，最好避免使用汉字。建议：罗马字/英文简写。\" />\r\n                            <FormHelperText>注意，以下时间均采用日本时间</FormHelperText>\r\n                            <Grid container spacing={2} alignItems=\"center\">\r\n                                <Grid item xs={6}> <FormControlLabel control={<Switch checked={isScheduled} onChange={handleScheduleChange} />} label=\"是否自动更新\" style={{ marginLeft: 0 }} labelPlacement=\"start\" /> </Grid>\r\n                                {isScheduled && (\r\n                                    <Grid item xs={3}> <FormControl fullWidth margin=\"dense\">\r\n                                        <Select value={scheduleType} onChange={handleScheduleTypeChange}>\r\n                                            <MenuItem value={0}>按日期更新</MenuItem>\r\n                                            <MenuItem value={1}>按周次更新</MenuItem>\r\n                                        </Select></FormControl></Grid>)}\r\n                            </Grid> {isScheduled && (\r\n                                <Grid container spacing={2} alignItems=\"center\">\r\n                                    <Grid item xs={6}>\r\n                                        <Field name=\"magazine_schedule_dates\" >\r\n                                            {({ input }) => (\r\n                                                <MemoizedMultiDatePicker\r\n                                                    mode={scheduleType}\r\n                                                    value={input.value || []}\r\n                                                    onChange={(dates) => input.onChange(dates)}/>)}\r\n                                        </Field>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                    <TextField name=\"magazine_schedule_time\" id=\"time\" type=\"time\"\r\n                                        className={classes.textField}\r\n                                        InputLabelProps={{ shrink: true, }}\r\n                                        inputProps={{ step: 300 }}\r\n                                        required={isScheduled}/>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            )}\r\n                            {!isScheduled && (\r\n                                <Grid container spacing={2} alignItems=\"center\">\r\n                                    <Grid item xs={12}>\r\n                                        <TextField margin=\"dense\" label=\"下次更新时间(日本时间)\" type=\"datetime-local\" name=\"next_update_time\" InputLabelProps={{ shrink: true }} fullWidth />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            )}\r\n                            <FormControl fullWidth margin=\"dense\">\r\n                                <InputLabel>状态</InputLabel>\r\n                                <Field name=\"status\" defaultValue={0}>\r\n                                    {({ input }) => (\r\n                                        <Select {...input} label=\"状态\">\r\n                                            <MenuItem value={0}>连载中</MenuItem>\r\n                                            <MenuItem value={1}>完结</MenuItem>\r\n                                        </Select>\r\n                                    )}\r\n                                </Field>\r\n                            </FormControl>\r\n                            <TextField margin=\"dense\" name=\"media\" label=\"媒介\" type=\"string\" fullWidth />\r\n                            <Field component={ImgUrlTextField} name=\"cover\" initVal={magazine.cover} />\r\n                            <TextField margin=\"dense\" name=\"url\" label=\"杂志发布URL\" type=\"string\" fullWidth />\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\">取消</Button>\r\n                            <Button type=\"submit\" color=\"primary\">修改</Button>\r\n                        </DialogActions>\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction change2StandTime(stamp) {\r\n    if (!stamp) return \"\";\r\n    const date = new Date(stamp * 1000); // 乘以 1000 转换为毫秒\r\n    // 格式化为 \"YYYY-MM-DDTHH:mm\" 格式\r\n    return date.toISOString().slice(0, 16);\r\n}\r\n\r\nfunction secondsToTime(seconds) {\r\n    const h = Math.floor(seconds / 3600); // 计算小时\r\n    const m = Math.floor((seconds % 3600) / 60); // 计算分钟\r\n\r\n    // 使用padStart确保小时和分钟都是两位数\r\n    const hh = String(h).padStart(2, '0');\r\n    const mm = String(m).padStart(2, '0');\r\n\r\n    return `${hh}:${mm}`;\r\n}","import React from \"react\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../../constant\";\r\nimport {setSnackbar} from \"../../controller/site\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport matchSorter from \"match-sorter\";\r\n\r\nexport default function MangaAutocomplete(props) {\r\n    const {input, label, initVal} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [mangaList, setMangaList] = React.useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        if (open && !loading && mangaList.length === 0) {\r\n            setLoading(true);\r\n            axios.get(API_MAGAZINE + \"/blank/manga\", {\r\n                withCredentials: true,\r\n                validateStatus: status => status === 200\r\n            })\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                        typeof res.mangas === \"object\" && setMangaList(res.mangas);\r\n                    }\r\n                ).catch(err => {\r\n                dispatch(setSnackbar(\"拉取漫画列表失败，请重试\", \"error\"));\r\n            }).finally(() => setLoading(false));\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\r\n                      loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有此漫画\" options={mangaList}\r\n                      {...props} onChange={((event, value) => input.onChange(value ? value.id : null))}\r\n                      getOptionLabel={(option) => option.id} defaultValue={initVal}\r\n                      renderOption={(option) => option.name + \"@\" + option.id}\r\n                      getOptionSelected={(option, value) => option.id === value.id}\r\n                      filterOptions={(options, { inputValue }) =>\r\n                          matchSorter(options, inputValue, {keys: [\"name\", \"id\"]})}\r\n                      renderInput={(params) => (\r\n                          <TextField required\r\n                              {...params}\r\n                              label={label}\r\n                              InputProps={{\r\n                                  ...params.InputProps,\r\n                                  style: { width: '250px' },\r\n                                  endAdornment: (\r\n                                      <React.Fragment>\r\n                                          {loading ? <CircularProgress size={20}/> : null}\r\n                                          {params.InputProps.endAdornment}\r\n                                      </React.Fragment>\r\n                                  ),\r\n                              }}\r\n                          />\r\n                      )}/>\r\n    );\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport {Form, Field} from 'react-final-form';\r\nimport MangaAutocomplete from '../Component/MagazineAutocomplete/MangaAutocomplete';\r\n\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\n\r\n\r\nexport default function AddMangaButton(props) {\r\n    const {magazine} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        values[\"manga_id\"] = document.getElementById(\"manga_id\").value;\r\n        axios.put(API_MAGAZINE + \"/\" + magazine[\"id\"] + \"/manga\", values, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>新增漫画</Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\r\n                    <form onSubmit={handleSubmit}>\r\n                        <DialogTitle id=\"form-dialog-title\">新增漫画</DialogTitle>\r\n                        <DialogContent>\r\n                            <Field component={ MangaAutocomplete } name=\"manga_id\" label=\"漫画\" id=\"manga_id\"/>\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\">\r\n                                取消\r\n                            </Button>\r\n                            <Button type=\"submit\" color=\"primary\">\r\n                                创建\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../../constant\";\r\nimport {setSnackbar} from \"../../controller/site\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport matchSorter from \"match-sorter\";\r\n\r\nexport default function MagazineMangaAutocomplete(props) {\r\n    const {input, label, initVal, mid} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [mangaList, setMangaList] = React.useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        if (open && !loading && mangaList.length === 0) {\r\n            setLoading(true);\r\n            axios.get(API_MAGAZINE + \"/manga/\" + mid, {\r\n                withCredentials: true,\r\n                validateStatus: status => status === 200\r\n            })\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                        typeof res.mangas === \"object\" && setMangaList(res.mangas);\r\n                    }\r\n                ).catch(err => {\r\n                dispatch(setSnackbar(\"拉取漫画列表失败，请重试\", \"error\"));\r\n            }).finally(() => setLoading(false));\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\r\n                      loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有此漫画\" options={mangaList}\r\n                      {...props} onChange={((event, value) => input.onChange(value ? value.id : null))}\r\n                      getOptionLabel={(option) => option.id} defaultValue={initVal}\r\n                      renderOption={(option) => option.name + \"@\" + option.id}\r\n                      getOptionSelected={(option, value) => option.id === value.id}\r\n                      filterOptions={(options, { inputValue }) =>\r\n                          matchSorter(options, inputValue, {keys: [\"name\", \"id\"]})}\r\n                      renderInput={(params) => (\r\n                          <TextField required\r\n                              {...params}\r\n                              label={label}\r\n                              InputProps={{\r\n                                  ...params.InputProps,\r\n                                  style: { width: '250px' },\r\n                                  endAdornment: (\r\n                                      <React.Fragment>\r\n                                          {loading ? <CircularProgress size={20}/> : null}\r\n                                          {params.InputProps.endAdornment}\r\n                                      </React.Fragment>\r\n                                  ),\r\n                              }}\r\n                          />\r\n                      )}/>\r\n    );\r\n}","import React from 'react';\r\nimport axios from \"axios\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport MagazineMangaAutocomplete from '../Component/MagazineAutocomplete/MagazineMangaAutocomplete';\r\n\r\nimport {Form, Field} from 'react-final-form';\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\n\r\nexport default function DelMangaButton(props) {\r\n    const {magazine} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n        axios.delete(API_MAGAZINE + \"/manga/\" + document.getElementById(\"manga_id\").value, {\r\n            headers: tokenHeader(),\r\n            validateStatus: status => status === 200\r\n        }).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => {\r\n            try {\r\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\r\n            } catch (e) {\r\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\r\n            }\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>删除漫画</Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\r\n                    <form onSubmit={handleSubmit}>\r\n                        <DialogTitle id=\"form-dialog-title\">删除漫画</DialogTitle>\r\n                        <DialogContent>\r\n                            <Field component={ MagazineMangaAutocomplete } name=\"manga_id\" label=\"漫画\" id=\"manga_id\" mid={magazine[\"id\"]}/>\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\">\r\n                                取消\r\n                            </Button>\r\n                            <Button type=\"submit\" color=\"primary\">\r\n                                删除\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState,useEffect } from 'react';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  customBlue: {\r\n    backgroundColor: '#87cefa',\r\n    '&:hover': {\r\n      backgroundColor: '#50abe4',\r\n    },\r\n  },\r\n}));\r\n\r\nfunction MangaEntry({ manga, index, onUpdate }) {\r\n  const [isUpdating, setIsUpdating] = useState(manga.isUpdating);\r\n  const [hasProofreading, setHasProofreading] = useState(manga.hasProofreading);\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell> <Checkbox checked={isUpdating} onChange={(e) => { setIsUpdating(e.target.checked); onUpdate(index, e.target.checked, manga.nextChapter, hasProofreading); }} /> </TableCell>\r\n      <TableCell> {manga.manga_name} </TableCell>\r\n      <TableCell>\r\n        <Tooltip title={ <div> {manga.recentChapters.map((chapter, idx) => ( <div key={idx}>{chapter}</div> ))} </div> } placement=\"top\" >\r\n          <span>{manga.latestChapter}</span>\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell> <Checkbox checked={hasProofreading} onChange={(e) => { setHasProofreading(e.target.checked); onUpdate(index, isUpdating, manga.nextChapter, e.target.checked);}} disabled={!isUpdating} /> </TableCell>\r\n      <TableCell> <TextField value={manga.nextChapter || ''}  disabled={!isUpdating} onChange={(e) => onUpdate(index, isUpdating, e.target.value, hasProofreading)} required={isUpdating}/> </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\n\r\nfunction MangaTable({ mangas, onMangasChange }) {\r\n  return (\r\n    <TableContainer>\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>是否更新</TableCell>\r\n            <TableCell>漫画</TableCell>\r\n            <TableCell>上一章</TableCell>\r\n            <TableCell>有无校对</TableCell>\r\n            <TableCell>更新章节</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {mangas.map((manga, index) => (\r\n            <MangaEntry\r\n              key={index}\r\n              manga={manga}\r\n              index={index}\r\n              onUpdate={(idx, updating, nextChapter, hasProofreading) =>\r\n                onMangasChange(idx, updating, nextChapter, hasProofreading)\r\n              }\r\n            />\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n\r\nexport default function UpdateMagazineButton(props) {\r\n  const groupMangasByChapter = (mangaList) => {\r\n    const grouped = {};\r\n    mangaList.forEach((manga) => {\r\n      if (!grouped[manga.manga_id]) {\r\n        grouped[manga.manga_id] = {\r\n          manga_id: manga.manga_id,\r\n          manga_name: manga.manga_name,\r\n          chapters: [],\r\n          isUpdating: false, // 默认选中“是否更新”\r\n          hasProofreading: true, // 默认选中“有无校对”\r\n        };\r\n      }\r\n      if (manga.chapter_name) {\r\n        grouped[manga.manga_id].chapters.push(manga.chapter_name);\r\n      }\r\n    });\r\n    Object.keys(grouped).forEach((key) => {\r\n      grouped[key].recentChapters = grouped[key].chapters;\r\n      grouped[key].latestChapter = grouped[key].chapters[0] || '无';\r\n    });\r\n    return Object.values(grouped);\r\n  };\r\n\r\n  const classes = useStyles();\r\n  const { magazine } = props; // 从 props 中接收 magazine 对象\r\n  const [mangas, setMangas] = useState([]); // 使用 magazine.manga_list.mangas 初始化状态\r\n  useEffect(() => { if (magazine && magazine.manga_list) { setMangas(groupMangasByChapter(magazine.manga_list)); }}, [magazine]); // 监听 magazine 的变化\r\n  const [open, setOpen] = React.useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleMangasChange = (index, isUpdating, nextChapter, hasProofreading) => {\r\n    const newMangas = [...mangas];\r\n    newMangas[index] = {\r\n      ...newMangas[index],\r\n      isUpdating,\r\n      nextChapter,\r\n      hasProofreading,\r\n    };\r\n    setMangas(newMangas);\r\n  };\r\n\r\n  const handleClickOpen = () => { setOpen(true);};\r\n\r\n  const handleClose = () => { setOpen(false);};\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault(); // 阻止表单的默认提交行为\r\n\r\n    const values = mangas\r\n    .filter(manga => manga.isUpdating) // 只保留 isUpdating 为 true 的条目\r\n    .map(manga => ({\r\n      manga_id: manga.manga_id,\r\n      nextChapter: manga.nextChapter,\r\n      hasProofreading: manga.hasProofreading,\r\n    }));\r\n\r\n    // 如果没有需要更新的条目，直接返回\r\n    if (values.length === 0) {\r\n      dispatch(setSnackbar('没有需要更新的漫画', 'info'));\r\n      return;\r\n    }\r\n\r\n    axios\r\n      .put(API_MAGAZINE + '/' + magazine['id'], values, {\r\n        headers: tokenHeader(),\r\n        validateStatus: (status) => status === 200,\r\n      })\r\n      .then((res) => {\r\n        window.location.reload();\r\n      })\r\n      .catch((err) => {\r\n        try {\r\n          dispatch(setSnackbar(err.response.data.detail, 'error'));\r\n        } catch (e) {\r\n          dispatch(setSnackbar('未知的错误', 'error'));\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button variant={'contained'} color={magazine.need_update ? \"primary\" : undefined} className={magazine.need_update ? undefined : classes.customBlue} onClick={handleClickOpen}> 更新 </Button>\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <form onSubmit={onSubmit}> {/* 添加 form 标签 */}\r\n          <DialogContent>\r\n            <MangaTable mangas={mangas} onMangasChange={handleMangasChange} />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              取消\r\n            </Button>\r\n            <Button type=\"submit\" color=\"primary\"> {/* 添加 type=\"submit\" */}\r\n              更新\r\n            </Button>\r\n          </DialogActions>\r\n        </form>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {tokenHeader} from \"../controller/user\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setSnackbar} from \"../controller/site\";\r\nimport {Form} from 'react-final-form';\r\n\r\n\r\nexport default function SkipUpdateButton(props) {\r\n    const {magazine} = props;\r\n    const [open, setOpen] = React.useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const onSubmit = () => {\r\n        axios\r\n        .put(API_MAGAZINE + '/' + magazine['id'], [],  {\r\n            headers: tokenHeader(),\r\n            validateStatus: (status) => status === 200,\r\n        })\r\n        .then((res) => {\r\n            window.location.reload();\r\n        })\r\n        .catch((err) => {\r\n            try {\r\n            dispatch(setSnackbar(err.response.data.detail, 'error'));\r\n            } catch (e) {\r\n            dispatch(setSnackbar('未知的错误', 'error'));\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button variant={'contained'} color=\"secondary\" onClick={handleClickOpen}>跳过更新</Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\r\n                    <form onSubmit={handleSubmit}>\r\n                        <DialogTitle id=\"form-dialog-title\">跳过更新</DialogTitle>\r\n                        <DialogContent>\r\n                            <DialogContentText>\r\n                                是否跳过本次更新？\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\">\r\n                                取消\r\n                            </Button>\r\n                            <Button type=\"submit\" color=\"primary\">\r\n                                确定\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </form>)}/>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport {Route, Switch, useParams, useRouteMatch, Link as RouterLink} from \"react-router-dom\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport cover from \"../cover.jpeg\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport clsx from \"clsx\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\r\nimport { Switch as MaterialUISwitch } from \"@material-ui/core\";\r\nimport MangaCard from \"../MainPage/MangaCard\";\r\n\r\nimport axios from \"axios\";\r\nimport {API_MAGAZINE} from \"../constant\";\r\nimport {setBusy, setSnackbar} from \"../controller/site\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {setTitle} from \"../controller/utils\";\r\nimport {change2Time} from \"../controller/timer\";\r\nimport TagChip from \"../Component/TagChip/TagChip\";\r\nimport AddTagChip from \"../Component/TagChip/AddTagChip\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport EditMagazineButton from \"./EditMagazineButton\";\r\nimport AddMangaButton from \"./AddMangaButton\";\r\nimport DelMangaButton from \"./DelMangaButton\";\r\nimport UpdateMagazineButton from \"./UpdateMagazineButton\";\r\nimport SkipUpdateButton from \"./SkipUpdateButton\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        padding: theme.spacing(2),\r\n      },\r\n    coverCard: {\r\n      width: '100%',\r\n      height: '100%',\r\n      objectFit: 'cover',\r\n      maxWidth: 275,\r\n      position: \"relative\"\r\n    },\r\n    contentBox: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      textAlign: 'center',\r\n    },\r\n    titleArea: {\r\n        marginTop: theme.spacing(5),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    label: {\r\n        marginTop: theme.spacing(0.5),\r\n        marginRight: theme.spacing(0.5)\r\n    },\r\n    expand: {\r\n        transform: 'rotate(0deg)',\r\n        marginLeft: 'auto',\r\n        transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest,\r\n        }),\r\n    },\r\n    expandOpen: {\r\n        transform: 'rotate(180deg)',\r\n    }\r\n  }));\r\n\r\nexport default function MagazinePage(props) {\r\n    const classes = useStyles();\r\n    const {id} = useParams();\r\n    const {path} = useRouteMatch();\r\n    const dispatch = useDispatch();\r\n    const privilege = useSelector(state => state.user.privilege);\r\n    const [adminAuth, setAdminAuth] = useState(false);\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [showFinished, setShowFinished] = React.useState(false);\r\n    const [magazine, setMagazine] = useState({});\r\n\r\n    const onChangeFinish = (event) => {\r\n        setShowFinished(event.target.checked);\r\n    };\r\n\r\n    const handleExpandClick = () => {\r\n        setExpanded(!expanded);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        dispatch(setBusy(true));\r\n        axios.get(API_MAGAZINE + \"/\" + id, {\r\n            withCredentials: true,\r\n            validateStatus: status => status === 200\r\n        })\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                    setMagazine(res);\r\n                    setTitle(res.name);\r\n                }\r\n            ).catch(err => {\r\n            dispatch(setSnackbar(\"获取杂志信息失败\", \"error\"));\r\n        }).finally(() => dispatch(setBusy(false)));\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        setAdminAuth(privilege >= 2);\r\n    }, [privilege]);\r\n\r\n    return (\r\n        <Container maxWidth={\"lg\"}>\r\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\r\n                <Box flexGrow={1}>\r\n                    {/* 这里是添加标签 */}\r\n                    <Typography variant=\"h5\">\r\n                        {(typeof magazine.tags === \"object\" && magazine.tags.map((tag, key) => {\r\n                            return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\r\n                                            deletable={adminAuth ? \"true\" : \"false\"} lid={id}/>;\r\n                        })) || <Skeleton/>}\r\n                        {typeof magazine.tags === \"object\" && adminAuth &&\r\n                        <AddTagChip className={classes.label} level={3} lid={magazine[\"id\"]}/>}\r\n                    </Typography>\r\n                    {/* 这里是把杂志名给写上去 */}\r\n                    <Typography variant=\"h2\">\r\n                        {<Link component={RouterLink} to={\"/magazine/\" + magazine[\"id\"]}\r\n                               color=\"inherit\">{magazine.name}</Link> || <Skeleton/>}\r\n                    </Typography>\r\n                </Box>\r\n                {/* 这里是更新、编辑、杂志按钮 */}\r\n                <Switch>\r\n                    <Route exact path={path}>\r\n                        <Box mr={1}>{adminAuth && <EditMagazineButton magazine={magazine}/>}</Box>\r\n                        <Box mr={1}>{adminAuth && <AddMangaButton magazine={magazine}/>}</Box>\r\n                        <Box mr={1}>{adminAuth && <DelMangaButton magazine={magazine}/>}</Box>\r\n                    </Route>\r\n                </Switch>\r\n            </Box>\r\n            <div className={classes.root}>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12} md={6}>\r\n                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <Card className={classes.coverCard}>\r\n                            <CardMedia component={\"img\"} image={magazine.cover || cover} title={magazine.name} />\r\n                        </Card>\r\n                    </Box>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={6}>\r\n                    <Box display={\"flex\"} flexDirection={\"column\"} className={classes.root}>\r\n                        <Box display={\"flex\"}>\r\n                            <Box flexGrow={1}>\r\n                                <Typography variant=\"h5\">详细信息</Typography>\r\n                            </Box>\r\n                        </Box>\r\n                        <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\r\n                            {magazine.url && <Box display=\"flex\" flexDirection={\"row\"}>\r\n                                <Box flexGrow={1}><Typography>出处</Typography></Box>\r\n                                <Link href={magazine.url} target=\"_blank\" rel=\"noopener noreferrer\"> {magazine.url} </Link>\r\n                            </Box>}\r\n                            {magazine.next_update_time !== 0 && <Box display=\"flex\" flexDirection={\"row\"}>\r\n                                <Box flexGrow={1}><Typography>下一次更新时间（日本时间）</Typography></Box>\r\n                                <Box>{change2Time(magazine.next_update_time)}</Box>\r\n                            </Box>}\r\n                            {magazine.next_update_time !== 0 && <Box display=\"flex\" flexDirection={\"row\"}>\r\n                                <Box flexGrow={1}><Typography>距离下次更新剩余时间</Typography></Box>\r\n                                <Box>{timeToUpdate(magazine.next_update_time)}</Box>\r\n                            </Box>}\r\n                            {magazine.media && <Box display=\"flex\" flexDirection={\"row\"}>\r\n                                <Box flexGrow={1}><Typography>媒介</Typography></Box>\r\n                                <Box>{magazine.media}</Box>\r\n                            </Box>}\r\n                            <Box display=\"flex\" flexDirection={\"row\"}>\r\n                                <Box flexGrow={1}><Typography>状态</Typography></Box>\r\n                                <Box>{magazine.status === 0 ? \"连载中\" : \"完结\"}</Box>\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography paragraph>{magazine.ps}</Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                        <Box className={classes.contentBox}>\r\n                            <Box style={{ marginRight: '10px' }}>{adminAuth && magazine.status === 0 && <UpdateMagazineButton magazine={magazine} />}</Box>\r\n                            <Box>{adminAuth && magazine.status === 0 && magazine.need_update && <SkipUpdateButton magazine={magazine} />}</Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n            <Box style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                <Box>\r\n                    <IconButton className={clsx(classes.expand, { [classes.expandOpen]: expanded, })}\r\n                        onClick={handleExpandClick}\r\n                        aria-expanded={expanded}\r\n                        aria-label=\"更多选项\" >\r\n                        <ExpandMoreIcon/>\r\n                    </IconButton>\r\n                </Box>\r\n            </Box>\r\n            <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n                <Box flexGrow={1}></Box>\r\n                <Box display={\"flex\"} justifyContent=\"flex-end\">\r\n                    <FormControlLabel\r\n                        checked={showFinished}\r\n                        onChange={onChangeFinish}\r\n                        size={\"small\"}\r\n                        control={<MaterialUISwitch color=\"primary\"/>}\r\n                        label=\"显示完结的作品\"\r\n                        labelPlacement=\"start\"/>\r\n                </Box>\r\n            </Collapse>\r\n            <Grid container spacing={1}>\r\n                {typeof magazine.mangas === \"object\" && magazine.mangas.map((manga) => {\r\n                    if (manga.status_at_magazine === 0 || showFinished)\r\n                        return (<Grid item xs={6} sm={3} md={3} lg={2} key={manga.id}><MangaCard manga={manga}/></Grid>);\r\n                })}\r\n            </Grid>\r\n        </Container>\r\n    );\r\n}\r\n\r\nfunction timeToUpdate(stamp) {\r\n    let result = \"\";\r\n\r\n    if (typeof stamp !== \"number\" || isNaN(stamp)) {\r\n        return \"时间错误\";\r\n    }\r\n\r\n    if( stamp === 0 )\r\n    {\r\n        return \"无时间\";\r\n    }\r\n\r\n    const currentTimeUTC = new Date();\r\n    const currentTime = new Date(currentTimeUTC.getTime() + 9 * 60 * 60 * 1000);\r\n    // 将时间戳转换为 Date 对象\r\n    const givenTime = new Date(stamp * 1000);\r\n\r\n    // 检查给定时间是否已经过去\r\n    if (givenTime <= currentTime) {\r\n        return \"等待任务更新中······\";\r\n    }\r\n\r\n    // 计算时间差（以毫秒为单位）\r\n    const timeDifference = givenTime - currentTime;\r\n\r\n    // 将时间差转换为天、小时和分钟\r\n    const msPerDay = 24 * 60 * 60 * 1000;\r\n    const msPerHour = 60 * 60 * 1000;\r\n    const msPerMinute = 60 * 1000;\r\n\r\n    const days = Math.floor(timeDifference / msPerDay);\r\n    const hours = Math.floor((timeDifference % msPerDay) / msPerHour);\r\n    const minutes = Math.floor((timeDifference % msPerHour) / msPerMinute);\r\n\r\n    // 根据时间差返回相应的字符串\r\n    if (days >= 1) {\r\n        result = `${days}天后`;\r\n    } else if (hours >= 1) {\r\n        result = `${hours}小时后`;\r\n    } else {\r\n        result = `${minutes}分钟后`;\r\n    }\r\n\r\n    return result;\r\n}","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\n\nimport Border from \"./Border/Border\";\nimport MainPage from \"./MainPage/MainPage\";\nimport TasksPage from \"./TasksPage/TasksPage\";\nimport LoginPage from \"./LoginPage/LoginPage\";\nimport MangaPage from \"./MangaPage/MangaPage\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport DashboardPage from \"./DashboardPage/DashboardPage\";\nimport Snackbar from \"./Snackbar\";\nimport OAuthPage from \"./OAuthPage/OAuthPage\";\nimport CloudPage from \"./CloudPage/CloudPage\";\nimport PeoplePage from \"./PeoplePage/PeoplePage\";\nimport MessagePage from \"./MessagePage/MessagePage\";\nimport UserPage from \"./UserPage/UserPage\";\nimport NotFound from \"./NotFound\";\nimport SignUpPage from \"./LoginPage/SignUpPage\";\nimport RunningTasksPage from './RunningTasksPage/RunningTasksPage';\nimport MainMagazinePage from './MagazinePage/MainMagazinePage';\nimport MagazinePage from './MagazinePage/MagazinePage';\n\nexport default function Routes() {\n\n    return (\n        <Router>\n            <Border>\n                <Switch>\n                    <Route exact path={\"/\"}>\n                        <MainPage/>\n                    </Route>\n                    <Route exact path={\"/magazinePage\"}>\n                        <MainMagazinePage/>\n                    </Route>\n                    <Route path={\"/tasks\"}>\n                        <TasksPage/>\n                    </Route>\n                    <Route path={\"/runningTasks\"}>\n                        <RunningTasksPage/>\n                    </Route>\n                    <Route path={\"/login\"}>\n                        <LoginPage/>\n                    </Route>\n                    <Route path={\"/signup\"}>\n                        <SignUpPage/>\n                    </Route>\n                    <PrivateRoute path={\"/me\"}>\n                        <DashboardPage/>\n                    </PrivateRoute>\n                    <Route path={\"/cloud\"}>\n                        <CloudPage/>\n                    </Route>\n                    <PrivateRoute path={\"/oauth2\"}>\n                        <OAuthPage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/users\"}>\n                        <PeoplePage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/message\"}>\n                        <MessagePage/>\n                    </PrivateRoute>\n                    <Route path={\"/manga/:mid\"} children={<MangaPage/>} />\n                    <Route path={\"/magazine/:id\"} children={<MagazinePage/>} />\n                    <PrivateRoute path={\"/user/:uid\"} children={<UserPage/>} />\n                    <Route path=\"*\">\n                        <NotFound/>\n                    </Route>\n                </Switch>\n            </Border>\n            <Snackbar/>\n        </Router>\n    );\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Border is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux'\nimport site from './site'\nimport user from './user'\n\nconst mikanPeel = combineReducers({\n    site,\n    user,\n});\n\nexport default mikanPeel","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {ThemeProvider} from '@material-ui/core/styles';\nimport {responsiveMainThem} from './theme'\nimport Routes from \"./Routes\"\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from 'react-redux'\nimport {createStore, applyMiddleware} from 'redux'\nimport mikanPeel from './reducers'\n\nimport thunk from \"redux-thunk\";\nimport {SnackbarProvider} from \"notistack\";\n\nlet store = createStore(mikanPeel, applyMiddleware(thunk));\n\nReactDOM.render(\n    <Provider store={store}>\n        <ThemeProvider theme={responsiveMainThem}>\n            <SnackbarProvider anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}>\n                <Routes/>\n            </SnackbarProvider>\n        </ThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}