(this["webpackJsonpmikan-peel"]=this["webpackJsonpmikan-peel"]||[]).push([[0],{283:function(e,a,t){e.exports=t.p+"static/media/cover.d753b4ce.jpeg"},5617:function(e,a,t){e.exports=t(5739)},5739:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),c=t.n(l),i=t(5787),o=t(159),u=t(426),s=t(140),m=t.n(s),d=t(430),f=t.n(d),p=Object(o.a)({palette:{primary:m.a,secondary:f.a}}),E=Object(u.a)(p),g=t(41),b=t(25),h=t(173),v=t.n(h),y=t(268),O=t(11),j=t(39),w=t(5774),k=t(76),x=t(425),S=t(90),C=t(5771),T=t(5746),_=t(5742),N=t(145),z=t(474),I=t(5769),A=t(389),R=t(5741),F=t(27),D=Object(k.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)},listItem:Object(j.a)({},e.breakpoints.up("md"),{paddingTop:0,paddingBottom:0})}}));function W(e){var a=e.name,t=e.to,n=e.sidebarToggle,l=r.a.useState(null),c=Object(O.a)(l,2),i=c[0],o=c[1],u=Object(b.j)({path:t,exact:"/"===t}),s=D(),m=Object(F.a)(),d=Object(R.a)(m.breakpoints.up("md")),f=function(){o(null)},p=Boolean(i);return r.a.createElement("div",null,r.a.createElement(_.a,{button:!0,disableGutters:d,className:s.listItem,onClick:d?null:n,component:g.b,to:t,selected:null!==u},r.a.createElement(x.a,{smDown:!0},r.a.createElement(N.a,{onMouseEnter:function(e){o(e.currentTarget)},onMouseLeave:f},e.children)),r.a.createElement(x.a,{mdUp:!0},r.a.createElement(I.a,{style:{minWidth:"40px"}},e.children),r.a.createElement(A.a,{primary:a}))),r.a.createElement(z.a,{className:s.popover,classes:{paper:s.paper},open:p,anchorEl:i,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},onClose:f,disableRestoreFocus:!0},a))}var B=t(323),L=t(432),G=t.n(L),P=t(433),M=t.n(P),q=t(434),U=t.n(q),V=t(435),H=t.n(V),Y=t(436),$=t.n(Y),J=t(437),K=t.n(J),X=t(8),Q=Object(k.a)((function(e){var a;return{drawer:Object(j.a)({},e.breakpoints.up("md"),{width:80,flexShrink:0}),placeholder:e.mixins.toolbar,drawerPaper:(a={},Object(j.a)(a,e.breakpoints.up("md"),{width:80}),Object(j.a)(a,"width",150),a)}}));function Z(e){var a=e.sidebarToggle,t=e.openStatus,n=Q(),l=Object(F.a)(),c=Object(R.a)(l.breakpoints.up("md")),i=Object(X.d)((function(e){return e.user.privilege})),o=r.a.createElement("span",{style:{height:"100%"}},r.a.createElement(B.a,{style:{height:"100%"},display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"},r.a.createElement(B.a,null,r.a.createElement("div",{className:n.placeholder}),r.a.createElement(C.a,null),r.a.createElement(T.a,{disablePadding:!0},r.a.createElement(W,{to:"/",name:"\u6f2b\u753b",sidebarToggle:a},r.a.createElement(G.a,{style:c?{fontSize:62}:{}})),r.a.createElement(W,{to:"/tasks",name:"\u4efb\u52a1",sidebarToggle:a},r.a.createElement(M.a,{style:c?{fontSize:62}:{}})),r.a.createElement(W,{to:"/cloud",name:"\u6587\u4ef6",sidebarToggle:a},r.a.createElement(U.a,{style:c?{fontSize:62}:{}})),r.a.createElement(W,{to:"/users",name:"\u6210\u5458",sidebarToggle:a},r.a.createElement(H.a,{style:c?{fontSize:62}:{}})),i>99&&r.a.createElement(W,{to:"/stat",name:"\u7edf\u8ba1",sidebarToggle:a},r.a.createElement($.a,{style:c?{fontSize:62}:{}})))),i>99&&r.a.createElement(B.a,null,r.a.createElement(C.a,null),r.a.createElement(T.a,null,r.a.createElement(W,{name:"\u7ba1\u7406",sidebarToggle:a},r.a.createElement(K.a,{style:c?{fontSize:62}:{}}))))));return r.a.createElement("nav",{className:n.drawer},r.a.createElement(x.a,{mdUp:!0,implementation:"css"},r.a.createElement(S.a,{variant:"temporary",anchor:"left",open:t,onClose:a,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},o)),r.a.createElement(x.a,{smDown:!0,implementation:"css"},r.a.createElement(S.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},o)))}var ee=t(340),ae=t(175),te=t(439),ne=t.n(te),re=t(5772),le=t(442),ce=t.n(le),ie=t(441),oe=t.n(ie),ue=t(5773),se=t(341),me=t(400),de=t(5800),fe=t(209),pe=t.n(fe),Ee=t(210),ge=t.n(Ee),be=t(272),he=t.n(be),ve=t(211),ye=t.n(ve),Oe=t(212),je=t.n(Oe),we=t(273),ke=t.n(we),xe=t(274),Se=t.n(xe),Ce=t(275),Te=t.n(Ce),_e=t(276),Ne=t.n(_e),ze=t(142),Ie=t.n(ze);function Ae(e){switch(e){case 0:return pe.a[500];case 1:return ge.a[300];case 2:return he.a[500];case 3:return ye.a[900];case 4:return je.a[500];case 5:return ke.a[500];case 6:return Se.a[500];case 7:return Te.a[600];case 8:return m.a[500];case 9:return Ne.a[500];case 10:return Ie.a[500];default:return Ie.a[200]}}function Re(e){switch(e){case 0:case 1:case 2:case 3:case 4:return"white";case 5:return"black";case 6:return"white";case 7:case 8:return"black";case 9:return"white";case 10:default:return"black"}}function Fe(e){var a=e.avatar,t=e.name,n=function(e){var a,t=0;for(a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t};return r.a.createElement(de.a,Object.assign({alt:t,src:a},e,{style:{color:Re(n(t)%11),backgroundColor:Ae(n(t)%11)}}),t[0]?t[0]:"\u67d1")}var De=t(440),We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{broadcast:"",snackMsg:{message:""},busy:0,showCherry:!0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_BROADCAST":return Object.assign({},e,{broadcast:a.broadcast});case"SET_SNACK_MSG":return Object.assign({},e,{snackMsg:a.snackMsg});case"SET_BUSY":return Object.assign({},e,{busy:e.busy+(a.isBusy?1:-1)});case"SET_SHOW_CHERRY":return Object.assign({},e,{showCherry:a.showCherry});default:return e}},Be=t(15),Le=t.n(Be),Ge="https://api.mikan.mom",Pe=Ge+"/user",Me=Ge+"/manga";var qe=t(438),Ue=t.n(qe),Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{privilege:0,logging:!0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FILL_USER":return{uid:a.uid,nickname:a.nickname,avatar:a.avatar,privilege:a.privilege,number_of_notifications:a.number_of_notifications,goo_timestamp:a.goo_timestamp};case"CLEAN_USER":return{privilege:0};case"SET_LOGGING":return Object.assign({},e,{logging:a.logging});case"SET_NOTIFICATIONS":return Object.assign({},e,{number_of_notifications:e.number_of_notifications+a.number});case"SET_GOO":return Object.assign({},e,{goo_timestamp:a.goo_timestamp});default:return e}};function He(){return function(){var e=Object(y.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a($e(!0)),a(Qe(!0)),e.next=4,Le.a.get(Ge+"/profile",{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){a(Object.assign({type:"FILL_USER"},e)),Le.a.get(Ge+"/refresh_token",{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){window.localStorage.setItem("access_token",e.access_token)}))})).catch((function(e){console.log("\u672a\u767b\u5f55")})).finally((function(){a(Qe(!1)),a($e(!1))}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}function Ye(){return{Authorization:"Bearer "+window.localStorage.getItem("access_token")}}function $e(e){return function(a){a({type:"SET_LOGGING",logging:e})}}function Je(){var e=new Date;return function(a){a(Object.assign({type:"SET_GOO"},{goo_timestamp:(Date.now()-6e4*e.getTimezoneOffset())/1e3}))}}function Ke(){return function(e){"1"===window.localStorage.getItem("noCherry")&&e(Ze(!1)),Le.a.get(Ge+"/env",{params:{key:"broadcast"},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(a){e(ea(a.result))})).catch((function(a){try{console.log(a.response.data.detail),e(Xe(a.response.data.detail,"error"))}catch(t){e(Xe("\u65e0\u6cd5\u62c9\u53d6\u7ad9\u70b9\uff0c\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return e(Qe(!1))}))}}function Xe(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(n){return n(Object.assign({type:"SET_SNACK_MSG"},{snackMsg:{message:e,variant:a,dismissable:t}}))}}function Qe(e){return function(a){a(Object.assign({type:"SET_BUSY"},{isBusy:e}))}}function Ze(e){return window.localStorage.setItem("noCherry",e?"0":"1"),function(a){return a(Object.assign({type:"SET_SHOW_CHERRY"},{showCherry:e}))}}function ea(e){return function(a){return a(Object.assign({type:"SET_BROADCAST"},{broadcast:e}))}}function aa(e){"string"===typeof e&&(document.title=""!==e?e+"-\u6c49\u5316\u5de5\u623f\u4e5d\u4e5d\u7ec4":"\u6c49\u5316\u5de5\u623f\u4e5d\u4e5d\u7ec4")}function ta(e){if("number"!==typeof e)return"";var a=new Date;return e+=60*a.getTimezoneOffset(),(a=new Date(1e3*e)).getFullYear()+"\u5e74"+(a.getMonth()+1)+"\u6708"+a.getDate()+"\u65e5"}function na(e){if("number"!==typeof e)return"";var a=new Date;return e+=60*a.getTimezoneOffset(),(a=new Date(1e3*e)).getFullYear()+"\u5e74"+(a.getMonth()+1)+"\u6708"+a.getDate()+"\u65e5 "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}var ra=Object(k.a)((function(e){var a;return{menuButton:(a={},Object(j.a)(a,e.breakpoints.up("md"),{display:"none"}),Object(j.a)(a,"padding",0),a),appBar:{zIndex:e.zIndex.drawer+1},popover:{pointerEvents:"none"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function la(e){var a=e.sidebarToggle,t=ra(),n=Object(X.c)(),l=Object(X.d)((function(e){return e.user.privilege})),c=Object(X.d)((function(e){return e.site.busy})),i=Object(X.d)((function(e){return e.user.logging})),o=Object(X.d)((function(e){return e.user.number_of_notifications})),u=Object(X.d)((function(e){return e.user.nickname})),s=Object(X.d)((function(e){return e.user.avatar})),m=Object(X.d)((function(e){return e.user.goo_timestamp})),d=r.a.useState(null),f=Object(O.a)(d,2),p=f[0],E=f[1],b=r.a.useState(""),h=Object(O.a)(b,2),v=h[0],y=h[1],j=function(e,a){y(a),E(e.currentTarget)},w=function(){E(null)},k=Boolean(p);return r.a.createElement(re.a,{position:"fixed",className:t.appBar},r.a.createElement(ee.a,null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(B.a,{display:"flex",justifyContent:"space-between",alignItems:"center"},r.a.createElement(B.a,null,r.a.createElement(ae.a,{onClick:a,className:t.menuButton},r.a.createElement(ne.a,null))),r.a.createElement(B.a,null,l>0&&r.a.createElement(ae.a,{onMouseEnter:function(e){return j(e,"\u5495~")},onMouseLeave:w,"aria-label":"goo",onClick:function(){n(Xe(function(e){if("number"!==typeof e)return"";var a=new Date;return e+=60*a.getTimezoneOffset(),a=new Date(1e3*e),function(e){var a=(e=(e-e%1e3)/1e3)%60,t=(e=(e-a)/60)%60,n=(e=(e-t)/60)%24,r=(e-n)/24;return(0!==r?r+"\u5929":"")+(0!==n||0!==r?("0"+n).slice(-2)+"\u5c0f\u65f6":"")+(0!==t||0!==n||0!==r?("0"+t).slice(-2)+"\u5206\u949f":"")+("0"+a).slice(-2)+"\u79d2"}((new Date).getTime()-a)}(m),"info"))}},r.a.createElement(De.a,{fontSize:"large"})),l>0&&r.a.createElement(ae.a,{onMouseEnter:function(e){return j(e,"\u901a\u77e5")},onMouseLeave:w,"aria-label":"notification",component:g.b,to:"/message"},r.a.createElement(ue.a,{badgeContent:o,overlap:"circle",color:"secondary"},r.a.createElement(oe.a,{fontSize:"large"}))),r.a.createElement(ae.a,{onMouseEnter:function(e){return j(e,u||"\u767b\u5f55")},onMouseLeave:w,"aria-label":"account",component:g.b,to:"/me"},u?r.a.createElement(Fe,{name:u,avatar:s}):r.a.createElement(ce.a,{fontSize:"large"}),i&&r.a.createElement(me.a,{size:24,className:t.buttonProgress})))))),c>0?r.a.createElement(se.a,null):r.a.createElement(r.a.Fragment,null),r.a.createElement(z.a,{className:t.popover,classes:{paper:t.paper},open:k,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:w,disableRestoreFocus:!0},v))}var ca=t(55),ia=Object(k.a)((function(e){return{placeholder:{height:e.spacing(4)}}}));function oa(e){var a=e.ver,t=ia(),l=r.a.useState("0"),c=Object(O.a)(l,2),i=c[0],o=c[1],u=Object(X.c)();return Object(n.useEffect)((function(){u(Qe(!0)),Le.a.get(Ge+"/ver",{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){o(e.version)})).catch((function(e){u(Xe("\u83b7\u53d6\u540e\u53f0\u7248\u672c\u5931\u8d25","error"))})).finally((function(){return u(Qe(!1))}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:t.placeholder}),r.a.createElement(C.a,null),r.a.createElement(ca.a,{variant:"body2",color:"textSecondary",align:"center"},"Mikan v",i,", Mikan-Peel v",a))}var ua=Object(k.a)((function(e){var a;return{root:{display:"flex",alignItems:"stretch"},placeholder:e.mixins.toolbar,content:{flexGrow:1},mainArea:(a={minWidth:600,width:600},Object(j.a)(a,e.breakpoints.up("md"),{width:960}),Object(j.a)(a,e.breakpoints.up("lg"),{width:"calc(1280px - ".concat(80,"px)")}),Object(j.a)(a,e.breakpoints.up("xl"),{width:"calc(1920px - ".concat(80,"px)")}),a)}}));var sa=function(e){var a=ua(),t=Object(X.c)(),n=r.a.useState(!1),l=Object(O.a)(n,2),c=l[0],i=l[1];r.a.useEffect((function(){function e(){return(e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ke()),e.next=3,t(He());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var o=function(){i(!c)};return r.a.createElement("div",{className:a.root},r.a.createElement(w.a,null),r.a.createElement(la,{sidebarToggle:o}),r.a.createElement(Z,{sidebarToggle:o,openStatus:c}),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.placeholder}),e.children,r.a.createElement(oa,{ver:"0.2.1"})))},ma=t(5782),da=t(107),fa=t.n(da),pa=t(218),Ea=t(5753),ga=t(2),ba=t(401),ha=t(5798),va=t(5783),ya=t(5751),Oa=t(5754),ja=t(5752),wa=t(5776),ka=t(169),xa=t(5760),Sa=t(176),Ca=t(471);function Ta(e){var a=e.input,t=e.label,n=e.initVal,l=r.a.useState(!1),c=Object(O.a)(l,2),i=c[0],o=c[1],u=r.a.useState(!1),s=Object(O.a)(u,2),m=s[0],d=s[1],f=r.a.useState([]),p=Object(O.a)(f,2),E=p[0],g=p[1],b=Object(X.c)();return r.a.useEffect((function(){i&&!m&&0===E.length&&(d(!0),Le.a.get(Pe,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){"object"===typeof e.users&&g(e.users)})).catch((function(e){b(Xe("\u62c9\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","error"))})).finally((function(){return d(!1)})))}),[i]),r.a.createElement(xa.a,Object.assign({open:i,onOpen:function(){return o(!0)},onClose:function(){return o(!1)},loading:m,loadingText:"\u52a0\u8f7d\u4e2d...",noOptionsText:"\u6ca1\u6709\u8fd9\u4e2a\u4eba",options:E},e,{onChange:function(e,t){return a.onChange(t?t.uid:null)},getOptionLabel:function(e){return e.uid},defaultValue:n,renderOption:function(e){return e.nickname+"@"+e.uid},getOptionSelected:function(e,a){return e.uid===a.uid},filterOptions:function(e,a){var t=a.inputValue;return Object(Ca.a)(e,t,{keys:["nickname","uid"]})},renderInput:function(e){return r.a.createElement(Sa.a,Object.assign({required:!0},e,{label:t,InputProps:Object(ka.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,m?r.a.createElement(me.a,{size:20}):null,e.InputProps.endAdornment)})}))}}))}var _a=t(23),Na=t(24);function za(e){var a=e.input,t=e.initVal;return r.a.useEffect((function(){var e=document.createElement("script");e.src="https://imgchr.com/sdk/pup.js",e.setAttribute("data-url","https://imgchr.com/upload"),e.setAttribute("data-auto-insert","direct-links"),e.setAttribute("data-mode","manual"),e.async=!0,document.head.appendChild(e)}),[]),r.a.createElement(B.a,{display:"flex",alignItems:"flex-end"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(Sa.a,{margin:"dense",id:"cover",name:"cover",label:"\u5c01\u9762URL",type:"string",fullWidth:!0,defaultValue:t,onChange:function(e){return a.onChange(e.target.value)}})),r.a.createElement(B.a,null,r.a.createElement(N.a,{"data-chevereto-pup-trigger":!0,"data-target":"#cover",ariant:"contained",color:"secondary",component:"span"},"\u56fe\u5e8a\u4e0a\u4f20")))}function Ia(){var e=r.a.useState(!1),a=Object(O.a)(e,2),t=a[0],n=a[1],l=Object(X.c)(),c=function(){n(!1)};return r.a.createElement("div",null,r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(){n(!0)}},"\u521b\u5efa\u6f2b\u753b"),r.a.createElement(ya.a,{open:t,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(_a.b,{onSubmit:function(e){e.cover=document.getElementById("cover").value,e.cherry=!0===e.cherry,e.ps="",console.log(e),Le.a.put(Me,e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),l(Xe(e.response.data.detail,"error"))}catch(a){l(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u521b\u5efa\u6f2b\u753b"),r.a.createElement(ja.a,null,r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u6f2b\u753b\u540d\u79f0",type:"string",fullWidth:!0,required:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u6f2b\u753bID",type:"string",fullWidth:!0,required:!0,helperText:"\u6f2b\u753bID\u4f1a\u51fa\u73b0\u5728URL\u4e0a\uff0c\u4e0d\u53ef\u91cd\u540d\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u6c49\u5b57\u3002\u5efa\u8bae\uff1a\u7f57\u9a6c\u5b57/\u82f1\u6587\u7b80\u5199\u3002"}),r.a.createElement(Na.a,{name:"cherry",data:{label:"\u590f\u871c\u6a31\u6843",value:"cherry"}}),r.a.createElement(_a.a,{component:Ta,name:"producer",label:"\u5236\u4f5c\u4eba",id:"producer"}),r.a.createElement(_a.a,{component:za,name:"cover"})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:c,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u521b\u5efa")))}})))}var Aa=t(5781),Ra=t(5777),Fa=t(5778),Da=t(5780),Wa=t(5779),Ba=t(283),La=t.n(Ba),Ga=t(427);function Pa(e){switch(e){case"red":return pe.a[500];case"pink":return ge.a[300];case"purple":return he.a[500];case"indigo":return ye.a[900];case"blue":return je.a[500];case"cyan":return ke.a[500];case"teal":return Se.a[500];case"lime":return Te.a[600];case"orange":return m.a[500];case"brown":return Ne.a[500];case"grey":return Ie.a[500];default:return Ie.a[200]}}function Ma(e){switch(e){case"red":case"pink":case"purple":case"indigo":case"blue":return"white";case"cyan":return"black";case"teal":return"white";case"lime":case"orange":return"black";case"brown":return"white";case"grey":default:return"black"}}function qa(e){var a=e.tag,t=e.mid,n=e.cid,l=e.tid,c=e.deletable,i=Object(X.c)();return r.a.createElement(Ga.a,Object.assign({style:{backgroundColor:Pa(a.color),color:Ma(a.color)},label:a.name,onDelete:"true"===c?function(){var e=2;"string"!==typeof l&&(e=1),"string"!==typeof n&&(e=0),Le.a.post("https://api.mikan.mom/tag_delete",{name:a.name,color:a.color,mid:t,cid:e>0?n:"",tid:e>1?l:"",level:e},{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),i(Xe(e.response.data.detail,"error"))}catch(a){i(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))}:null},e))}var Ua=Object(k.a)((function(e){var a;return{root:(a={maxWidth:175},Object(j.a)(a,e.breakpoints.up("md"),{maxWidth:275}),Object(j.a)(a,"position","relative"),Object(j.a)(a,"margin",e.spacing(2)),a),labels:{position:"absolute",right:e.spacing(0),top:e.spacing(0)},label:{marginTop:e.spacing(.5),marginRight:e.spacing(.5)},content:{width:"100%",position:"absolute",bottom:0,backgroundColor:"black",opacity:.8},details:{opacity:1,color:"white"}}}));function Va(e){var a=Ua(),t=e.manga,l=Object(n.useState)(La.a),c=Object(O.a)(l,2),i=c[0],o=c[1];return r.a.useEffect((function(){var e=new Image;e.src=t.cover,e.onload=function(){o(t.cover)}}),[]),r.a.createElement(Ra.a,{className:a.root,component:g.b,to:"/manga/"+t.id},r.a.createElement(Fa.a,null,r.a.createElement(Wa.a,{component:"img",image:i,title:t.name}),r.a.createElement(B.a,{display:"flex",flexDirection:"row-reverse",flexWrap:"wrap",className:a.labels},"object"===typeof t.tags&&t.tags.map((function(e,t){return r.a.createElement(qa,{className:a.label,tag:e,size:"small",key:t})}))),r.a.createElement(Da.a,{className:a.content},r.a.createElement("div",{className:a.details},r.a.createElement(ca.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name||r.a.createElement(me.a,null))))))}function Ha(e){var a=e.showFinished,t=Object(n.useState)([]),l=Object(O.a)(t,2),c=l[0],i=l[1],o=Object(X.d)((function(e){return e.site.showCherry})),u=Object(X.c)();return r.a.useEffect((function(){u(Qe(!0)),Le.a.get(Me,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){"object"===typeof e.mangas&&i(e.mangas)})).catch((function(e){u(Xe("\u83b7\u53d6\u6f2b\u753b\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return u(Qe(!1))}))}),[]),r.a.createElement(Aa.a,{container:!0,spacing:1},c.map((function(e){if((!e.cherry||o)&&(0===e.status||a))return r.a.createElement(Aa.a,{item:!0,xs:6,sm:3,md:3,lg:2,key:e.id},r.a.createElement(Va,{manga:e}))})))}var Ya=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},cardsArea:{margin:e.spacing(5)},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function $a(e){var a=Ya(),t=Object(X.d)((function(e){return e.user.privilege})),l=r.a.useState(!1),c=Object(O.a)(l,2),i=c[0],o=c[1],u=r.a.useState(!1),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(X.d)((function(e){return e.site.showCherry})),p=Object(X.d)((function(e){return e.site.broadcast})),E=Object(X.c)();Object(n.useEffect)((function(){return aa("")}),[]);return r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",className:a.titleArea},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h5"},"\u6c49\u5316\u5de5\u623f"),r.a.createElement(ca.a,{variant:"h2"},"\u4e5d\u4e5d\u7ec4")),r.a.createElement(B.a,{alignSelf:"flex-end"},r.a.createElement(ae.a,{className:Object(ga.default)(a.expand,Object(j.a)({},a.expandOpen,i)),onClick:function(){o(!i)},"aria-expanded":i,"aria-label":"\u66f4\u591a\u9009\u9879"},r.a.createElement(fa.a,null)))),r.a.createElement(ba.a,{className:a.filterArea,in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(B.a,{flexGrow:1}),r.a.createElement(B.a,{display:"flex",justifyContent:"flex-end"},t>=2&&r.a.createElement(Ia,null),r.a.createElement(pa.a,{checked:f,onChange:function(e){E(Ze(e.target.checked))},value:f,size:"small",control:r.a.createElement(Ea.a,{color:"primary"}),label:"\u663e\u793a\u590f\u871c\u6a31\u6843\u7684\u4f5c\u54c1",labelPlacement:"start"}),r.a.createElement(pa.a,{checked:m,onChange:function(e){d(e.target.checked)},value:f,size:"small",control:r.a.createElement(Ea.a,{color:"primary"}),label:"\u663e\u793a\u4e0d\u518d\u66f4\u65b0\u7684\u4f5c\u54c1",labelPlacement:"start"}))),""!==p&&r.a.createElement(ha.a,{variant:"outlined",severity:"info"},r.a.createElement(va.a,null,"\u516c\u544a"),p),r.a.createElement(Ha,{showFinished:m}))}var Ja=t(470),Ka=t(108),Xa=t.n(Ka),Qa=t(449),Za=t.n(Qa),et=t(450),at=t.n(et),tt=t(353),nt=t.n(tt),rt=t(451),lt=t.n(rt),ct=t(354),it=t.n(ct),ot=t(291),ut=t.n(ot),st=t(452),mt=t.n(st),dt=t(453),ft=t.n(dt),pt=t(454),Et=t.n(pt),gt=t(455),bt=t.n(gt),ht=t(456),vt=t.n(ht),yt=t(457),Ot=t.n(yt),jt=t(458),wt=t.n(jt),kt=t(459),xt=t.n(kt),St=t(460),Ct=t.n(St),Tt={Add:Object(n.forwardRef)((function(e,a){return r.a.createElement(Za.a,Object.assign({},e,{ref:a}))})),Check:Object(n.forwardRef)((function(e,a){return r.a.createElement(at.a,Object.assign({},e,{ref:a}))})),Clear:Object(n.forwardRef)((function(e,a){return r.a.createElement(nt.a,Object.assign({},e,{ref:a}))})),Delete:Object(n.forwardRef)((function(e,a){return r.a.createElement(lt.a,Object.assign({},e,{ref:a}))})),DetailPanel:Object(n.forwardRef)((function(e,a){return r.a.createElement(it.a,Object.assign({},e,{ref:a}))})),Edit:Object(n.forwardRef)((function(e,a){return r.a.createElement(ut.a,Object.assign({},e,{ref:a}))})),Export:Object(n.forwardRef)((function(e,a){return r.a.createElement(mt.a,Object.assign({},e,{ref:a}))})),Filter:Object(n.forwardRef)((function(e,a){return r.a.createElement(ft.a,Object.assign({},e,{ref:a}))})),FirstPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(Et.a,Object.assign({},e,{ref:a}))})),LastPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(bt.a,Object.assign({},e,{ref:a}))})),NextPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(it.a,Object.assign({},e,{ref:a}))})),PreviousPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(vt.a,Object.assign({},e,{ref:a}))})),ResetSearch:Object(n.forwardRef)((function(e,a){return r.a.createElement(nt.a,Object.assign({},e,{ref:a}))})),Search:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ot.a,Object.assign({},e,{ref:a}))})),SortArrow:Object(n.forwardRef)((function(e,a){return r.a.createElement(wt.a,Object.assign({},e,{ref:a}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,a){return r.a.createElement(xt.a,Object.assign({},e,{ref:a}))})),ViewColumn:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ct.a,Object.assign({},e,{ref:a}))}))},_t=Object(k.a)((function(e){return{smallBadge:{minWidth:"14px",width:"14px",height:"14px",fontSize:"10px",padding:"0",borderRadius:"50%"},lightBlueBadge:{backgroundColor:"lightBlue"},lightYellowBadge:{backgroundColor:"#FFFF00"},lightRedBadge:{backgroundColor:"#FF5252"}}})),Nt=function(e,a,t){return e.filter((function(e){return e.mname===a&&String(e.type)===t&&e.wait_status%4>0})).length},zt=function(e,a,t){var n=e.filter((function(e){return e.mname===a&&String(e.type)===t&&e.wait_status%4>0})).map((function(e){return e.wait_status%4}));return n.length>0?Math.max.apply(Math,Object(Ja.a)(n)):0};function It(e){var a=_t(),t=Object(b.g)(),n=e.tasks,l=function(e){switch(e){case 1:return"".concat(a.smallBadge," ").concat(a.lightBlueBadge);case 2:return"".concat(a.smallBadge," ").concat(a.lightYellowBadge);case 3:return"".concat(a.smallBadge," ").concat(a.lightRedBadge);default:return a.smallBadge}};return r.a.createElement(Xa.a,{icons:Tt,columns:[{title:"\u6f2b\u753b",field:"mname",defaultGroupOrder:1,render:function(e){var a=e.split("-"),t=Object(O.a)(a,2),c=t[0],i=t[1];return r.a.createElement(ue.a,{badgeContent:Nt(n,e,i),anchorOrigin:{vertical:"top",horizontal:"right"},overlap:"rectangle",classes:{badge:l(zt(n,e,i))}},r.a.createElement("span",{style:{paddingRight:"10px"}},c))}},{title:"\u7ae0\u8282",field:"cname"},{title:"\u4efb\u52a1",field:"name"},{title:"\u7c7b\u578b",field:"type",lookup:{0:"\u5176\u4ed6",1:"\u56fe\u6e90",2:"\u7ffb\u8bd1",3:"\u6821\u5bf9",4:"\u5d4c\u5b57",5:"\u5ba1\u6838",6:"\u53d1\u5e03"},defaultGroupOrder:0},{title:"\u6807\u7b7e",field:"tags",grouping:!1,render:function(e){return r.a.createElement(r.a.Fragment,null,e.tags.map((function(e,a){return r.a.createElement(qa,{tag:e,size:"small",key:a})})))},sorting:!1},{title:"\u4e0a\u4e00\u6b21\u6d3b\u8dc3",field:"last_update",render:function(e){return na(e.last_update)},grouping:!1}],options:{pageSize:20,grouping:!0,rowStyle:function(e){return{backgroundColor:{0:"transparent",1:"lightBlue",2:"#FFFF00",3:"#FF5252"}[e.wait_status%4]||"transparent"}}},data:n,components:{Toolbar:function(e){return r.a.createElement(r.a.Fragment,null)}},onRowClick:function(e,a,n){t.push("/manga/"+a.mid+"/"+a.cid+"/"+a.id)},localization:{grouping:{placeholder:"\u62d6\u62fd\u8868\u5934\u81f3\u6b64\u4ee5\u805a\u5408\u663e\u793a...",groupedBy:"\u805a\u5408:"},pagination:{labelDisplayedRows:"\u7b2c{from}\u5230{to}\u884c \u5171 {count}\u884c",labelRowsSelect:"\u884c",labelRowsPerPage:"\u6bcf\u9875\u884c\u6570:",firstAriaLabel:"\u9996\u9875",firstTooltip:"\u9996\u9875",previousAriaLabel:"\u4e0a\u4e00\u9875",previousTooltip:"\u4e0a\u4e00\u9875",nextAriaLabel:"\u4e0b\u4e00\u9875",nextTooltip:"\u4e0b\u4e00\u9875",lastAriaLabel:"\u672b\u9875",lastTooltip:"\u672b\u9875"}}})}var At=Object(k.a)((function(e){return{title:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},taskListItem:{marginTop:e.spacing(1)}}}));function Rt(){var e=At(),a=Object(n.useState)([]),t=Object(O.a)(a,2),l=t[0],c=t[1],i=Object(X.c)();return Object(n.useEffect)((function(){aa("\u4efb\u52a1\u5e7f\u573a"),i(Qe(!0)),Le.a.get("https://api.mikan.mom/task",{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){var a=e.tasks.map((function(e){return Object(ka.a)({},e,{mname:"".concat(e.mname,"-").concat(e.type)})}));c(a)})).catch((function(e){i(Xe("\u62c9\u53d6\u4efb\u52a1\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return i(Qe(!1))}))}),[]),r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",style:{width:"100%"},flexDirection:"column"},r.a.createElement("div",{className:e.title},r.a.createElement(ca.a,{variant:"h2"},"\u4efb\u52a1\u5e7f\u573a")),r.a.createElement(It,{tasks:l})))}var Ft=t(158),Dt=t.n(Ft),Wt=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Bt(){var e=Wt(),a=Object(X.c)(),t=Object(b.g)(),l=(Object(b.h)().state||{from:{pathname:"/"}}).from;Object(n.useEffect)((function(){return aa("\u767b\u5f55")}),[]);return r.a.createElement(ma.a,{component:"main",maxWidth:"xs"},r.a.createElement(w.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(de.a,{className:e.avatar},r.a.createElement(Dt.a,null)),r.a.createElement(ca.a,{component:"h1",variant:"h5"},"\u767b\u5f55"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),a(function(e,a,t,n){return function(r){r(Qe(!0)),Le.a.post(Ge+"/token",Ue.a.stringify({username:e,password:a}),{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){window.localStorage.setItem("access_token",e.access_token),r(He()),t.replace(n)})).catch((function(e){try{console.log(e.response.data.detail),r(Xe(e.response.data.detail,"error"))}catch(a){r(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return r(Qe(!1))}))}}(document.getElementById("uid").value,document.getElementById("pass").value,t,l))}},r.a.createElement(Sa.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"uid",label:"\u7528\u6237ID",name:"uid",autoComplete:"uid",autoFocus:!0}),r.a.createElement(Sa.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"pass",label:"\u5bc6\u7801",type:"password",id:"pass",autoComplete:"current-password"}),r.a.createElement(N.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,type:"submit"},"\u767b\u5f55"))))}var Lt=t(5797),Gt=t(146),Pt=t(299),Mt=t(358),qt=t(348);function Ut(e){var a=e.mid,t=r.a.useState(!1),n=Object(O.a)(t,2),l=n[0],c=n[1],i=r.a.useState({no1:!1,no2:!1,no4:!1,empty:!1}),o=Object(O.a)(i,2),u=o[0],s=o[1],m=Object(X.c)(),d=function(){c(!1)},f=function(e){s(Object(ka.a)({},u,Object(j.a)({},e.target.name,e.target.checked)))};return r.a.createElement("div",null,r.a.createElement(N.a,{color:"primary",onClick:function(){c(!0)},variant:"outlined"},"\u65b0\u5efa\u7ae0\u8282"),r.a.createElement(ya.a,{open:l,onClose:d,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u65b0\u5efa\u7ae0\u8282"),r.a.createElement(_a.b,{onSubmit:function(e){var t=u.no1?1:0;t+=u.no2?2:0,t+=u.no4?4:0,t+=u.no8?8:0,t+=u.empty?16:0,e.ps="",console.log(t),console.log(e),Le.a.put(Me+"/"+a+"/chapter",e,{params:{type:t},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),m(Xe(e.response.data.detail,"error"))}catch(a){m(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(ja.a,null,r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u7ae0\u8282\u6807\u9898",type:"string",fullWidth:!0,required:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u7ae0\u8282ID",type:"string",fullWidth:!0,required:!0,helperText:"\u7ae0\u8282ID\u4f1a\u51fa\u73b0\u5728URL\u4e0a\uff0c\u540c\u4e00\u6f2b\u753b\u5185\u4e0d\u53ef\u91cd\u540d\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u6c49\u5b57\u3002"}),r.a.createElement(Gt.a,{component:"fieldset"},r.a.createElement(Pt.a,{component:"legend"},"\u81ea\u5b9a\u4e49\u4efb\u52a1\u6d41\u7a0b"),r.a.createElement(Mt.a,{row:!0},r.a.createElement(pa.a,{control:r.a.createElement(qt.a,{checked:u.no1,onChange:f,name:"no1"}),label:"\u65e0\u56fe\u6e90",disabled:u.empty}),r.a.createElement(pa.a,{control:r.a.createElement(qt.a,{checked:u.no2,onChange:f,name:"no2"}),label:"\u65e0\u6821\u5bf9",disabled:u.empty}),r.a.createElement(pa.a,{control:r.a.createElement(qt.a,{checked:u.no4,onChange:f,name:"no4"}),label:"\u65e0\u5ba1\u6838",disabled:u.empty}),r.a.createElement(pa.a,{control:r.a.createElement(qt.a,{checked:u.no8,onChange:f,name:"no8"}),label:"\u65e0\u53d1\u5e03",disabled:u.empty}),r.a.createElement(pa.a,{control:r.a.createElement(qt.a,{checked:u.empty,onChange:f,name:"empty"}),label:"\u7a7a\u9879\u76ee"})))),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:d,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}var Vt=t(5796),Ht=t(5795),Yt=t(5757),$t=t(5794),Jt=t(256),Kt=t.n(Jt),Xt=t(257),Qt=t.n(Xt),Zt=t(461),en=t.n(Zt),an=t(258),tn=t.n(an),nn=t(259),rn=t.n(nn),ln=t(260),cn=t.n(ln),on=t(261),un=t.n(on);function sn(e){return{0:r.a.createElement(Kt.a,null),1:r.a.createElement(Qt.a,null),2:r.a.createElement(en.a,null),3:r.a.createElement(tn.a,null),4:r.a.createElement(rn.a,null),5:r.a.createElement(cn.a,null),6:r.a.createElement(un.a,null)}[e]}function mn(e){var a=e.label;return r.a.createElement("div",null,r.a.createElement(Ga.a,Object.assign({},e,{variant:""===a.accept_by.uid?"outlined":"default",icon:sn(a.type),color:0===a.status||1===a.status?"primary":2===a.status?"secondary":"",size:"small",label:a.name,clickable:!0,"aria-label":"Task Chip",to:"/manga/"+a.mid+"/"+a.cid+"/"+a.id})))}function dn(e){var a=e.user,t=Object(b.g)();if(void 0===a)return r.a.createElement(r.a.Fragment,null);return r.a.createElement(Ga.a,Object.assign({variant:"outlined","aria-label":"User Chip",onClick:function(){t.push("/user/"+a.uid)},clickable:!0,avatar:r.a.createElement(Fe,{avatar:a.avatar,name:a.nickname}),label:a.nickname},e))}var fn=Object(k.a)((function(e){return{root:{width:"100%"},nominee:{marginBottom:10},completed:{color:e.palette.primary}}}));function pn(e){var a=fn(),t=e.vertical,n=e.chapter,l=e.mid,c=n.tasks,i=n.id;return r.a.createElement("div",{className:a.root},r.a.createElement(Vt.a,{alternativeLabel:!t,nonLinear:!0,activeStep:-1,orientation:t?"vertical":"horizontal"},c.map((function(e,a){return r.a.createElement($t.a,{key:e.name},r.a.createElement(Ht.a,{component:g.b,to:"/manga/"+l+"/"+i+"/"+e.id,completed:1===e.status},r.a.createElement(Yt.a,null,r.a.createElement(mn,{label:e}))),0!==e.accept_on&&(t?r.a.createElement(Yt.a,{icon:r.a.createElement("span",{style:{display:"inline-block",width:"24px",height:"24px"}})},r.a.createElement(dn,{user:e.accept_by,size:"small",style:{marginTop:"5px"}})):r.a.createElement(Yt.a,{icon:null},r.a.createElement(dn,{user:e.accept_by,size:"small"}))))}))))}var En=t(5801),gn=t(5790),bn=t(5791),hn=t(5789),vn=t(5788),yn=t(472),On=t(343);function jn(e){var a=e.chapter,t=e.order,n=Object(X.c)(),l=r.a.useState(!1),c=Object(O.a)(l,2),i=c[0],o=c[1],u=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(N.a,{size:"small",color:"primary",onClick:function(){o(!0)}},"\u65b0\u5efa\u4efb\u52a1"),r.a.createElement(ya.a,{open:i,onClose:u,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u65b0\u5efa\u4efb\u52a1"),r.a.createElement(_a.b,{onSubmit:function(e){console.log(e),Le.a.put(Me+"/"+a.mid+"/chapter/"+a.id+"/task",e,{params:{order:t},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),n(Xe(e.response.data.detail,"error"))}catch(a){n(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},initialValues:{type:0},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(ja.a,null,r.a.createElement(Na.b,{name:"type",label:"\u7c7b\u578b",required:!0},r.a.createElement(On.a,{value:0},sn(0),"\u5176\u4ed6"),r.a.createElement(On.a,{value:1},sn(1),"\u56fe\u6e90"),r.a.createElement(On.a,{value:2},sn(2),"\u7ffb\u8bd1"),r.a.createElement(On.a,{value:3},sn(3),"\u6821\u5bf9"),r.a.createElement(On.a,{value:4},sn(4),"\u5d4c\u5b57"),r.a.createElement(On.a,{value:5},sn(5),"\u5ba1\u6838"),r.a.createElement(On.a,{value:6},sn(6),"\u53d1\u5e03")),r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u4efb\u52a1\u6807\u9898",type:"string",required:!0,fullWidth:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u4efb\u52a1ID",type:"string",required:!0,fullWidth:!0})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:u,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}var wn=t(5775),kn=t(462),xn=t.n(kn);function Sn(e){var a=e.chapter,t=r.a.useState(!1),n=Object(O.a)(t,2),l=n[0],c=n[1],i=Object(X.c)(),o=Object(b.g)(),u=function(){c(!1)},s=r.a.useState([]),m=Object(O.a)(s,2),d=m[0],f=m[1];r.a.useEffect((function(){for(var e=a.tasks.slice(),t=0;t<e.length;t++)e[t].order=t;f(e)}),[]);return r.a.createElement("div",null,r.a.createElement(N.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){c(!0)}},"\u7f16\u8f91\u7ae0\u8282"),r.a.createElement(ya.a,{open:l,onClose:u,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u7f16\u8f91\u7ae0\u8282"),r.a.createElement(_a.b,{onSubmit:function(e){e.tasks=d.map((function(e){return e.order})),e.ps=e.ps?e.ps:"",console.log(e),Le.a.post(Me+"/"+a.mid+"/chapter/"+a.id,e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){e.id!==a.id&&o.replace("/manga/"+e.mid),window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),i(Xe(e.response.data.detail,"error"))}catch(a){i(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},initialValues:{name:a.name,id:a.id,ps:a.ps},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(ja.a,null,r.a.createElement(Na.c,{margin:"dense",name:"name",label:"\u7ae0\u8282\u6807\u9898",type:"string",fullWidth:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u7ae0\u8282ID",type:"string",fullWidth:!0,helperText:"\u7ae0\u8282ID\u4f1a\u51fa\u73b0\u5728URL\u4e0a\uff0c\u540c\u4e00\u6f2b\u753b\u5185\u4e0d\u53ef\u91cd\u540d\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u6c49\u5b57\u3002\u5efa\u8bae\uff1a\u7ae0\u8282\u6570\u5b57\u3002"}),r.a.createElement(Na.c,{name:"ps",label:"\u5099\u8003",multiline:!0,rowsMax:5}),r.a.createElement(T.a,{subheader:r.a.createElement(wn.a,{component:"div"},r.a.createElement(B.a,{display:"flex",flexDirection:"row",alignItems:"flex-end"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(vn.a,null,"\u4efb\u52a1")),r.a.createElement(B.a,null,r.a.createElement(jn,{chapter:a,order:a.tasks.length}))))},r.a.createElement(yn.a,{list:d,setList:f,animation:150},d.map((function(e,a){return r.a.createElement(_.a,{key:a},r.a.createElement(I.a,null,sn(e.type)),r.a.createElement(A.a,{primary:e.name}),r.a.createElement(xn.a,null))}))))),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:u,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}var Cn=t(129);function Tn(e){var a=e.id,t=e.name,n=e.api,l=e.callback,c=e.reload,i=Object(Cn.a)(e,["id","name","api","callback","reload"]),o=r.a.useState(!1),u=Object(O.a)(o,2),s=u[0],m=u[1],d=r.a.useState(),f=Object(O.a)(d,2),p=f[0],E=f[1],g=Object(X.c)(),h=Object(b.g)(),v=function(){m(!1)};return r.a.createElement("div",null,r.a.createElement(N.a,Object.assign({variant:"contained",color:"secondary",onClick:function(){m(!0)}},i),"\u5220\u9664",t),r.a.createElement(ya.a,{open:s,onClose:v,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u786e\u8ba4\u5220\u9664"),r.a.createElement(ja.a,null,r.a.createElement(vn.a,null,"\u5220\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d"),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(vn.a,null,"\u8bf7\u5728\u4e0b\u65b9\u91cd\u590d\u8f93\u5165ID\u4ee5\u786e\u8ba4"),r.a.createElement(Sa.a,{autoFocus:!0,margin:"dense",name:"name",label:a,type:"string",onChange:function(e){E(e.target.value)},fullWidth:!0,required:!0}))),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:v,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{onClick:function(){Le.a.delete(n,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){c&&window.location.reload(),h.replace(l)})).catch((function(e){try{console.log(e.response.data.detail),g(Xe(e.response.data.detail,"error"))}catch(a){g(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},variant:"contained",color:"secondary",disabled:p!==a},"\u5220\u9664"))))}var _n=Object(k.a)((function(e){return{root:{width:"100%"},rootExpanded:{width:"100%",marginTop:e.spacing(1),marginBottom:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},details:{alignItems:"center"},taskChip:{marginRight:e.spacing(1)},summary:{width:"100%"}}}));function Nn(e){var a=_n(),t=Object(F.a)(),n=Object(R.a)(t.breakpoints.up("md")),l=e.chapter,c=e.adminAuth,i=e.mid,o=e.expanded,u=e.setExpanded;return r.a.createElement("div",{className:o===l.id?a.rootExpanded:a.root},r.a.createElement(En.a,{TransitionProps:{unmountOnExit:!0},expanded:o===l.id,onChange:function(){o===l.id?u(""):u(l.id)}},r.a.createElement(bn.a,{expandIcon:r.a.createElement(fa.a,null),"aria-controls":"chapter-summary"},r.a.createElement(B.a,{display:"flex",flexDirection:"row",className:a.summary},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{className:a.heading,noWrap:!0},l.name)),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},l.tasks.map((function(e,t){return 0===e.status&&r.a.createElement(mn,{label:e,key:t,className:a.taskChip,component:g.b})}))))),r.a.createElement(gn.a,{className:a.details},r.a.createElement(B.a,{display:"flex",flexDirection:"column",className:a.summary},r.a.createElement(pn,{vertical:!n,chapter:l,mid:i}),r.a.createElement(ca.a,{className:a.secondaryHeading},l.ps))),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(hn.a,null,r.a.createElement(Tn,{api:Me+"/"+i+"/chapter/"+l.id,callback:"/manga/"+i,className:a.button,size:"small",variant:"outlined",reload:!0}),r.a.createElement(Sn,{chapter:l})))))}var zn=t(5799),In=t(5785),An=Object(k.a)((function(e){return{root:{width:"100%"}}}));function Rn(e){var a=An(),t=e.mid,n=e.adminAuth,l=r.a.useState(0),c=Object(O.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(re.a,{position:"static",color:"transparent"},r.a.createElement(zn.a,{value:i,onChange:function(e,a){o(a)}},r.a.createElement(In.a,{label:"\u672a\u5b8c\u6210"}),r.a.createElement(In.a,{label:"\u5df2\u5b8c\u6210"}))),r.a.createElement(Fn,{mid:t,listName:i,adminAuth:n}))}function Fn(e){var a=e.mid,t=e.listName,l=e.adminAuth,c=Object(n.useState)(!0),i=Object(O.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)([]),m=Object(O.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)(""),E=Object(O.a)(p,2),g=E[0],b=E[1],h=Object(X.c)();return r.a.useEffect((function(){u(!0),f([]),Le.a.get(Me+"/"+a+"/chapter",{params:{query_status:t},withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){"object"===typeof e.chapters&&f(e.chapters)})).catch((function(e){h(Xe("\u62c9\u53d6\u5217\u8868\u5931\u8d25, \u8bf7\u5237\u65b0\u91cd\u8bd5","error"))})).finally((function(){return u(!1)}))}),[t]),r.a.createElement(r.a.Fragment,null,o?r.a.createElement(se.a,null):d.map((function(e){return r.a.createElement(Nn,{chapter:e,adminAuth:l,mid:a,key:e.id,expanded:g,setExpanded:b})})))}function Dn(e){var a=e.manga,t=Object(X.d)((function(e){return e.user.privilege})),n=r.a.useState(!1),l=Object(O.a)(n,2),c=l[0],i=l[1],o=Object(X.c)(),u=Object(b.g)(),s=function(){i(!1)};return r.a.createElement("div",null,r.a.createElement(N.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){i(!0)}},"\u7f16\u8f91\u6f2b\u753b"),r.a.createElement(ya.a,{open:c,onClose:s,"aria-labelledby":"form-dialog-title"},r.a.createElement(_a.b,{initialValues:{name:a.name,id:a.id,cherry:a.cherry,status:1===a.status,ps:a.ps},onSubmit:function(e){e.producer=document.getElementById("producer").value,e.cover=document.getElementById("cover").value,e.cherry=!0===e.cherry,e.status=!0===e.status?1:0,e.ps=e.ps?e.ps:"",console.log(e),Le.a.post(Me+"/"+a.id,e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){e.id!==a.id&&u.replace("/manga/"+e.id),window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),o(Xe(e.response.data.detail,"error"))}catch(a){o(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},render:function(e){var n=e.handleSubmit;return r.a.createElement("form",{onSubmit:n},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u7f16\u8f91\u6f2b\u753b"),r.a.createElement(ja.a,null,r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u6f2b\u753b\u540d\u79f0",type:"string",fullWidth:!0,required:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u6f2b\u753bID",type:"string",fullWidth:!0,required:!0,helperText:"\u6f2b\u753bID\u4f1a\u51fa\u73b0\u5728URL\u4e0a\uff0c\u4e0d\u53ef\u91cd\u540d\uff0c\u6700\u597d\u907f\u514d\u4f7f\u7528\u6c49\u5b57\u3002"}),r.a.createElement(Na.a,{name:"cherry",data:{label:"\u590f\u871c\u6a31\u6843",value:"cherry"}}),r.a.createElement(Na.a,{name:"status",data:{label:"\u4e0d\u518d\u66f4\u65b0",value:"cherry"}}),r.a.createElement(_a.a,{component:Ta,name:"producer",label:"\u5236\u4f5c\u4eba",id:"producer",disabled:t<2,initVal:a.producer}),r.a.createElement(_a.a,{component:za,name:"cover",initVal:a.cover}),r.a.createElement(Na.c,{name:"ps",label:"\u5099\u8003",multiline:!0,rowsMax:5})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:s,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fee\u6539")))}})))}function Wn(e){var a=Object(b.g)(),t=e.auths;return r.a.createElement(Xa.a,{icons:Tt,columns:[{title:"\u7528\u6237",field:"nickname"},{title:"\u5b8c\u6210\u8bdd\u6570",field:"count"},{title:"\u6700\u8fd1\u6d3b\u8dc3",field:"lastComplete",render:function(e){return ta(e.lastComplete)}}],options:{pageSize:7,paging:!1},data:t,components:{Pagination:function(){return null},Toolbar:function(e){return r.a.createElement(r.a.Fragment,null)}},onRowClick:function(e,t,n){a.push("/user/"+t.accept_uid)}})}var Bn=Object(k.a)((function(e){return{root:{width:"100%"},tabsWrap:{"& .MuiTabs-scrollableX":{overflowX:"auto"},"& .MuiTabs-flexContainer":{justifyContent:"space-around",flexWrap:"wrap"},"& .MuiTab-root":{minWidth:"33%",textAlign:"center"}}}}));function Ln(e){var a=Bn(),t=e.mid,n=r.a.useState(0),l=Object(O.a)(n,2),c=l[0],i=l[1],o=r.a.useState(!1),u=Object(O.a)(o,2),s=u[0],m=u[1],d=r.a.useState("\u8fd1\u671f"),f=Object(O.a)(d,2),p=f[0],E=f[1];return r.a.createElement("div",{className:a.root},r.a.createElement(Aa.a,{container:!0,alignItems:"center",spacing:0},r.a.createElement(Aa.a,{item:!0,xs:!0},r.a.createElement(zn.a,{value:c,onChange:function(e,a){i(a)},className:a.tabsWrap},r.a.createElement(In.a,{label:"\u7ffb\u8bd1"}),r.a.createElement(In.a,{label:"\u6821\u5bf9"}),r.a.createElement(In.a,{label:"\u5d4c\u5b57"}))),r.a.createElement(Aa.a,{item:!0},r.a.createElement(N.a,{variant:"outlined",onClick:function(){E(s?"\u8fd1\u671f":"\u6240\u6709"),m(!s)},style:{borderColor:"lightblue",color:"#34ACE8","&:hover":{backgroundColor:"lightblue",borderColor:"lightblue"}}},p))),r.a.createElement(Gn,{mid:t,listNumber:c,isAll:s}))}function Gn(e){var a=e.mid,t=e.listNumber,l=e.isAll,c=Object(n.useState)(!0),i=Object(O.a)(c,2),o=(i[0],i[1]),u=Object(n.useState)([]),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(X.c)();return r.a.useEffect((function(){void 0!==a&&null!==a&&(o(!0),d([]),Le.a.get("".concat(Me,"/").concat(a,"/chapterAuth"),{params:{query_status:t,is_all_flag:l},withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){"object"===typeof e.chapterauth&&d(e.chapterauth)})).catch((function(e){f(Xe("\u62c9\u53d6\u5217\u8868\u5931\u8d25, \u8bf7\u5237\u65b0\u91cd\u8bd5","error"))})).finally((function(){return o(!1)})))}),[a,t,l]),r.a.createElement(B.a,{display:"flex",style:{width:"100%"},flexDirection:"column"},r.a.createElement(Wn,{auths:m}))}var Pn=Object(k.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},details:{alignItems:"center"}}}));function Mn(e){var a=Pn(),t=e.manga,n=e.adminAuth,l=r.a.useState(!0),c=Object(O.a)(l,2),i=c[0],o=c[1];return r.a.createElement(B.a,{display:"flex",flexDirection:"column",className:a.root},r.a.createElement(B.a,{display:"flex"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h5"},"\u8be6\u7ec6\u4fe1\u606f")),r.a.createElement(B.a,{alignSelf:"flex-end"},r.a.createElement(ae.a,{className:Object(ga.default)(a.expand,Object(j.a)({},a.expandOpen,i)),onClick:function(){o(!i)},"aria-expanded":i,"aria-label":"\u8be6\u60c5"},r.a.createElement(fa.a,null)))),r.a.createElement(ba.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(gn.a,{className:a.details},r.a.createElement(B.a,{display:"flex",flexDirection:"column",style:{width:"100%"}},r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u5236\u4f5c\u4eba")),r.a.createElement(B.a,null,r.a.createElement(dn,{user:t.producer,size:"small"}))),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u5f00\u5751\u65f6\u95f4")),r.a.createElement(B.a,null,ta(t.create_on))),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u6700\u540e\u4e00\u6b21\u6d3b\u8dc3")),r.a.createElement(B.a,null,ta(t.last_update))),r.a.createElement(B.a,null,r.a.createElement(ca.a,{paragraph:!0},t.ps)))),r.a.createElement(C.a,null),r.a.createElement(hn.a,null,n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tn,{api:Me+"/"+t.id,size:"small",variant:"outlined",callback:"",className:a.button,id:t.id,name:"\u6f2b\u753b"}),r.a.createElement(Dn,{manga:t})))),r.a.createElement(Ln,{mid:t.id}))}var qn=t(279);function Un(e){var a=r.a.useState(!1),t=Object(O.a)(a,2),n=t[0],l=t[1],c=e.level,i=e.mid,o=e.cid,u=e.tid,s=Object(X.c)(),m=function(){l(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ga.a,Object.assign({label:"+",size:"small",clickable:!0,onClick:function(){l(!0)}},e)),r.a.createElement(ya.a,{open:n,onClose:m,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u6dfb\u52a0\u6807\u7b7e"),r.a.createElement(_a.b,{onSubmit:function(e){e.level=c,e.mid=i,e.cid="string"===typeof o?o:"",e.tid="string"===typeof u?u:"",console.log(e),Le.a.put("https://api.mikan.mom/tag",e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),s(Xe(e.response.data.detail,"error"))}catch(a){s(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(ja.a,null,r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u540d\u79f0",type:"string",fullWidth:!0,required:!0}),r.a.createElement(qn.a,null,"\u989c\u8272"),r.a.createElement(Na.b,{name:"color",required:!0},r.a.createElement(On.a,{value:"red"},r.a.createElement(qa,{tag:{color:"red",name:"\u7ea2\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"pink"},r.a.createElement(qa,{tag:{color:"pink",name:"\u7c89\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"blue"},r.a.createElement(qa,{tag:{color:"blue",name:"\u84dd\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"purple"},r.a.createElement(qa,{tag:{color:"purple",name:"\u7d2b\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"indigo"},r.a.createElement(qa,{tag:{color:"indigo",name:"\u975b\u84dd\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"cyan"},r.a.createElement(qa,{tag:{color:"cyan",name:"\u9752\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"teal"},r.a.createElement(qa,{tag:{color:"teal",name:"\u6c34\u9e2d\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"lime"},r.a.createElement(qa,{tag:{color:"lime",name:"\u7eff\u9ec4\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"orange"},r.a.createElement(qa,{tag:{color:"orange",name:"\u6a58\u9ec4\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"brown"},r.a.createElement(qa,{tag:{color:"brown",name:"\u68d5\u8272"},size:"small",clickable:!0})),r.a.createElement(On.a,{value:"gray"},r.a.createElement(qa,{tag:{color:"gray",name:"\u7070\u8272"},size:"small",clickable:!0})))),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:m,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{onClick:a,color:"primary"},"\u6dfb\u52a0")))}})))}var Vn=t(5792);function Hn(e){var a=e.task,t=Object(X.c)(),n=Object(b.g)(),l=r.a.useState(!1),c=Object(O.a)(l,2),i=c[0],o=c[1],u=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(N.a,Object.assign({variant:"outlined",size:"small",color:"primary",onClick:function(){o(!0)}},e),"\u7f16\u8f91\u4efb\u52a1"),r.a.createElement(ya.a,{open:i,onClose:u,"aria-labelledby":"form-dialog-title"},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u7f16\u8f91\u4efb\u52a1"),r.a.createElement(_a.b,{onSubmit:function(e){console.log(e),Le.a.post(Me+"/"+a.mid+"/chapter/"+a.cid+"/task/"+a.id,e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){e.id!==a.id&&n.replace("/manga/"+e.mid+"/"+e.cid+"/"+e.id),window.location.reload()})).catch((function(e){try{console.log(e.response.data.detail),t(Xe(e.response.data.detail,"error"))}catch(a){t(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))},initialValues:{type:a.type,name:a.name,id:a.id},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(ja.a,null,r.a.createElement(Na.b,{name:"type",label:"\u7c7b\u578b",required:!0},r.a.createElement(On.a,{value:0},sn(0),"\u5176\u4ed6"),r.a.createElement(On.a,{value:1},sn(1),"\u56fe\u6e90"),r.a.createElement(On.a,{value:2},sn(2),"\u7ffb\u8bd1"),r.a.createElement(On.a,{value:3},sn(3),"\u6821\u5bf9"),r.a.createElement(On.a,{value:4},sn(4),"\u5d4c\u5b57"),r.a.createElement(On.a,{value:5},sn(5),"\u5ba1\u6838"),r.a.createElement(On.a,{value:6},sn(6),"\u53d1\u5e03")),r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"name",label:"\u4efb\u52a1\u6807\u9898",type:"string",required:!0,fullWidth:!0}),r.a.createElement(Na.c,{margin:"dense",name:"id",label:"\u4efb\u52a1ID",type:"string",required:!0,fullWidth:!0})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:u,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}function Yn(e){return r.a.createElement(r.a.Fragment,null)}var $n=t(463),Jn=t.n($n),Kn=t(464),Xn=t.n(Kn);function Qn(e){var a=e.status,t=Object(Cn.a)(e,["status"]);return r.a.createElement(r.a.Fragment,null,0===a&&r.a.createElement(ut.a,t),1===a&&r.a.createElement(Jn.a,t),2===a&&r.a.createElement(Xn.a,t))}var Zn=t(342),er=t(5759),ar=Object(k.a)((function(e){return{root:{width:"100%"},listItem:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)},button:{marginLeft:e.spacing(1)}}})),tr=function(e){switch(e%4){case 1:return{color:"lightBlue",label:"\u4e09\u6210\u719f"};case 2:return{color:"#FFFF00",label:"\u4e94\u6210\u719f"};case 3:return{color:"#FF5252",label:"\u4e03\u6210\u719f"};default:return{color:"#2eff3c",label:"\u65b0\u9c9c"}}};function nr(e){var a=ar(),t=e.task,l=e.adminAuth,c=Object(n.useState)(),i=Object(O.a)(c,2),o=i[0],u=i[1],s=Object(X.c)();r.a.useEffect((function(){u(t)}),[t]);return r.a.createElement("div",{className:a.root},r.a.createElement(B.a,{display:"flex",flexDirection:"column"},r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h6"},"\u627f\u63a5\u4eba")),r.a.createElement(B.a,null,o&&""!==o.accept_by.uid&&r.a.createElement(dn,{user:o.accept_by,onDelete:l&&(0===o.status||2===o.status)&&function(){s(Qe(!0)),Le.a.delete(Me+"/"+o.mid+"/chapter/"+o.cid+"/task/"+o.id+"/charge",{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){u(Object.assign({},o,{accept_by:{uid:"",nickname:"",avatar:""}}))})).catch((function(e){try{console.log(e.response.data.detail),s(Xe(e.response.data.detail,"error"))}catch(a){s(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return s(Qe(!1))}))}}),o&&""===o.accept_by.uid&&r.a.createElement(rr,Object.assign({taskState:o,setTaskState:u},e)))),r.a.createElement(C.a,null),r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h6"},"\u72b6\u6001")),r.a.createElement(B.a,null,r.a.createElement(ca.a,{variant:"h6"},o&&0===o.status&&r.a.createElement(Qn,{status:0}),o&&1===o.status&&r.a.createElement(Qn,{status:1}),o&&2===o.status&&r.a.createElement(Qn,{status:2}))),r.a.createElement(B.a,null,o&&r.a.createElement(lr,Object.assign({taskState:o,setTaskState:u},e)))),o&&null!==o.wait_status&&0===o.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h6"},"\u9e3d\u5ea6")),console.log(o),r.a.createElement(cr,Object.assign({taskState:o,setTaskState:u},e)))),o&&""!==o.accept_by.uid&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u627f\u63a5\u65f6\u95f4")),r.a.createElement(B.a,null,na(o.accept_on)))),o&&1===o.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u5b8c\u6210\u65f6\u95f4")),r.a.createElement(B.a,null,na(o.complete_on)))),r.a.createElement(C.a,null),r.a.createElement(B.a,{display:"flex",className:a.listItem},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u521b\u5efa\u65f6\u95f4")),r.a.createElement(B.a,null,o&&na(o.create_on)))),r.a.createElement(Yn,{data:o&&o.data}))}function rr(e){var a=ar(),t=e.taskState,l=e.adminAuth,c=e.setTaskState,i=Object(X.d)((function(e){return e.user.privilege})),o=Object(X.d)((function(e){return e.user.uid})),u=Object(X.c)(),s=Object(n.useState)(!1),m=Object(O.a)(s,2),d=m[0],f=m[1],p=function(){f(!1)},E=function(e){return function(){e===o&&u(Je()),u(Qe(!0)),Le.a.get(Me+"/"+t.mid+"/chapter/"+t.cid+"/task/"+t.id+"/charge",{params:{assign_to:e},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){c(e)})).catch((function(e){try{console.log(e.response.data.detail),u(Xe(e.response.data.detail,"error"))}catch(a){u(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return u(Qe(!1))}))}};return 0===i?r.a.createElement(ca.a,null,"\u65e0"):r.a.createElement(r.a.Fragment,null,l&&r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(){f(!0)},className:a.button},"\u5206\u914d"),0===t.status&&r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:E(o),className:a.button},"\u627f\u63a5"),r.a.createElement(ya.a,{open:d,onClose:p,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u5206\u914d"),r.a.createElement(_a.b,{onSubmit:function(e){E(e.assign_to)(),p()},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(ja.a,null,r.a.createElement(_a.a,{component:Ta,name:"assign_to",label:"\u5206\u914d"})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:p,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}function lr(e){var a=ar(),t=e.taskState,n=e.adminAuth,l=e.setTaskState,c=Object(X.d)((function(e){return e.user.uid})),i=Object(X.c)(),o=function(e){return function(){i(Qe(!0)),Le.a.get(Me+"/"+t.mid+"/chapter/"+t.cid+"/task/"+t.id+"/status",{params:{to:e},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(a){l(a),1===e&&t.accept_by.uid===c&&i(Je())})).catch((function(e){try{console.log(e.response.data.detail),i(Xe(e.response.data.detail,"error"))}catch(a){i(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return i(Qe(!1))}))}};return r.a.createElement(r.a.Fragment,null,0===t.status&&r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(N.a,{variant:"contained",color:"secondary",size:"small",onClick:o(2),className:a.button},r.a.createElement(Qn,{status:2}),"\u505c\u6b62"),(t.accept_by.uid===c||n)&&""!==t.accept_by.uid&&r.a.createElement(N.a,{variant:"contained",color:"primary",size:"small",onClick:o(1),className:a.button},r.a.createElement(Qn,{status:1}),"\u5b8c\u6210")),n&&r.a.createElement(r.a.Fragment,null,t&&1===t.status&&r.a.createElement(N.a,{variant:"contained",color:"primary",size:"small",onClick:o(0),className:a.button},r.a.createElement(Qn,{status:0}),"\u518d\u5f00"),t&&2===t.status&&r.a.createElement(N.a,{variant:"contained",color:"primary",size:"small",onClick:o(0),className:a.button},r.a.createElement(Qn,{status:0}),"\u5f00\u59cb")))}function cr(e){var a=e.taskState,t=e.adminAuth,l=e.setTaskState,c=Object(n.useState)(a.wait_status),i=Object(O.a)(c,2),o=i[0],u=i[1],s=Object(X.c)(),m=Object(n.useState)(!1),d=Object(O.a)(m,2),f=d[0],p=d[1],E=function(){p(!1)},g=function(e){return function(){s(Qe(!0)),Le.a.get(Me+"/"+a.mid+"/chapter/"+a.cid+"/task/"+a.id+"/waitStatusChange",{params:{selected_value:e},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){l(e)})).catch((function(e){try{console.log(e.response.data.detail),s(Xe(e.response.data.detail,"error"))}catch(a){s(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return s(Qe(!1))}))}};return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Ga.a,{style:{backgroundColor:tr(a.wait_status).color},onClick:function(){p(!0)},label:tr(a.wait_status).label}),!t&&r.a.createElement(Ga.a,{style:{backgroundColor:tr(a.wait_status).color},label:tr(a.wait_status).label}),r.a.createElement(ya.a,{open:f,onClose:E,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u4fee\u6539"),r.a.createElement(ja.a,null,r.a.createElement(Gt.a,{component:"fieldset"},r.a.createElement(Zn.a,{"aria-label":"gender",name:"gender1",value:String(o),onChange:function(e){u(e.target.value)},row:!0},r.a.createElement(pa.a,{value:"4",control:r.a.createElement(er.a,null),label:"\u65b0\u9c9c"}),r.a.createElement(pa.a,{value:"5",control:r.a.createElement(er.a,null),label:"\u4e09\u6210\u719f"}),r.a.createElement(pa.a,{value:"6",control:r.a.createElement(er.a,null),label:"\u4e94\u6210\u719f"}),r.a.createElement(pa.a,{value:"7",control:r.a.createElement(er.a,null),label:"\u4e03\u6210\u719f"}),r.a.createElement(pa.a,{value:"0",control:r.a.createElement(er.a,null),label:"\u81ea\u52a8\u8bbe\u7f6e"})))),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:E,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{onClick:function(){g(o)(),E()},color:"primary"},"\u4fdd\u5b58"))))}var ir=Object(k.a)((function(e){return{root:{width:"100%"},label:{marginTop:e.spacing(.5),marginRight:e.spacing(.5)},button:{marginLeft:e.spacing(1)}}}));function or(e){var a=ir(),t=e.manga,l=e.chapter,c=e.tid,i=e.adminAuth,o=Object(n.useState)(),u=Object(O.a)(o,2),s=u[0],m=u[1],d=Object(X.c)();return r.a.useEffect((function(){d(Qe(!0)),Le.a.get(Me+"/"+t.id+"/chapter/"+l.id+"/task/"+c,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){m(e),aa(t.name+l.name+e.name)})).catch((function(e){d(Xe("\u83b7\u53d6\u4efb\u52a1\u4fe1\u606f\u5931\u8d25","error"))})).finally((function(){return d(Qe(!1))}))}),[c]),r.a.createElement("div",{className:a.root},r.a.createElement(ca.a,{variant:"h5"},"object"===typeof s&&"object"===typeof s.tags&&s.tags.map((function(e,n){return r.a.createElement(qa,{key:n,size:"small",tag:e,className:a.label,deletable:i?"true":"false",mid:t.id,cid:l.id,tid:c})}))||r.a.createElement(Lt.a,null),"object"===typeof t.tags&&i&&r.a.createElement(Un,{className:a.label,level:2,mid:t.id,cid:l.id,tid:c})),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h3"},s&&r.a.createElement(r.a.Fragment,null,sn(s.type),s.name)||r.a.createElement(Lt.a,null))),s&&i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Tn,{api:Me+"/"+t.id+"/chapter/"+l.id+"/task/"+c,name:"\u4efb\u52a1",variant:"outlined",size:"small",callback:"/manga/"+t.id,className:a.button}),r.a.createElement(Hn,{task:s,className:a.button}))),s&&r.a.createElement(nr,{task:s,adminAuth:i}))}var ur=t(5793),sr=t(465),mr=t.n(sr),dr=t(466),fr=t.n(dr),pr=Object(k.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},details:{alignItems:"center"},staffItem:{marginRight:e.spacing(1)},summary:{width:"100%"}}}));function Er(e){var a=pr(),t=e.chapter,n=e.adminAuth;return r.a.createElement("div",{className:a.root},r.a.createElement(En.a,null,r.a.createElement(bn.a,{expandIcon:r.a.createElement(fa.a,null),"aria-controls":"chapter-summary"},r.a.createElement(ca.a,{className:a.heading,noWrap:!0},t.name)),r.a.createElement(gn.a,{className:a.details},r.a.createElement(B.a,{display:"flex",flexDirection:"column",className:a.summary},r.a.createElement(ca.a,null,"Staff"),r.a.createElement(B.a,{display:"flex",alignItems:"center"},t.tasks.map((function(e,t){if(""!==e.accept_by.uid)return r.a.createElement("span",{className:a.staffItem,key:t},r.a.createElement("span",null,e.name),r.a.createElement(dn,{user:e.accept_by,size:"small"}))}))),r.a.createElement(ca.a,null,"\u5099\u8003"),r.a.createElement(ca.a,{className:a.secondaryHeading},t.ps))),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(hn.a,null,r.a.createElement(Tn,{api:Me+"/"+t.mid+"/chapter/"+t.id,name:"\u7ae0\u8282",callback:"/manga/"+t.mid,className:a.button,size:"small",variant:"outlined"}),r.a.createElement(Sn,{chapter:t})))))}var gr=Object(k.a)((function(e){return{root:{width:"100%"}}}));function br(e){var a=gr(),t=e.manga,l=e.adminAuth,c=Object(b.i)(),i=c.cid,o=c.tid,u=Object(n.useState)(),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(X.c)(),p=Object(b.g)(),E=Object(n.useState)(0),g=Object(O.a)(E,2),h=g[0],v=g[1];r.a.useEffect((function(){f(Qe(!0)),Le.a.get(Me+"/"+t.id+"/chapter/"+i,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){for(var a=0;a<e.tasks.length;a++)if(e.tasks[a].id===o){v(a);break}d(e)})).catch((function(e){f(Xe("\u83b7\u53d6\u7ae0\u8282\u4fe1\u606f\u5931\u8d25","error"))})).finally((function(){return f(Qe(!1))}))}),[]);return r.a.createElement("div",{className:a.root},m&&r.a.createElement(Er,{chapter:m,mid:t.id,adminAuth:l}),m&&r.a.createElement(ur.a,{position:"static",activeStep:h,backButton:r.a.createElement(N.a,{size:"small",onClick:function(){p.replace("/manga/"+t.id+"/"+m.id+"/"+m.tasks[h-1].id),v(h-1)},disabled:0===h},r.a.createElement(mr.a,null),"\u4e0a\u4e00\u4e2a\u4efb\u52a1"),nextButton:r.a.createElement(N.a,{size:"small",onClick:function(){p.replace("/manga/"+t.id+"/"+m.id+"/"+m.tasks[h+1].id),v(h+1)},disabled:h===m.tasks.length-1},"\u4e0b\u4e00\u4e2a\u4efb\u52a1",r.a.createElement(fr.a,null)),steps:m.tasks.length}),m&&r.a.createElement(or,Object.assign({chapter:m},e,{tid:m.tasks[h].id})))}var hr=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(1)},coverCard:{maxWidth:275,position:"relative"},label:{marginTop:e.spacing(.5),marginRight:e.spacing(.5)}}}));function vr(e){var a=hr(),t=Object(b.i)().mid,l=Object(b.j)().path,c=Object(X.c)(),i=Object(X.d)((function(e){return e.user.privilege})),o=Object(X.d)((function(e){return e.user.uid})),u=Object(n.useState)(!1),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)({}),p=Object(O.a)(f,2),E=p[0],h=p[1];return r.a.useEffect((function(){c(Qe(!0)),Le.a.get(Me+"/"+t,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){h(e),aa(e.name)})).catch((function(e){c(Xe("\u83b7\u53d6\u6f2b\u753b\u4fe1\u606f\u5931\u8d25","error"))})).finally((function(){return c(Qe(!1))}))}),[]),r.a.useEffect((function(){d(i>=2||"object"===typeof E.producer&&E.producer.uid===o)}),[i,o,E]),r.a.createElement(ma.a,{maxWidth:"lg"},r.a.createElement(B.a,{display:"flex",alignItems:"flex-end",className:a.titleArea},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h5"},"object"===typeof E.tags&&E.tags.map((function(e,n){return r.a.createElement(qa,{key:n,size:"small",tag:e,className:a.label,deletable:m?"true":"false",mid:t})}))||r.a.createElement(Lt.a,null),"object"===typeof E.tags&&m&&r.a.createElement(Un,{className:a.label,level:0,mid:E.id})),r.a.createElement(ca.a,{variant:"h2"},r.a.createElement(Vn.a,{component:g.b,to:"/manga/"+E.id,color:"inherit"},E.name)||r.a.createElement(Lt.a,null))),r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:l},r.a.createElement(B.a,null,m&&r.a.createElement(Ut,{mid:E.id}))))),r.a.createElement(Aa.a,{container:!0,spacing:2},r.a.createElement(Aa.a,{item:!0,xs:12,md:3},r.a.createElement(B.a,{display:"flex",p:1,justifyContent:"center",flexDirection:"column",alignItems:"center"},r.a.createElement(Ra.a,{className:a.coverCard},r.a.createElement(Wa.a,{component:"img",image:E.cover||La.a,title:E.name})),r.a.createElement(Mn,{manga:E,adminAuth:m}))),r.a.createElement(Aa.a,{item:!0,xs:12,md:9},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:l},r.a.createElement(Rn,{mid:t,adminAuth:m})),r.a.createElement(b.b,{path:"".concat(l,"/:cid/:tid")},E.id&&r.a.createElement(br,{adminAuth:m,manga:E}))))))}function yr(e){var a=e.children,t=Object(Cn.a)(e,["children"]),n=Object(X.d)((function(e){return e.user.privilege}));return Object(X.d)((function(e){return e.user.logging}))?r.a.createElement("div",null):r.a.createElement(b.b,Object.assign({},t,{render:function(e){var t=e.location;return n>0?a:r.a.createElement(b.a,{to:{pathname:"/login",state:{from:t}}})}}))}function Or(e){var a=r.a.useState(),t=Object(O.a)(a,2),n=t[0],l=t[1],c=Object(X.d)((function(e){return e.user.uid})),i=Object(X.c)(),o=Object(b.g)();return r.a.useEffect((function(){i(Qe(!0)),Le.a.get(Pe+"/"+c+"/tasks",{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){l(e.tasks)})).catch((function(e){i(Xe("\u62c9\u53d6\u4efb\u52a1\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return i(Qe(!1))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ca.a,{variant:"h5",style:{marginBottom:"2rem"}},"\u4efb\u52a1"),r.a.createElement(B.a,{display:"flex",style:{width:"100%"},flexDirection:"column"},n&&r.a.createElement(Xa.a,{icons:Tt,columns:[{title:"\u6f2b\u753b",field:"mname"},{title:"\u7ae0\u8282",field:"cname"},{title:"\u4efb\u52a1",field:"name"},{title:"\u7c7b\u578b",field:"type",lookup:{0:"\u5176\u4ed6",1:"\u56fe\u6e90",2:"\u7ffb\u8bd1",3:"\u6821\u5bf9",4:"\u5d4c\u5b57",5:"\u5ba1\u6838",6:"\u53d1\u5e03"}},{title:"\u4e0a\u4e00\u6b21\u6d3b\u8dc3",field:"last_update",render:function(e){return na(e.last_update)}},{title:"\u72b6\u6001",field:"status",render:function(e){return r.a.createElement(Qn,{status:e.status})},defaultSort:"asc"}],options:{pageSize:20},data:n,components:{Toolbar:function(e){return r.a.createElement(r.a.Fragment,null)}},onRowClick:function(e,a,t){o.push("/manga/"+a.mid+"/"+a.cid+"/"+a.id)},localization:{grouping:{placeholder:"\u62d6\u62fd\u8868\u5934\u81f3\u6b64\u4ee5\u805a\u5408\u663e\u793a...",groupedBy:"\u805a\u5408:"},pagination:{labelDisplayedRows:"\u7b2c{from}\u5230{to}\u884c \u5171 {count}\u884c",labelRowsSelect:"\u884c",labelRowsPerPage:"\u6bcf\u9875\u884c\u6570:",firstAriaLabel:"\u9996\u9875",firstTooltip:"\u9996\u9875",previousAriaLabel:"\u4e0a\u4e00\u9875",previousTooltip:"\u4e0a\u4e00\u9875",nextAriaLabel:"\u4e0b\u4e00\u9875",nextTooltip:"\u4e0b\u4e00\u9875",lastAriaLabel:"\u672b\u9875",lastTooltip:"\u672b\u9875"}}})))}function jr(e){var a=e.uid,t=r.a.useState(!1),n=Object(O.a)(t,2),l=n[0],c=n[1],i=Object(X.c)(),o=function(){c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{variant:"contained",color:"secondary",style:{marginTop:"0.5rem"},onClick:function(){c(!0)}},"\u4fee\u6539\u5bc6\u7801"),r.a.createElement(ya.a,{open:l,onClose:o},r.a.createElement(_a.b,{onSubmit:function(e){console.log(e),e.password===e["re-password"]?(i(Qe(!0)),Le.a.post(Pe+"/"+a+"/password",e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){c(!1),i(Xe("\u4fee\u6539\u6210\u529f","success"))})).catch((function(e){try{console.log(e.response.data.detail),i(Xe(e.response.data.detail,"error"))}catch(a){i(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return i(Qe(!1))}))):i(Xe("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4","error"))},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u4fee\u6539\u5bc6\u7801"),r.a.createElement(ja.a,null,r.a.createElement(vn.a,null,"\u5bc6\u7801\u662f6-32\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7a7a\u683c\u6216\u5982\u4e0b\u7279\u6b8a\u5b57\u7b26\u7684\u7ec4\u5408\u3002-+_!=@#$%^&*?([)].;:"),r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"password",label:"\u65b0\u5bc6\u7801",type:"password",fullWidth:!0,required:!0}),r.a.createElement(Na.c,{margin:"dense",name:"re-password",label:"\u91cd\u590d\u65b0\u5bc6\u7801",type:"password",fullWidth:!0,required:!0})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:o,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fee\u6539")))}})))}function wr(e){var a=Object(X.d)((function(e){return e.user.uid})),t=r.a.useState(),l=Object(O.a)(t,2),c=l[0],i=l[1],o=Object(X.c)();Object(n.useEffect)((function(){o(Qe(!0)),Le.a.get(Pe+"/"+a,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){i(e)})).catch((function(e){o(Xe("\u83b7\u53d6\u4fe1\u606f\u5931\u8d25","error"))})).finally((function(){return o(Qe(!1))}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ca.a,{variant:"h5",style:{marginBottom:"2rem"}},"\u8d26\u6237\u8bbe\u7f6e"),r.a.createElement(_a.b,{initialValues:c&&{uid:c.uid,nickname:c.nickname,introduction:c.introduction},onSubmit:function(e){e.introduction=e.introduction||"",console.log(e),o(Qe(!0)),Le.a.post(Pe+"/"+a,e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){o(Xe("\u4fee\u6539\u6210\u529f","success"))})).catch((function(e){try{console.log(e.response.data.detail),o(Xe(e.response.data.detail,"error"))}catch(a){o(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return o(Qe(!1))}))},render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(B.a,{display:"flex",flexDirection:"column",alignItems:"flex-start"},r.a.createElement(Na.c,{name:"uid",label:"\u7528\u6237ID",disabled:!0,required:!0}),r.a.createElement(Na.c,{name:"nickname",label:"\u6635\u79f0",required:!0}),r.a.createElement(Na.c,{name:"introduction",label:"\u81ea\u6211\u4ecb\u7ecd",multiline:!0,rowsMax:5}),r.a.createElement(jr,{uid:a}),r.a.createElement(N.a,{type:"submit",variant:"contained",color:"primary",style:{marginTop:"1rem"}},"\u4fdd\u5b58")))}}))}var kr=t(113),xr=t(467),Sr=t(262),Cr=t.n(Sr);function Tr(e){var a=r.a.useState(),t=Object(O.a)(a,2),n=t[0],l=t[1],c=Object(X.c)();r.a.useEffect((function(){c(Qe(!0)),Le.a.get(Ge+"/profile/i_code",{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){l(e.icodes)})).catch((function(e){c(Xe("\u62c9\u53d6\u9080\u8bf7\u7801\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return c(Qe(!1))}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ca.a,{variant:"h5",style:{marginBottom:"2rem"}},"\u7ba1\u7406"),r.a.createElement(B.a,{display:"flex",flexDirection:"column"},r.a.createElement(B.a,null,r.a.createElement(_r,{style:{marginBottom:"1rem"}})),r.a.createElement(B.a,null,r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(){Le.a.put(Ge+"/profile/i_code",null,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){var a=n.slice(0);a.push(e),l(Object.assign(a))})).catch((function(e){try{console.log(e.response.data.detail),c(Xe(e.response.data.detail,"error"))}catch(a){c(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}}))}},"\u6dfb\u52a0\u9080\u8bf7\u7801"),n&&n.map((function(e,a){return r.a.createElement(kr.a,{style:{width:"100%"},key:a},r.a.createElement(B.a,{display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(xr.CopyToClipboard,{text:"https://mikan.mom/signup?icode="+e.icode,onCopy:function(){c(Xe("\u5df2\u590d\u5236\u9080\u8bf7\u94fe\u63a5","success"))}},r.a.createElement(ae.a,null,r.a.createElement(Cr.a,null))),r.a.createElement(ca.a,{variant:"body1",noWrap:!0,flexGrow:1},e.icode)))})))))}function _r(e){var a=r.a.useState(!1),t=Object(O.a)(a,2),n=t[0],l=t[1],c=Object(X.c)(),i=Object(X.d)((function(e){return e.site.broadcast})),o=function(){l(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,Object.assign({variant:"contained",color:"primary",style:{marginTop:"0.5rem"},onClick:function(){l(!0)}},e),"\u4fee\u6539\u516c\u544a"),r.a.createElement(ya.a,{open:n,onClose:o,maxWidth:"md"},r.a.createElement(_a.b,{onSubmit:function(e){e.broadcast||(e.broadcast=""),console.log(e),c(Qe(!0)),Le.a.post(Ge+"/env",null,{params:{key:"broadcast",value:e.broadcast},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(a){l(!1),c(ea(e.broadcast)),c(Xe("\u4fee\u6539\u6210\u529f","success"))})).catch((function(e){try{console.log(e.response.data.detail),c(Xe(e.response.data.detail,"error"))}catch(a){c(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return c(Qe(!1))}))},initialValues:{broadcast:i},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(wa.a,{id:"form-dialog-title"},"\u4fee\u6539\u516c\u544a"),r.a.createElement(ja.a,null,r.a.createElement(Na.c,{autoFocus:!0,margin:"dense",name:"broadcast",label:"\u516c\u544a",fullWidth:!0,multiline:!0,rowsMax:5})),r.a.createElement(Oa.a,null,r.a.createElement(N.a,{onClick:o,color:"primary"},"\u53d6\u6d88"),r.a.createElement(N.a,{type:"submit",color:"primary"},"\u4fdd\u5b58")))}})))}var Nr=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(1)}}}));function zr(e){var a=Nr(),t=r.a.useState(0),l=Object(O.a)(t,2),c=l[0],i=l[1],o=Object(X.d)((function(e){return e.user.nickname})),u=Object(X.d)((function(e){return e.user.privilege})),s=Object(F.a)(),m=Object(R.a)(s.breakpoints.up("md")),d=Object(X.c)(),f=Object(b.g)();Object(n.useEffect)((function(){return aa(o)}),[]);return r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",className:a.titleArea},r.a.createElement(B.a,{flexGrow:1,alignItems:"flex-end"},r.a.createElement(ca.a,{variant:"h5"},"\u6b22\u8fce\u60a8,"),r.a.createElement(ca.a,{variant:"h2"},o)),r.a.createElement(B.a,null,r.a.createElement(N.a,{onClick:function(){window.localStorage.removeItem("access_token"),d({type:"CLEAN_USER"}),f.push("/")}},"\u767b\u51fa"))),r.a.createElement(B.a,{display:"flex",flexGrow:1,alignItems:"flex-start",flexDirection:m?"row":"column"},r.a.createElement(zn.a,{orientation:m?"vertical":"horizontal",variant:"scrollable",value:c,onChange:function(e,a){i(a)},className:a.tabs},r.a.createElement(In.a,{label:"\u4efb\u52a1"}),r.a.createElement(In.a,{label:"\u8bbe\u7f6e"}),u>2&&r.a.createElement(In.a,{label:"\u7ba1\u7406"})),r.a.createElement(Ir,{value:c,index:0},r.a.createElement(Or,null)),r.a.createElement(Ir,{value:c,index:1},r.a.createElement(wr,null)),r.a.createElement(Ir,{value:c,index:2},r.a.createElement(Tr,null))))}function Ir(e){var a=e.children,t=e.value,n=e.index,l=Object(Cn.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({style:{width:"100%"},hidden:t!==n},l),t===n&&r.a.createElement(B.a,{p:3},a))}var Ar=t(292);function Rr(e){var a=Object(Ar.useSnackbar)(),t=a.enqueueSnackbar,n=a.closeSnackbar,l=Object(X.d)((function(e){return e.site.snackMsg})),c=function(e){return function(){return n(e)}};return r.a.useEffect((function(){if("object"===typeof l&&"string"===typeof l.message&&""!==l.message){var e={variant:l.variant};l.dismissable&&Object.assign(e,{action:function(e){return r.a.createElement(N.a,{onClick:c(e)},"\u5ffd\u7565")}}),t(l.message,e)}}),[l]),r.a.createElement("div",null)}var Fr=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(5)}}}));function Dr(e){var a=Fr(),t=Object(n.useState)(!1),l=Object(O.a)(t,2),c=l[0],i=l[1],o=new URLSearchParams(Object(b.h)().search);return r.a.useEffect((function(){aa("\u6388\u6743"),Le.a.get("https://api.mikan.mom/third_party/auth_code",{params:{client_id:o.get("client_id")},headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){var a=e.access_token;window.location.href=o.get("redirect_uri")+"?code="+a+"&state="+o.get("state")})).catch((function(){return i(!0)}))}),[]),r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",className:a.titleArea},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h5"},c?"\u8bf7\u91cd\u8bd5":"\u767b\u5f55\u5230"+o.get("client_id")),r.a.createElement(ca.a,{variant:"h2"},c?"\u6388\u6743\u5931\u8d25":"\u6b63\u5728\u6388\u6743..."))))}function Wr(){return r.a.useEffect((function(){window.location.href="https://pan.mikan.mom"}),[]),r.a.createElement(ma.a,null,r.a.createElement(ca.a,{variant:"h3"},"\u6b63\u5728\u8df3\u8f6c..."),r.a.createElement(ca.a,{variant:"h5"},"\u5982\u65e0\u8df3\u8f6c, ",r.a.createElement("a",{href:"https://pan.mikan.mom"},"\u8bf7\u70b9\u51fb\u8fd9\u91cc\u3002")))}function Br(e){var a=Object(b.g)(),t=e.users;return r.a.createElement(Xa.a,{icons:Tt,columns:[{title:"\u6635\u79f0",field:"nickname"},{title:"\u7528\u6237ID",field:"uid"}],options:{pageSize:20},data:t,components:{Toolbar:function(e){return r.a.createElement(r.a.Fragment,null)}},onRowClick:function(e,t,n){a.push("/user/"+t.uid)},localization:{grouping:{placeholder:"\u62d6\u62fd\u8868\u5934\u81f3\u6b64\u4ee5\u805a\u5408\u663e\u793a...",groupedBy:"\u805a\u5408:"},pagination:{labelDisplayedRows:"\u7b2c{from}\u5230{to}\u884c \u5171 {count}\u884c",labelRowsSelect:"\u884c",labelRowsPerPage:"\u6bcf\u9875\u884c\u6570:",firstAriaLabel:"\u9996\u9875",firstTooltip:"\u9996\u9875",previousAriaLabel:"\u4e0a\u4e00\u9875",previousTooltip:"\u4e0a\u4e00\u9875",nextAriaLabel:"\u4e0b\u4e00\u9875",nextTooltip:"\u4e0b\u4e00\u9875",lastAriaLabel:"\u672b\u9875",lastTooltip:"\u672b\u9875"}}})}var Lr=Object(k.a)((function(e){return{title:{marginTop:e.spacing(5),marginBottom:e.spacing(5)}}}));function Gr(){var e=Lr(),a=Object(n.useState)([]),t=Object(O.a)(a,2),l=t[0],c=t[1],i=Object(X.c)();return Object(n.useEffect)((function(){aa("\u7ec4\u5458"),i(Qe(!0)),Le.a.get(Pe,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){c(e.users)})).catch((function(e){i(Xe("\u62c9\u53d6\u7ec4\u5458\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return i(Qe(!1))}))}),[]),r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",style:{width:"100%"},flexDirection:"column"},r.a.createElement("div",{className:e.title},r.a.createElement(ca.a,{variant:"h2"},"\u7ec4\u5458")),r.a.createElement(Br,{users:l})))}var Pr=t(468),Mr=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},root:{width:"100%"},rootExpanded:{width:"100%",marginTop:e.spacing(1),marginBottom:e.spacing(1)},details:{alignItems:"center"},summary:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},userChip:{marginRight:e.spacing(1)},unreadHeading:{fontSize:e.typography.pxToRem(15),fontWeight:"bold"}}}));function qr(e){var a=Mr(),t=Object(n.useState)(),l=Object(O.a)(t,2),c=l[0],i=l[1],o=Object(n.useState)(""),u=Object(O.a)(o,2),s=u[0],m=u[1],d=Object(X.c)(),f=function(e){var a,t=[],n=Object(Pr.a)(c);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.mrn!==e&&t.push(r)}}catch(l){n.e(l)}finally{n.f()}i(t)};return Object(n.useEffect)((function(){aa("\u901a\u77e5"),d(Qe(!0)),Le.a.get(Ge+"/profile/inbox",{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){"object"===typeof e.messages&&i(e.messages)})).catch((function(e){d(Xe("\u62c9\u53d6\u5217\u8868\u5931\u8d25, \u8bf7\u5237\u65b0\u91cd\u8bd5","error"))})).finally((function(){return d(Qe(!1))}))}),[]),r.a.createElement(ma.a,null,r.a.createElement(B.a,{display:"flex",className:a.titleArea,flexDirection:"column"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h2"},"\u6211\u7684\u901a\u77e5")),r.a.createElement(B.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",flexDirection:"column"},c&&c.map((function(e){return r.a.createElement(Ur,{message:e,expanded:s,setExpanded:m,deleteFromList:f,key:e.mrn})})))))}function Ur(e){var a=Mr(),t=e.message,l=e.expanded,c=e.setExpanded,i=e.deleteFromList,o=Object(n.useState)(!1),u=Object(O.a)(o,2),s=u[0],m=u[1],d=Object(X.c)(),f=Object(n.useState)(),p=Object(O.a)(f,2),E=p[0],g=p[1];r.a.useEffect((function(){return m(t.unread)}),[]),r.a.useEffect((function(){l!==t.mrn||E||(d(Qe(!0)),Le.a.get(Ge+"/message/"+t.mrn,{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){var a;"string"===typeof e.body&&g(e.body),s&&(m(!1),d((a=-1,function(e){e(Object.assign({type:"SET_NOTIFICATIONS"},{number:a}))})))})).catch((function(e){d(Xe("\u83b7\u53d6\u6d88\u606f\u5931\u8d25, \u8bf7\u5237\u65b0\u91cd\u8bd5","error"))})).finally((function(){return d(Qe(!1))})))}),[l]);return r.a.createElement("div",{className:l===t.mrn?a.rootExpanded:a.root},r.a.createElement(En.a,{TransitionProps:{unmountOnExit:!0},expanded:l===t.mrn,onChange:function(){l===t.mrn?c(""):c(t.mrn)}},r.a.createElement(bn.a,{expandIcon:r.a.createElement(fa.a,null),"aria-controls":"message-summary"},r.a.createElement(B.a,{display:"flex",alignItems:"center",flexDirection:"row",className:a.summary},r.a.createElement(dn,{user:t.from_by,className:a.userChip}),r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{className:s?a.unreadHeading:a.heading,noWrap:!0},t.title)),r.a.createElement(ca.a,null,na(t.create_on)))),r.a.createElement(gn.a,{className:a.details},r.a.createElement(ca.a,{variant:"body1"},E)),r.a.createElement(C.a,null),r.a.createElement(hn.a,null,r.a.createElement(N.a,{onClick:function(){d(Qe(!0)),Le.a.delete(Ge+"/message/"+t.mrn,{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){i(t.mrn)})).catch((function(e){try{console.log(e.response.data.detail),d(Xe(e.response.data.detail,"error"))}catch(a){d(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return d(Qe(!1))}))},color:"secondary",variant:"outlined",size:"small"},"\u5220\u9664\u6d88\u606f"))))}var Vr=Object(k.a)((function(e){return{titleArea:{marginTop:e.spacing(5),marginBottom:e.spacing(1)},coverCard:{maxWidth:275,position:"relative"},label:{marginTop:e.spacing(.5),marginRight:e.spacing(.5)}}}));function Hr(e){var a=Vr(),t=Object(b.i)().uid,l=Object(X.c)(),c=Object(b.g)(),i=Object(X.d)((function(e){return e.user.privilege})),o=Object(n.useState)({}),u=Object(O.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(),f=Object(O.a)(d,2),p=f[0],E=f[1];return r.a.useEffect((function(){l(Qe(!0)),Le.a.get(Pe+"/"+t,{withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){m(e),aa(e.nickname)})).catch((function(e){l(Xe("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25","error"))})).finally((function(){return l(Qe(!1))}))}),[]),r.a.useEffect((function(){l(Qe(!0)),Le.a.get(Pe+"/"+t+"/tasks",{headers:Ye(),withCredentials:!0,validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){E(e.tasks)})).catch((function(e){l(Xe("\u62c9\u53d6\u4efb\u52a1\u5217\u8868\u5931\u8d25","error"))})).finally((function(){return l(Qe(!1))}))}),[]),r.a.createElement(ma.a,{maxWidth:"lg"},r.a.createElement(B.a,{display:"flex",alignItems:"flex-end",className:a.titleArea},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,{variant:"h5"},"@",s.uid||r.a.createElement(Lt.a,null)),r.a.createElement(ca.a,{variant:"h2"},r.a.createElement(Vn.a,{component:g.b,to:"/user/"+t,color:"inherit"},s.nickname)||r.a.createElement(Lt.a,null))),r.a.createElement(B.a,null,i>2&&r.a.createElement(jr,{uid:s.uid}))),r.a.createElement(Aa.a,{container:!0,spacing:2},r.a.createElement(Aa.a,{item:!0,xs:12,md:3},r.a.createElement(B.a,{display:"flex",p:1,justifyContent:"center",flexDirection:"column",alignItems:"center"},s&&""!==s.avatar&&r.a.createElement(Ra.a,{className:a.coverCard},r.a.createElement(Wa.a,{component:"img",image:s.avatar,title:s.nickname})),r.a.createElement(B.a,{display:"flex",flexDirection:"column",style:{width:"100%"}},r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u52a0\u5165\u65f6\u95f4")),r.a.createElement(B.a,null,s&&ta(s.join_time))),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u6700\u540e\u4e00\u6b21\u6d3b\u8dc3")),r.a.createElement(B.a,null,s&&ta(s.goo_timestamp))),r.a.createElement(B.a,{display:"flex",flexDirection:"row"},r.a.createElement(B.a,{flexGrow:1},r.a.createElement(ca.a,null,"\u6743\u9650")),r.a.createElement(B.a,null,s&&s.privilege)),r.a.createElement(B.a,null,r.a.createElement(ca.a,{paragraph:!0},s&&s.introduction))))),r.a.createElement(Aa.a,{item:!0,xs:12,md:9},r.a.createElement(ca.a,{variant:"h5",style:{marginBottom:"2rem"}},"\u4efb\u52a1"),r.a.createElement(B.a,{display:"flex",style:{width:"100%"},flexDirection:"column"},p&&r.a.createElement(Xa.a,{icons:Tt,columns:[{title:"\u6f2b\u753b",field:"mname"},{title:"\u7ae0\u8282",field:"cname"},{title:"\u4efb\u52a1",field:"name"},{title:"\u7c7b\u578b",field:"type",lookup:{0:"\u5176\u4ed6",1:"\u56fe\u6e90",2:"\u7ffb\u8bd1",3:"\u6821\u5bf9",4:"\u5d4c\u5b57",5:"\u5ba1\u6838",6:"\u53d1\u5e03"}},{title:"\u4e0a\u4e00\u6b21\u6d3b\u8dc3",field:"last_update",render:function(e){return na(e.last_update)}},{title:"\u72b6\u6001",field:"status",render:function(e){return r.a.createElement(Qn,{status:e.status})},defaultSort:"asc"}],options:{pageSize:20},data:p,components:{Toolbar:function(e){return r.a.createElement(r.a.Fragment,null)}},onRowClick:function(e,a,t){c.push("/manga/"+a.mid+"/"+a.cid+"/"+a.id)},localization:{grouping:{placeholder:"\u62d6\u62fd\u8868\u5934\u81f3\u6b64\u4ee5\u805a\u5408\u663e\u793a...",groupedBy:"\u805a\u5408:"},pagination:{labelDisplayedRows:"\u7b2c{from}\u5230{to}\u884c \u5171 {count}\u884c",labelRowsSelect:"\u884c",labelRowsPerPage:"\u6bcf\u9875\u884c\u6570:",firstAriaLabel:"\u9996\u9875",firstTooltip:"\u9996\u9875",previousAriaLabel:"\u4e0a\u4e00\u9875",previousTooltip:"\u4e0a\u4e00\u9875",nextAriaLabel:"\u4e0b\u4e00\u9875",nextTooltip:"\u4e0b\u4e00\u9875",lastAriaLabel:"\u672b\u9875",lastTooltip:"\u672b\u9875"}}})))))}var Yr=t(263),$r=t.n(Yr);function Jr(){var e=Object(b.g)();Object(n.useEffect)((function(){return aa("404")}),[]),Object(n.useEffect)((function(){setTimeout(a,3e3)}));var a=function(){return e.push("")};return r.a.createElement(ma.a,{component:"main"},r.a.createElement(ca.a,{variant:"h1"},r.a.createElement($r.a,{style:{fontSize:90}}),"404\u4ec0\u4e48\u4e5f\u6ca1\u6709\u627e\u5230"))}var Kr=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Xr(){var e=Kr(),a=new URLSearchParams(Object(b.h)().search),t=Object(X.c)(),l=Object(b.g)();Object(n.useEffect)((function(){return aa("\u6ce8\u518c")}),[]);return r.a.createElement(ma.a,{component:"main",maxWidth:"xs"},r.a.createElement(w.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(de.a,{className:e.avatar},r.a.createElement(Dt.a,null)),r.a.createElement(ca.a,{component:"h1",variant:"h5"},"\u6b22\u8fce\u52a0\u5165\u6c49\u5316\u5de5\u623f\u4e5d\u4e5d\u7ec4"),r.a.createElement(_a.b,{onSubmit:function(e){e.icode=a.get("icode"),console.log(e),e.password===e["re-password"]?(t(Qe(!0)),Le.a.post(Ge+"/signup",e,{headers:Ye(),validateStatus:function(e){return 200===e}}).then((function(e){return e.data})).then((function(e){t(Xe("\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u767b\u5f55\u3002","success")),l.push("/")})).catch((function(e){try{console.log(e.response.data.detail),t(Xe(e.response.data.detail,"error"))}catch(a){t(Xe("\u672a\u77e5\u7684\u9519\u8bef","error"))}})).finally((function(){return t(Qe(!1))}))):t(Xe("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4","error"))},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(Na.c,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"\u7528\u6237ID",name:"uid",autoComplete:"uid",autoFocus:!0,helperText:"ID\u5c06\u88ab\u7528\u4e8e\u767b\u5f55"}),r.a.createElement(Na.c,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"\u6635\u79f0",name:"nickname"}),r.a.createElement(Na.c,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u5bc6\u7801",type:"password",autoComplete:"current-password",helperText:"\u5bc6\u7801\u662f6-32\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7a7a\u683c\u6216\u5982\u4e0b\u7279\u6b8a\u5b57\u7b26\u7684\u7ec4\u5408\u3002-+_!=@#$%^&*?([)].;:"}),r.a.createElement(Na.c,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"re-password",label:"\u91cd\u590d\u5bc6\u7801",type:"password"}),r.a.createElement(N.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"\u6ce8\u518c"))}})))}function Qr(){return r.a.createElement(g.a,null,r.a.createElement(sa,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/"},r.a.createElement($a,null)),r.a.createElement(b.b,{path:"/tasks"},r.a.createElement(Rt,null)),r.a.createElement(b.b,{path:"/login"},r.a.createElement(Bt,null)),r.a.createElement(b.b,{path:"/signup"},r.a.createElement(Xr,null)),r.a.createElement(yr,{path:"/me"},r.a.createElement(zr,null)),r.a.createElement(b.b,{path:"/cloud"},r.a.createElement(Wr,null)),r.a.createElement(yr,{path:"/oauth2"},r.a.createElement(Dr,null)),r.a.createElement(yr,{path:"/users"},r.a.createElement(Gr,null)),r.a.createElement(yr,{path:"/message"},r.a.createElement(qr,null)),r.a.createElement(b.b,{path:"/manga/:mid",children:r.a.createElement(vr,null)}),r.a.createElement(yr,{path:"/user/:uid",children:r.a.createElement(Hr,null)}),r.a.createElement(b.b,{path:"*"},r.a.createElement(Jr,null)))),r.a.createElement(Rr,null))}var Zr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function el(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var al=t(81),tl=Object(al.c)({site:We,user:Ve}),nl=t(469),rl=Object(al.e)(tl,Object(al.a)(nl.a));c.a.render(r.a.createElement(X.a,{store:rl},r.a.createElement(i.a,{theme:E},r.a.createElement(Ar.SnackbarProvider,{anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(Qr,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");Zr?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):el(e,a)})).catch((function(){console.log("No internet connection found. Border is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):el(a,e)}))}}()}},[[5617,1,2]]]);
//# sourceMappingURL=main.99e991d7.chunk.js.map