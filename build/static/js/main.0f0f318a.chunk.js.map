{"version":3,"sources":["cover.jpeg","theme.js","Border/SidebarItem.js","Border/Sidebar.js","Component/AvatarIcon/AvatarIcon.js","reducers/site.js","constant.js","reducers/user.js","controller/user.js","controller/site.js","controller/utils.js","Border/Topbar.js","Border/Footer.js","Border/Border.js","Component/UserAutocomplete/UserAutocomplete.js","Component/ImgUrlTextField/ImgUrlTextField.js","MainPage/NewMangaButton.js","Component/TagChip/colors.js","Component/TagChip/TagChip.js","MainPage/MangaCard.js","MainPage/MangaCardList.js","MainPage/MainPage.js","Component/MaterialTable/tableIcons.js","TasksPage/TasksTable.js","TasksPage/TasksPage.js","LoginPage/LoginPage.js","MangaPage/NewChapterButton.js","Component/TaskChip/icons.js","Component/TaskChip/TaskChip.js","Component/UserChip/UserChip.js","MangaPage/ChapterStepper/ChapterStepper.js","MangaPage/NewTaskButton.js","MangaPage/ChapterList/EditChapterButton.js","Component/DeleteButton/DeleteButton.js","MangaPage/ChapterList/ChapterListItem.js","MangaPage/ChapterList/ChapterList.js","MangaPage/EditMangaButton.js","MangaPage/ChapterAuthList/ChapterAuthTable.js","MangaPage/ChapterAuthList/ChapterAuthList.js","MangaPage/Metadata.js","Component/TagChip/AddTagChip.js","MangaPage/ChapterBlock/TaskBlock/EditTaskButton.js","MangaPage/ChapterBlock/TaskBlock/DataRender.js","Component/StatusIcon/StatusIcon.js","MangaPage/ChapterBlock/TaskBlock/TaskInfo.js","MangaPage/ChapterBlock/TaskBlock/TaskBlock.js","MangaPage/ChapterBlock/ChapterInfo.js","MangaPage/ChapterBlock/ChapterBlock.js","MangaPage/MangaPage.js","PrivateRoute.js","DashboardPage/TasksBlock.js","Component/ChangePasswordButton/ChangePasswordButton.js","DashboardPage/SettingsBlock.js","DashboardPage/AdminBlock.js","DashboardPage/DashboardPage.js","Snackbar.js","OAuthPage/OAuthPage.js","CloudPage/CloudPage.js","PeoplePage/UsersTable.js","PeoplePage/PeoplePage.js","MessagePage/MessagePage.js","UserPage/UserPage.js","NotFound.js","LoginPage/SignUpPage.js","Component/UserChip/ForTableUserChip.js","RunningTasksPage/RunningTasksTable.js","RunningTasksPage/RunningTasksPage.js","Routes.js","serviceWorker.js","reducers/index.js","index.js"],"names":["module","exports","mainThem","createMuiTheme","palette","primary","orange","secondary","deepOrange","responsiveMainThem","responsiveFontSizes","useStyles","makeStyles","theme","popover","pointerEvents","paper","padding","spacing","listItem","breakpoints","up","paddingTop","paddingBottom","SidebarItem","props","name","to","sidebarToggle","React","useState","anchorEl","setAnchorEl","match","useRouteMatch","path","exact","classes","useTheme","isDesktop","useMediaQuery","handlePopoverClose","open","Boolean","ListItem","button","disableGutters","className","onClick","component","Link","selected","Hidden","smDown","Button","onMouseEnter","event","currentTarget","onMouseLeave","children","mdUp","ListItemIcon","style","minWidth","ListItemText","Popover","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","useStyle","drawer","width","flexShrink","placeholder","mixins","toolbar","drawerPaper","Sidebar","openStatus","privilege","useSelector","state","user","height","Box","display","flexDirection","justifyContent","alignItems","Divider","List","disablePadding","fontSize","Deck","implementation","Drawer","variant","anchor","ModalProps","keepMounted","backgroundColor","n","red","pink","purple","indigo","blue","cyan","teal","lime","brown","grey","textColor","AvatarIcon","avatar","hashCode","str","i","hash","length","charCodeAt","Avatar","alt","src","color","site","broadcast","snackMsg","message","busy","showCherry","action","type","Object","assign","isBusy","API_BASE","API_USER","API_MANGA","logging","uid","nickname","number_of_notifications","goo_timestamp","number","loginWithToken","dispatch","a","setLogging","setBusy","axios","get","headers","tokenHeader","validateStatus","status","then","res","data","window","localStorage","setItem","catch","err","console","log","finally","getItem","setGoo","time","Date","now","getTimezoneOffset","initSite","setShowCherry","params","key","setBroadcast","response","detail","setSnackbar","e","dismissable","msg","setTitle","title","document","localtime","stamp","getFullYear","getMonth","getDate","localtime_exact","getHours","slice","getMinutes","menuButton","appBar","zIndex","buttonProgress","position","top","left","marginTop","marginLeft","Topbar","useDispatch","number_of_notification","goo","anchorName","setAnchorName","handlePopoverOpen","AppBar","IconButton","aria-label","create_time","s","secs","mins","hrs","dys","ms2string","getTime","timelapse","Badge","badgeContent","overlap","CircularProgress","size","LinearProgress","Footer","ver","mikanVer","setMikanVer","useEffect","withCredentials","Typography","align","root","content","flexGrow","mainArea","Border","mobileOpen","setMobileOpen","fetchData","handleDrawerToggle","CssBaseline","UserAutocomplete","input","label","initVal","setOpen","loading","setLoading","userList","setUserList","users","Autocomplete","onOpen","loadingText","noOptionsText","options","onChange","value","getOptionLabel","option","defaultValue","renderOption","getOptionSelected","filterOptions","inputValue","matchSorter","keys","renderInput","TextField","required","InputProps","endAdornment","Fragment","ImgUrlTextField","script","createElement","setAttribute","async","head","appendChild","margin","id","fullWidth","target","data-chevereto-pup-trigger","data-target","ariant","NewMangaButton","handleClose","Dialog","aria-labelledby","onSubmit","values","getElementById","put","location","reload","render","handleSubmit","DialogTitle","DialogContent","autoFocus","helperText","DialogActions","tagColor","TagChip","tag","mid","cid","tid","deletable","Chip","onDelete","level","post","maxWidth","labels","right","marginRight","bottom","opacity","details","MangaCard","manga","cover","img","changeImg","Image","onload","Card","CardActionArea","CardMedia","image","flexWrap","tags","map","CardContent","gutterBottom","MangaCardList","showFinished","mangas","setMangas","Grid","container","cherry","item","xs","sm","md","lg","titleArea","marginBottom","cardsArea","expand","transform","transition","transitions","create","duration","shortest","expandOpen","MainPage","expanded","setExpanded","setShowFinished","Container","alignSelf","clsx","aria-expanded","Collapse","filterArea","in","timeout","unmountOnExit","FormControlLabel","checked","control","Switch","labelPlacement","Alert","severity","AlertTitle","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","smallBadge","borderRadius","lightBlueBadge","lightYellowBadge","lightRedBadge","getBadgeContent","tasks","task","filter","t","mname","String","wait_status","getBadgeStatus","waitStatuses","Math","max","TasksTable","history","useHistory","getBadgeClass","icons","columns","field","defaultGroupOrder","split","badge","paddingRight","lookup","0","1","2","3","4","5","6","grouping","sorting","pageSize","rowStyle","rowData","components","Toolbar","onRowClick","togglePanel","push","localization","groupedBy","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","taskListItem","TasksPage","setTasks","processedTasks","main","form","submit","LoginPage","from","useLocation","pathname","preventDefault","stopPropagation","pass","qs","stringify","username","password","replace","auth","autoComplete","NewChapterButton","no1","no2","no4","no8","empty","route","setRoute","handleRouteChange","FormControl","FormLabel","FormGroup","row","Checkbox","disabled","taskIcon","TaskChip","icon","clickable","UserChip","undefined","nominee","completed","ChapterListItem","chapter","Stepper","alternativeLabel","nonLinear","activeStep","orientation","index","Step","StepButton","StepLabel","NewTaskButton","order","initialValues","MenuItem","EditChapterButton","tasksList","setTasksList","ps","multiline","rowsMax","subheader","ListSubheader","DialogContentText","list","setList","animation","DeleteButton","api","callback","others","setInput","delete","rootExpanded","heading","typography","pxToRem","secondaryHeading","text","taskChip","summary","adminAuth","ExpansionPanel","TransitionProps","ExpansionPanelSummary","expandIcon","aria-controls","noWrap","ExpansionPanelDetails","ExpansionPanelActions","ChapterList","setValue","Tabs","newValue","Tab","SubChapterList","listName","chapters","setChapters","query_status","EditMangaButton","producer","ChapterAuthTable","auths","lastComplete","paging","Pagination","tabsWrap","overflowX","textAlign","ChapterAuthList","isAll","setIsAll","buttonName","setButtonName","borderColor","SubChapterAuthList","listNumber","setAuths","is_all_flag","Metadata","create_on","last_update","paragraph","AddTagChip","InputLabel","EditTaskButton","DataRender","StatusIcon","statusToColor","TaskBlock","taskState","setTaskState","accept_by","ToggleButtons","ToggleStatusButtons","WaitStatusChip","handleAssign","assign_to","handleStatusClick","selectedValue","setSelectedValue","selected_value","RadioGroup","Radio","setTask","Skeleton","staffItem","ChapterInfo","ChapterBlock","useParams","setChapter","setOrder","MobileStepper","backButton","nextButton","steps","coverCard","MangaPage","setAdminAuth","setManga","RouterLink","p","PrivateRoute","rest","Tasks","defaultSort","ChangePasswordButton","Settings","setUser","introduction","Admin","codes","setCodes","EditBroadcast","new_codes","code","Paper","onCopy","DashboardPage","removeItem","tabs","TabPanel","other","hidden","Snackbar","useSnackbar","enqueueSnackbar","closeSnackbar","errorMsg","omitAction","messageProps","OAuthPage","fail","setFail","query","URLSearchParams","search","API_THIRD_PARTY","client_id","auth_code","href","CloudPage","UsersTable","PeoplePage","setUsers","filteredUsers","setFilteredUsers","filterText","setFilterText","trim","regex","RegExp","filtered","some","test","userChip","unreadHeading","fontWeight","MessagePage","messages","setMessages","deleteFromList","mrn","result","MessageItem","unread","setUnread","body","setBody","UserPage","NotFound","setTimeout","redirect","SignUpPage","cursor","ForTableUserChip","RunningTasksTable","RunningTasksPage","Routes","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","mikanPeel","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","ThemeProvider","URL","process","origin","addEventListener","fetch","contentType","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.0f0f318a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cover.d753b4ce.jpeg\";","import { createMuiTheme, responsiveFontSizes} from '@material-ui/core/styles';\nimport orange from '@material-ui/core/colors/orange';\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\n\nconst mainThem = createMuiTheme({\n    palette: {\n        primary: orange,\n        secondary: deepOrange,\n    },\n});\n\nexport const responsiveMainThem = responsiveFontSizes(mainThem);","import React from 'react';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Hidden, Popover} from \"@material-ui/core\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {Link, useRouteMatch} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    popover: {\n        pointerEvents: 'none',\n    },\n    paper: {\n        padding: theme.spacing(1),\n    },\n    listItem: {\n        [theme.breakpoints.up(\"md\")]: {\n            paddingTop: 0,\n            paddingBottom: 0\n        },\n    }\n}));\n\n\nexport default function SidebarItem(props) {\n    const {name, to, sidebarToggle} = props;\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const match = useRouteMatch({path: to, exact: to === \"/\"});\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const handlePopoverOpen = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<div>\n            <ListItem button disableGutters={isDesktop} className={classes.listItem}\n                      onClick={isDesktop? null: sidebarToggle}\n                      component={Link} to={to}\n                      selected={match !== null}>\n                <Hidden smDown>\n                    <Button onMouseEnter={handlePopoverOpen}\n                            onMouseLeave={handlePopoverClose}>{props.children}</Button>\n                </Hidden>\n                <Hidden mdUp>\n                    <ListItemIcon style={{minWidth: \"40px\"}}>{props.children}</ListItemIcon>\n                    <ListItemText primary={name}/>\n                </Hidden>\n            </ListItem>\n            <Popover\n                className={classes.popover}\n                classes={{\n                    paper: classes.paper,\n                }}\n                open={open}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'center',\n                    horizontal: 'right',\n                }}\n                transformOrigin={{\n                    vertical: 'center',\n                    horizontal: 'left',\n                }}\n                onClose={handlePopoverClose}\n                disableRestoreFocus\n            >\n                {name}\n            </Popover>\n        </div>\n\n\n    );\n}","import React from \"react\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport SidebarItem from \"./SidebarItem\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {Box} from \"@material-ui/core\";\n\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport DateRangeIcon from '@material-ui/icons/DateRange';\nimport FolderSharedIcon from '@material-ui/icons/FolderShared';\nimport PeopleIcon from '@material-ui/icons/People';\nimport EqualizerIcon from '@material-ui/icons/Equalizer';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport {useSelector} from \"react-redux\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { Deck } from \"@material-ui/icons\";\n\nexport const desktopWidth = 80;\nconst mobileWidth = 150;\n\nconst useStyle = makeStyles((theme) => ({\n    drawer: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n            flexShrink: 0,\n        },\n    },\n    placeholder: theme.mixins.toolbar,\n    drawerPaper: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n        },\n        width: mobileWidth,\n    }\n}));\n\nexport default function Sidebar(props) {\n    const {sidebarToggle, openStatus} = props;\n    const classes = useStyle();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const privilege = useSelector(state => state.user.privilege);\n\n    const drawer = (\n        <span style={{height: \"100%\"}}>\n            <Box style={{height: \"100%\"}} display=\"flex\" flexDirection={\"column\"}\n                 justifyContent={\"space-between\"} alignItems={\"stretch\"}>\n                <Box>\n                    <div className={classes.placeholder}/>\n                    <Divider/>\n\n                    <List disablePadding={true}>\n                        <SidebarItem to={\"/\"} name={\"漫画\"} sidebarToggle={sidebarToggle}>\n                            <MenuBookIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/tasks\"} name={\"任务\"} sidebarToggle={sidebarToggle}>\n                            <DateRangeIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/runningTasks\"} name={\"进行中的任务\"} sidebarToggle={sidebarToggle}>\n                            <Deck style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/cloud\"} name={\"文件\"} sidebarToggle={sidebarToggle}>\n                            <FolderSharedIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/users\"} name={\"成员\"} sidebarToggle={sidebarToggle}>\n                            <PeopleIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        {privilege > 99 &&\n                        <SidebarItem to={\"/stat\"} name={\"统计\"} sidebarToggle={sidebarToggle}>\n                            <EqualizerIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>}\n                    </List>\n                </Box>\n                {privilege > 99 &&\n                <Box>\n                    <Divider/>\n                    <List>\n                        <SidebarItem name={\"管理\"} sidebarToggle={sidebarToggle}>\n                            <ExtensionIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                    </List>\n                </Box>\n                }\n            </Box>\n        </span>\n\n    );\n\n    return (<nav className={classes.drawer}>\n        <Hidden mdUp implementation=\"css\">\n            <Drawer\n                variant=\"temporary\"\n                anchor=\"left\"\n                open={openStatus}\n                onClose={sidebarToggle}\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                ModalProps={{\n                    keepMounted: true,\n                }}\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n        <Hidden smDown implementation=\"css\">\n            <Drawer\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                variant=\"permanent\"\n                open\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n    </nav>);\n}","import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport red from \"@material-ui/core/colors/red\";\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nfunction backgroundColor(n) {\n    switch (n) {\n        case 0:\n            return red[500];\n        case 1:\n            return pink[300];\n        case 2:\n            return purple[500];\n        case 3:\n            return indigo[900];\n        case 4:\n            return blue[500];\n        case 5:\n            return cyan[500];\n        case 6:\n            return teal[500];\n        case 7:\n            return lime[600];\n        case 8:\n            return orange[500];\n        case 9:\n            return brown[500];\n        case 10:\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nfunction textColor(n) {\n    switch (n) {\n        case 0:\n            return \"white\";\n        case 1:\n            return \"white\";\n        case 2:\n            return \"white\";\n        case 3:\n            return \"white\";\n        case 4:\n            return \"white\";\n        case 5:\n            return \"black\";\n        case 6:\n            return \"white\";\n        case 7:\n            return \"black\";\n        case 8:\n            return \"black\";\n        case 9:\n            return \"white\";\n        case 10:\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}\n\nexport default function AvatarIcon(props) {\n    const {avatar, name} = props;\n\n    const hashCode = (str) => {\n        let hash = 0, i, chr;\n        for (i = 0; i < str.length; i++) {\n            chr   = str.charCodeAt(i);\n            hash  = ((hash << 5) - hash) + chr;\n            hash |= 0; // Convert to 32bit integer\n        }\n        return hash;\n    };\n\n    return (\n        <Avatar alt={name} src={avatar} {...props}\n        style={{color: textColor(hashCode(name) % 11),\n        backgroundColor: backgroundColor(hashCode(name) % 11)}}>{name[0] ? name[0] : \"柑\"}</Avatar>\n    );\n}","export const SET_BROADCAST = 'SET_BROADCAST';\nexport const SET_SNACK_MSG = 'SET_SNACK_MSG';\nexport const SET_BUSY = 'SET_BUSY';\nexport const SET_SHOW_CHERRY = 'SET_SHOW_CHERRY';\n\nconst site = (state = {broadcast : \"\", snackMsg : {message: \"\"}, busy : 0, showCherry : true}, action) => {\n    switch (action.type) {\n        case 'SET_BROADCAST':\n            return Object.assign({}, state, {\n                broadcast: action.broadcast,\n            });\n        case 'SET_SNACK_MSG':\n            return Object.assign({}, state, {\n                snackMsg: action.snackMsg,\n            });\n        case 'SET_BUSY':\n            return Object.assign({}, state, {\n                busy: state.busy + (action.isBusy ? 1 : -1),\n            });\n        case 'SET_SHOW_CHERRY':\n            return Object.assign({}, state, {\n                showCherry: action.showCherry,\n            });\n        default:\n            return state\n    }\n};\n\nexport default site;","export const API_BASE = \"https://api.mikan.mom\";\nexport const CLOUD_URL = \"https://pan.mikan.mom\";\n\nexport const API_THIRD_PARTY = API_BASE + '/third_party';\nexport const API_USER = API_BASE + \"/user\";\nexport const API_TAG = API_BASE + \"/tag\";\nexport const API_TAG_DELETE = API_BASE + \"/tag_delete\";\nexport const API_MANGA = API_BASE + \"/manga\";\nexport const API_TASK = API_BASE + \"/task\";\nexport const API_RUNNING_TASK = API_BASE + \"/running_task\";\n\n\nexport function api_chapter(cid, listName = undefined) {\n    return API_MANGA + \"/\" + cid + (listName? \"/\" + listName : \"\");\n}","export const FILL_USER = 'FILL_USER';\nexport const CLEAN_USER = 'CLEAN_USER';\nexport const SET_LOGGING = 'SET_LOGGING';\nexport const SET_NOTIFICATIONS = 'SET_NOTIFICATIONS';\nexport const SET_GOO = 'SET_GOO';\n\nconst user = (state = {privilege: 0, logging: true}, action) => {\n    switch (action.type) {\n        case 'FILL_USER':\n            return {\n                uid: action.uid,\n                nickname: action.nickname,\n                avatar: action.avatar,\n                privilege: action.privilege,\n                number_of_notifications: action.number_of_notifications,\n                goo_timestamp: action.goo_timestamp\n            };\n        case 'CLEAN_USER':\n            return {\n                privilege: 0\n            };\n        case 'SET_LOGGING':\n            return Object.assign({}, state, {\n                logging: action.logging\n            });\n        case 'SET_NOTIFICATIONS':\n            return Object.assign({}, state, {\n                number_of_notifications: state.number_of_notifications + action.number\n            });\n        case 'SET_GOO':\n            return Object.assign({}, state, {\n                goo_timestamp: action.goo_timestamp\n            });\n        default:\n            return state\n    }\n};\n\nexport default user;","import axios from \"axios\";\nimport qs from 'qs';\nimport {FILL_USER, SET_GOO, SET_LOGGING, SET_NOTIFICATIONS} from \"../reducers/user\";\nimport {setBusy, setSnackbar} from \"./site\";\nimport {API_BASE} from \"../constant\";\n\nexport function auth(id, pass, history, from) {\n    return dispatch => {\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/token\", qs.stringify({\n                username: id,\n                password: pass\n            }), {\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n                    dispatch(loginWithToken());\n                    history.replace(from);\n                }\n            ).catch((err) => {\n                try {\n                    console.log(err.response.data.detail);\n                    dispatch(setSnackbar(err.response.data.detail, \"error\"));\n                } catch (e) {\n                    dispatch(setSnackbar(\"未知的错误\", \"error\"));\n                }\n            }).finally(() => dispatch(setBusy(false)));\n    };\n}\n\n\nexport function loginWithToken() {\n    return async dispatch => {\n        dispatch(setLogging(true));\n        dispatch(setBusy(true));\n        await axios.get(API_BASE + \"/profile\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(Object.assign({type: FILL_USER}, res));\n            // dispatch(setSnackbar(\"登录成功\", \"success\"));\n            refreshToken()\n        }).catch(err => {\n            console.log(\"未登录\");\n        }).finally(() => {\n            dispatch(setBusy(false));\n            dispatch(setLogging(false));\n        });\n    };\n}\n\nfunction refreshToken() {\n    axios.get(API_BASE + \"/refresh_token\", {\n        headers: tokenHeader(),\n        validateStatus: status => status === 200\n    }).then(res => res.data).then(res => {\n        window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n    });\n}\n\n\nexport function tokenHeader() {\n    let token = window.localStorage.getItem(\"access_token\");\n    return {'Authorization': 'Bearer ' + token};\n}\n\n\nexport function setLogging(logging) {\n    return dispatch => {\n        dispatch({\n            type: SET_LOGGING,\n            logging: logging\n        })\n    }\n}\n\nexport function setNotifications(number) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_NOTIFICATIONS}, {number: number}));\n    };\n}\n\nexport function setGoo() {\n    let time = new Date();\n    return dispatch => {\n        dispatch(Object.assign({type: SET_GOO}, {goo_timestamp: (Date.now() - time.getTimezoneOffset() * 60000) / 1000}));\n    };\n}","import {SET_SNACK_MSG, SET_SHOW_CHERRY, SET_BUSY, SET_BROADCAST} from \"../reducers/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"./user\";\n\nexport function initSite() {\n    return dispatch => {\n        if (window.localStorage.getItem(\"noCherry\") === \"1\") {\n            dispatch(setShowCherry(false));\n        }\n        axios.get(API_BASE + \"/env\", {\n                params: {\n                    key: \"broadcast\"\n                },\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    dispatch(setBroadcast(res[\"result\"]));\n                }\n            ).catch((err) => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"无法拉取站点，未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    }\n}\n\nexport function setSnackbar(message, variant = \"info\", dismissable = true) {\n    return dispatch =>\n    dispatch(Object.assign({type: SET_SNACK_MSG}, {snackMsg:\n            {\n                message: message,\n                variant: variant,\n                dismissable: dismissable\n            }}));\n}\n\nexport function setBusy(isBusy) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_BUSY}, {isBusy: isBusy}));\n    };\n}\n\nexport function setShowCherry(showCherry) {\n    window.localStorage.setItem(\"noCherry\", showCherry ? \"0\" : \"1\");\n    return dispatch =>\n        dispatch(Object.assign({type: SET_SHOW_CHERRY}, {showCherry: showCherry}));\n}\n\nexport function setBroadcast(msg) {\n    return dispatch => dispatch(Object.assign({type: SET_BROADCAST}, {broadcast: msg}));\n}","export function setTitle(title) {\n    if (typeof title === \"string\")\n        if (title !== \"\")\n            document.title = title + \"-汉化工房九九组\";\n        else\n            document.title = \"汉化工房九九组\"\n}\n\nexport function timelapse(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var create_time = new Date(stamp * 1000);\n    let create_time = new Date();\n    stamp += create_time.getTimezoneOffset() * 60;\n    create_time = new Date(stamp * 1000);\n    var current_time = new Date().getTime();\n    var lapse =  current_time - create_time;\n    function ms2string(s) {\n        var ms = s % 1000;\n        s = (s - ms) / 1000;\n        var secs = s % 60;\n        s = (s - secs) / 60;\n        var mins = s % 60;\n        s = (s - mins) / 60;\n        var hrs = s % 24;\n        var dys = (s - hrs) / 24;\n        return (dys !== 0?(dys+'天'):\"\") + (hrs !== 0 || dys !== 0?((\"0\"+hrs).slice(-2)+'小时'):\"\") +\n            (mins !== 0 || hrs !== 0 || dys !== 0 ?((\"0\"+mins).slice(-2)+'分钟'):\"\") + (\"0\"+secs).slice(-2) +'秒';\n    }\n    return ms2string(lapse);\n}\n\n\nexport function localtime(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日\";\n}\n\nexport function localtime_exact(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日 \" +\n        (\"0\"+time.getHours()).slice(-2) + \":\" + (\"0\"+time.getMinutes()).slice(-2);\n}","import React from \"react\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\n\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport {Badge, Popover} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport AvatarIcon from \"../Component/AvatarIcon/AvatarIcon\";\nimport {Duck} from \"mdi-material-ui\";\nimport {setSnackbar} from \"../controller/site\";\nimport {timelapse} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    menuButton: {\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n        padding: 0,\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n    },\n    popover: {\n        pointerEvents: 'none',\n    },\n    buttonProgress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        marginTop: -12,\n        marginLeft: -12,\n    },\n}));\n\nexport default function Topbar(props) {\n    const {sidebarToggle} = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    const privilege = useSelector(state => state.user.privilege);\n    const isBusy = useSelector(state => state.site.busy);\n    const logging = useSelector(state => state.user.logging);\n    const number_of_notification = useSelector(state => state.user.number_of_notifications);\n    const nickname = useSelector(state => state.user.nickname);\n    const avatar = useSelector(state => state.user.avatar);\n    const goo = useSelector(state => state.user.goo_timestamp);\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [anchorName, setAnchorName] = React.useState(\"\");\n\n    const handlePopoverOpen = (event, name) => {\n        setAnchorName(name);\n        setAnchorEl(event.currentTarget);\n\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleGoo = () => {\n        dispatch(setSnackbar(timelapse(goo), \"info\"));\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n            <div style={{width: \"100%\"}}>\n                <Box display=\"flex\"\n                     justifyContent={\"space-between\"} alignItems={\"center\"}>\n                    <Box>\n                        <IconButton\n                            onClick={sidebarToggle}\n                            className={classes.menuButton}\n                        >\n                            <MenuIcon/>\n                        </IconButton>\n                    </Box>\n                    <Box>\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"咕~\")}\n                                                       onMouseLeave={handlePopoverClose} aria-label={\"goo\"} onClick={handleGoo}>\n                            <Duck fontSize=\"large\"/>\n                        </IconButton>)}\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"通知\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"notification\"} component={Link} to={\"/message\"}>\n                            <Badge badgeContent={number_of_notification} overlap={\"circle\"} color={\"secondary\"}>\n                                <NotificationsIcon fontSize={\"large\"}/>\n                            </Badge>\n                        </IconButton>)}\n                        <IconButton onMouseEnter={(e) => handlePopoverOpen(e, nickname || \"登录\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"account\"}\n                                    component={Link} to={\"/me\"}>\n                            {nickname ? <AvatarIcon name={nickname} avatar={avatar}/> : <AccountCircleIcon fontSize={\"large\"}/>}\n                            {logging && <CircularProgress size={24} className={classes.buttonProgress}/>}\n                        </IconButton>\n\n                    </Box>\n                </Box>\n            </div>\n        </Toolbar>\n        {isBusy > 0 ? <LinearProgress/> : <></>}\n        <Popover\n            className={classes.popover}\n            classes={{\n                paper: classes.paper,\n            }}\n            open={open}\n            anchorEl={anchorEl}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n            }}\n            onClose={handlePopoverClose}\n            disableRestoreFocus\n        >\n            {anchorName}\n        </Popover>\n    </AppBar>);\n}","import Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Divider} from \"@material-ui/core\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE, API_USER} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n    placeholder: {\n        height: theme.spacing(4)\n    }\n}));\nexport default function Footer(props) {\n    const {ver} = props;\n    const classes = useStyles();\n    const [mikanVer, setMikanVer] = React.useState(\"0\");\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/ver\", {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setMikanVer(res[\"version\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取后台版本失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <div>\n            <div className={classes.placeholder}/>\n            <Divider />\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n                Mikan v{mikanVer}, Mikan-Peel v{ver}\n            </Typography>\n        </div>\n    );\n}","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Sidebar from \"./Sidebar\";\nimport Topbar from \"./Topbar\";\nimport Footer from \"./Footer\";\nimport {desktopWidth} from \"./Sidebar\";\n\nimport { useDispatch } from \"react-redux\";\nimport {loginWithToken} from \"../controller/user\";\nimport {initSite} from \"../controller/site\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        alignItems: 'stretch',\n    },\n    placeholder: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n    },\n    mainArea: {\n        minWidth: 600,\n        width: 600,\n        [theme.breakpoints.up(\"md\")]: {\n            width: 960\n        },\n        [theme.breakpoints.up(\"lg\")]: {\n            width: `calc(1280px - ${desktopWidth}px)`\n        },\n        [theme.breakpoints.up(\"xl\")]: {\n            width: `calc(1920px - ${desktopWidth}px)`\n        }\n    }\n}));\n\nfunction Border(props) {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n\n    React.useEffect( () => {\n        async function fetchData() {\n            dispatch(initSite());\n            await dispatch(loginWithToken());\n        }\n        fetchData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleDrawerToggle = () => {\n        setMobileOpen(!mobileOpen);\n    };\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <Topbar sidebarToggle={handleDrawerToggle}/>\n            <Sidebar sidebarToggle={handleDrawerToggle} openStatus={mobileOpen}/>\n            <main className={classes.content}>\n                <div className={classes.placeholder}/>\n\n                        {props.children}\n\n                <Footer ver={\"0.2.1\"}/>\n            </main>\n\n        </div>\n    );\n}\n\nexport default Border;\n","import React from \"react\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport matchSorter from \"match-sorter\";\n\nexport default function UserAutocomplete(props) {\n    const {input, label, initVal} = props;\n    const [open, setOpen] = React.useState(false);\n    const [loading, setLoading] = React.useState(false);\n    const [userList, setUserList] = React.useState([]);\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        if (open && !loading && userList.length === 0) {\n            setLoading(true);\n            axios.get(API_USER, {\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res.users === \"object\" && setUserList(res.users);\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"拉取用户列表失败，请重试\", \"error\"));\n            }).finally(() => setLoading(false));\n        }\n    }, [open]);\n\n    return (\n        <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\n                      loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有这个人\" options={userList}\n                      {...props} onChange={((event, value) => input.onChange(value ? value.uid : null))}\n                      getOptionLabel={(option) => option.uid} defaultValue={initVal}\n                      renderOption={(option) => option.nickname + \"@\" + option.uid}\n                      getOptionSelected={(option, value) => option.uid === value.uid}\n                      filterOptions={(options, { inputValue }) =>\n                          matchSorter(options, inputValue, {keys: [\"nickname\", \"uid\"]})}\n                      renderInput={(params) => (\n                          <TextField required\n                              {...params}\n                              label={label}\n                              InputProps={{\n                                  ...params.InputProps,\n                                  endAdornment: (\n                                      <React.Fragment>\n                                          {loading ? <CircularProgress size={20}/> : null}\n                                          {params.InputProps.endAdornment}\n                                      </React.Fragment>\n                                  ),\n                              }}\n                          />\n                      )}/>\n    );\n}","import React from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\n\n\nexport default function ImgUrlTextField(props) {\n    const {input, initVal} = props;\n\n    React.useEffect(() => {\n        const script = document.createElement(\"script\");\n        script.src = \"https://imgchr.com/sdk/pup.js\";\n        script.setAttribute(\"data-url\", \"https://imgchr.com/upload\");\n        script.setAttribute(\"data-auto-insert\", \"direct-links\");\n        script.setAttribute(\"data-mode\", \"manual\");\n        script.async = true;\n        document.head.appendChild(script);\n    }, []);\n\n    return (\n        <Box display=\"flex\" alignItems=\"flex-end\">\n            <Box flexGrow={1}>\n                <TextField\n                    margin=\"dense\" id=\"cover\" name=\"cover\" label=\"封面URL\" type=\"string\" fullWidth defaultValue={initVal}\n                    onChange={(event) => input.onChange(event.target.value)}\n                />\n            </Box>\n            <Box>\n                <Button data-chevereto-pup-trigger data-target=\"#cover\"\n                        ariant=\"contained\" color=\"secondary\" component=\"span\">图床上传</Button>\n            </Box>\n        </Box>\n    );\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\n\nimport {Form, Field} from 'react-final-form';\nimport {TextField, Checkboxes} from 'mui-rff';\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\n\n\nexport default function NewMangaButton() {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"ps\"] = \"\";\n        console.log(values);\n        axios.put(API_MANGA, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant={\"contained\"} color={\"primary\"} onClick={handleClickOpen}>创建漫画</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">创建漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。建议：罗马字/英文简写。\"/>\n                            <Checkboxes\n                                name=\"cherry\"\n                                data={{label: \"夏蜜樱桃\", value: \"cherry\"}}\n                            />\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\"/>\n                            <Field component={ImgUrlTextField} name=\"cover\"/>\n\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                创建\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","import red from '@material-ui/core/colors/red';\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from '@material-ui/core/colors/blue';\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nexport function tagColor(n) {\n    switch (n) {\n        case \"red\":\n            return red[500];\n        case \"pink\":\n            return pink[300];\n        case \"purple\":\n            return purple[500];\n        case \"indigo\":\n            return indigo[900];\n        case \"blue\":\n            return blue[500];\n        case \"cyan\":\n            return cyan[500];\n        case \"teal\":\n            return teal[500];\n        case \"lime\":\n            return lime[600];\n        case \"orange\":\n            return orange[500];\n        case \"brown\":\n            return brown[500];\n        case \"grey\":\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nexport function textColor(n) {\n    switch (n) {\n        case \"red\":\n            return \"white\";\n        case \"pink\":\n            return \"white\";\n        case \"purple\":\n            return \"white\";\n        case \"indigo\":\n            return \"white\";\n        case \"blue\":\n            return \"white\";\n        case \"cyan\":\n            return \"black\";\n        case \"teal\":\n            return \"white\";\n        case \"lime\":\n            return \"black\";\n        case \"orange\":\n            return \"black\";\n        case \"brown\":\n            return \"white\";\n        case \"grey\":\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {tagColor, textColor} from \"./colors\";\nimport axios from \"axios\";\nimport {API_TAG_DELETE} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function TagChip(props) {\n    const {tag, mid, cid, tid, deletable} = props;\n    const dispatch = useDispatch();\n\n    const handleDelete = () => {\n        let level = 2;\n        if (typeof tid !== \"string\") level = 1;\n        if (typeof cid !== \"string\") level = 0;\n        axios.post(API_TAG_DELETE, {name: tag.name, color: tag.color,\n            mid: mid, cid: level > 0 ? cid : \"\", tid: level > 1 ? tid : \"\", level: level}, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <Chip style={{\n            backgroundColor: tagColor(tag.color),\n            color: textColor(tag.color)\n        }} label={tag.name} onDelete={deletable === \"true\" ? handleDelete : null} {...props}/>\n    );\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport cover from '../cover.jpeg';\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport TagChip from \"../Component/TagChip/TagChip\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        maxWidth: 175,\n        [theme.breakpoints.up(\"md\")]: {\n            maxWidth: 275,\n        },\n        position: \"relative\",\n        margin: theme.spacing(2)\n    },\n    labels: {\n        position: \"absolute\",\n        right: theme.spacing(0),\n        top: theme.spacing(0)\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    content: {\n        width: \"100%\",\n        position: \"absolute\",\n        bottom: 0,\n        backgroundColor: \"black\",\n        // boxShadow: \"20px -20px 20px black, -20px -20px 20px black\",\n        opacity: 0.8\n    },\n    details: {\n        opacity: 1,\n        color: \"white\"\n    }\n}));\n\nexport default function MangaCard(props) {\n    const classes = useStyles();\n    const {manga} = props;\n    const [img, changeImg] = useState(cover);\n\n    React.useEffect(() => {\n        const img = new Image();\n        img.src = manga.cover;\n        img.onload = function () {\n            changeImg(manga.cover);\n        }\n    }, []);\n\n    return (\n        <Card className={classes.root}\n              component={Link} to={\"/manga/\" + manga.id}>\n            <CardActionArea>\n                <CardMedia\n                    component={\"img\"}\n                    image={img}\n                    title={manga.name}\n                />\n                <Box display={\"flex\"} flexDirection={\"row-reverse\"} flexWrap=\"wrap\" className={classes.labels}>\n                    {typeof manga.tags === \"object\" && manga.tags.map((tag, key) =>\n                        (<TagChip className={classes.label} tag={tag} size=\"small\" key={key}/>))}\n                </Box>\n                <CardContent className={classes.content}>\n                    <div className={classes.details}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                            {manga.name || <CircularProgress/>}\n                        </Typography>\n                    </div>\n                </CardContent>\n            </CardActionArea>\n        </Card>\n    );\n}\n","import React, {useState} from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport MangaCard from \"./MangaCard\";\nimport axios from \"axios\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {API_MANGA} from \"../constant\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\nexport default function MangaCardList(props) {\n    const {showFinished} = props;\n    const [mangas, setMangas] = useState([]);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const dispatch = useDispatch();\n\n    React.useEffect(  () => {\n        dispatch(setBusy(true));\n         axios.get(API_MANGA, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                typeof res.mangas === \"object\" && setMangas(res.mangas);\n                }\n            ).catch(err => {\n                dispatch(setSnackbar(\"获取漫画列表失败\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n            <Grid container spacing={1}>\n                {mangas.map((manga) => {\n                    if ((!manga.cherry || showCherry) && (manga.status === 0 || showFinished))\n                        return (<Grid item xs={6} sm={3} md={3} lg={2} key={manga.id}><MangaCard manga={manga}/></Grid>);\n                })}\n            </Grid>\n    );\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport clsx from \"clsx\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport NewMangaButton from \"./NewMangaButton\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport MangaCardList from \"./MangaCardList\";\nimport {setShowCherry} from \"../controller/site\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    cardsArea: {\n        margin: theme.spacing(5)\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n}));\n\nexport default function MainPage(props) {\n    const classes = useStyles();\n    const privilege = useSelector(state => state.user.privilege);\n    const [expanded, setExpanded] = React.useState(false);\n    const [showFinished, setShowFinished] = React.useState(false);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const broadcast = useSelector(state => state.site.broadcast);\n    const dispatch = useDispatch();\n\n    useEffect(() => setTitle(\"\"), []);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const onChangeCherry = (event) => {\n        dispatch(setShowCherry(event.target.checked));\n    };\n\n    const onChangeFinish = (event) => {\n        setShowFinished(event.target.checked);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">汉化工房</Typography>\n                    <Typography variant=\"h2\">九九组</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"更多选项\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n\n            <Collapse className={classes.filterArea} in={expanded} timeout=\"auto\" unmountOnExit>\n\n                <Box flexGrow={1}>\n                </Box>\n                <Box display={\"flex\"} justifyContent=\"flex-end\">\n                    {privilege >= 2 && <NewMangaButton/>}\n                    <FormControlLabel\n                        checked={showCherry}\n                        onChange={onChangeCherry}\n                        value={showCherry}\n                        size={\"small\"}\n                        control={<Switch color=\"primary\"/>}\n                        label=\"显示夏蜜樱桃的作品\"\n                        labelPlacement=\"start\"/>\n                    <FormControlLabel\n                        checked={showFinished}\n                        onChange={onChangeFinish}\n                        value={showCherry}\n                        size={\"small\"}\n                        control={<Switch color=\"primary\"/>}\n                        label=\"显示不再更新的作品\"\n                        labelPlacement=\"start\"/>\n                </Box>\n            </Collapse>\n            {broadcast !== \"\" && \n            <Alert variant=\"outlined\" severity=\"info\">\n                <AlertTitle>公告</AlertTitle>\n                {broadcast}\n            </Alert>}\n            <MangaCardList showFinished={showFinished}/>\n        </Container>\n    );\n}","import React, {forwardRef} from \"react\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport Check from \"@material-ui/icons/Check\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport Search from \"@material-ui/icons/Search\";\nimport ArrowUpward from \"@material-ui/icons/ArrowUpward\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nexport const tableIcons = {\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref}/>),\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref}/>),\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref}/>),\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref}/>),\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref}/>),\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref}/>),\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref}/>),\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref}/>),\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref}/>),\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref}/>),\n    SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref}/>),\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref}/>),\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref}/>)\n};","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport TagChip from \"../Component/TagChip/TagChip\";\nimport { Badge } from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\"\n\n//1个月lightBule\n//2个月#FFFF00 lightYellow\n//3个月#FF5252 lightRed\nconst useStyles = makeStyles((theme) => ({\n    smallBadge: {\n        minWidth: '14px', // 设置最小宽度\n        width: '14px', // 设置宽度\n        height: '14px', // 设置高度\n        fontSize: '10px', // 设置字体大小\n        padding: '0', // 移除内边距\n        borderRadius: '50%', // 保持圆形\n    },\n    lightBlueBadge: {\n        backgroundColor: \"lightBlue\",\n    },\n    lightYellowBadge: {\n        backgroundColor: 'rgba(255, 255, 0, 0.5)',\n    },\n    lightRedBadge: {\n        backgroundColor: \"rgba(255, 82, 82, 0.5)\",\n    },\n}));\n\nconst getBadgeContent = (tasks, task, type) => {\n    // 假设tasks是一个包含所有漫画任务的数组\n    // 计算等待状态大于0的任务数量\n    return tasks.filter(t => t.mname === task && String(t.type) === type && t.wait_status%4 > 0).length;\n};\n\nconst getBadgeStatus = (tasks, task, type) => {\n    const waitStatuses = tasks\n        .filter(t => t.mname === task && String(t.type) === type && t.wait_status % 4 > 0)\n        .map(t => t.wait_status % 4);\n    return waitStatuses.length > 0 ? Math.max(...waitStatuses) : 0;\n};\n\nexport default function TasksTable(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const {tasks} = props;\n    const getBadgeClass = (value) => {\n        switch (value) {\n            case 1:\n                return `${classes.smallBadge} ${classes.lightBlueBadge}`;\n            case 2:\n                return `${classes.smallBadge} ${classes.lightYellowBadge}`;\n            case 3:\n                return `${classes.smallBadge} ${classes.lightRedBadge}`;\n            default:\n                return classes.smallBadge;\n        }\n    };\n\n    return (\n        <MaterialTable icons={tableIcons} columns={[\n            {title: \"漫画\", field: \"mname\", defaultGroupOrder: 1,\n                render: (task) => { // 自定义渲染函数\n                const [mname, type] = task.split('鸪鸪鸪');\n                return(\n                <Badge badgeContent={getBadgeContent(tasks,task,type)} anchorOrigin={{ vertical: 'top', horizontal: 'right' }} overlap=\"rectangle\" classes={{ badge: getBadgeClass(getBadgeStatus(tasks,task,type)) }}>\n                    <span style={{ paddingRight: '10px' }}>{mname}</span>\n                </Badge>\n                );\n            },},\n            {title: \"章节\", field: \"cname\"},\n            {title: \"任务\", field: \"name\"},\n            {title: \"类型\", field: \"type\", lookup: {\n                    0: \"其他\",\n                    1: \"图源\",\n                    2: \"翻译\",\n                    3: \"校对\",\n                    4: \"嵌字\",\n                    5: \"审核\",\n                    6: \"发布\",\n                }, defaultGroupOrder: 0},\n            {title: \"标签\", field: \"tags\", grouping: false, render: task =>\n                <>{task[\"tags\"].map((tag, key) => {\n                    return <TagChip tag={tag} size=\"small\" key={key}/>;\n                })}</>\n                , sorting: false},\n            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"]), grouping: false},\n        ]} options={{\n            pageSize: 20,\n            grouping: true,\n            rowStyle: rowData => {\n                const colorMapping = {\n                    0: 'transparent',\n                    1: 'lightBlue', // 第一种颜色\n                    2: 'rgba(255, 255, 0, 0.5)', // 第二种颜色\n                    3: 'rgba(255, 82, 82, 0.5)', // 第三种颜色\n                };\n                const backgroundColor = colorMapping[rowData.wait_status % 4] || 'transparent';\n\n                return { backgroundColor };\n            }\n        }} data={tasks} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n    );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_TASK} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\nimport TasksTable from \"./TasksTable\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    taskListItem: {\n        marginTop: theme.spacing(1)\n    }\n}));\n\nexport default function TasksPage() {\n    const classes = useStyles();\n    const [tasks, setTasks] = useState([]);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"任务广场\");\n        dispatch(setBusy(true));\n        axios.get(API_TASK, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                const processedTasks = res[\"tasks\"].map(task => ({\n                    ...task,\n                    mname: `${task.mname}鸪鸪鸪${task.type}`\n                }));\n                setTasks(processedTasks);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">任务广场</Typography>\n                </div>\n                <TasksTable tasks={tasks}/>\n            </Box>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport { useDispatch } from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {auth} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\nimport Leaf from \"mdi-material-ui/Leaf\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nexport default function LoginPage() {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    let history = useHistory();\n    let location = useLocation();\n    let { from } = location.state || { from: { pathname: \"/\" } };\n\n    useEffect(() => setTitle(\"登录\"), []);\n\n    let login = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch(auth(document.getElementById('uid').value, document.getElementById('pass').value, history, from));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    登录\n                </Typography>\n                <form className={classes.form} onSubmit={login}>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth id=\"uid\" label=\"用户ID\" name=\"uid\"\n                               autoComplete=\"uid\" autoFocus/>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"pass\" label=\"密码\"\n                               type=\"password\" id=\"pass\" autoComplete=\"current-password\"/>\n                    <Button fullWidth variant=\"contained\" color=\"primary\" className={classes.submit} type=\"submit\">\n                        登录\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport {Form} from 'react-final-form';\nimport {TextField} from 'mui-rff';\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function NewChapterButton(props) {\n    const {mid} = props;\n    const [open, setOpen] = React.useState(false);\n    const [route, setRoute] = React.useState({no1: true, no2: false, no4: true, no8: true, empty: false});\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleRouteChange = (event) => {\n        setRoute({...route, [event.target.name]: event.target.checked});\n    };\n\n    const onSubmit = (values) => {\n        let type = route[\"no1\"] ? 1 : 0;\n        type += route[\"no2\"] ? 2 : 0;\n        type += route[\"no4\"] ? 4 : 0;\n        type += route[\"no8\"] ? 8 : 0;\n        type += route[\"empty\"] ? 16 : 0;\n        values[\"ps\"] = \"\";\n        console.log(type);\n        console.log(values);\n        axios.put(API_MANGA + \"/\" + mid + \"/chapter\", values, {\n            params: {type: type},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button color=\"primary\" onClick={handleClickOpen} variant=\"outlined\">\n                新建章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建章节</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth required helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。\"/>\n                            <FormControl component=\"fieldset\">\n                                <FormLabel component=\"legend\">自定义任务流程</FormLabel>\n                                <FormGroup row>\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no1\"]} onChange={handleRouteChange}\n                                                           name=\"no1\"/>}\n                                        label=\"无图源\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no2\"]} onChange={handleRouteChange}\n                                                           name=\"no2\"/>}\n                                        label=\"无校对\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no4\"]} onChange={handleRouteChange}\n                                                           name=\"no4\"/>}\n                                        label=\"无审核\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no8\"]} onChange={handleRouteChange}\n                                                           name=\"no8\"/>}\n                                        label=\"无发布\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"empty\"]} onChange={handleRouteChange}\n                                                           name=\"empty\"/>}\n                                        label=\"空项目\"\n                                    />\n                                </FormGroup>\n                            </FormControl>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import Briefcase from \"mdi-material-ui/Briefcase\";\nimport ImageMultiple from \"mdi-material-ui/ImageMultiple\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport FormTextboxPassword from \"mdi-material-ui/FormTextboxPassword\";\nimport Palette from \"mdi-material-ui/Palette\";\nimport Gavel from \"mdi-material-ui/Gavel\";\nimport Rocket from \"mdi-material-ui/Rocket\";\nimport React from \"react\";\n\nexport function taskIcon(n) {\n    const icons = {\n        0: <Briefcase/>,\n        1: <ImageMultiple/>,\n        2: <TranslateIcon/>,\n        3: <FormTextboxPassword/>,\n        4: <Palette/>,\n        5: <Gavel/>,\n        6: <Rocket/>\n    };\n    return icons[n];\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {taskIcon} from \"./icons\";\n\nexport default function TaskChip(props) {\n    const {label} = props;\n\n    return (\n        <div>\n            <Chip {...props} variant={label[\"accept_by\"][\"uid\"] === \"\" ? \"outlined\" : \"default\"} icon={taskIcon(label[\"type\"])}\n                  color={label[\"status\"] === 0 || label[\"status\"] === 1 ? \"primary\" :\n                      label[\"status\"] === 2 ? \"secondary\" : \"\"} size={\"small\"}\n                  label={label[\"name\"]} clickable aria-label=\"Task Chip\"\n                  to={\"/manga/\" + label[\"mid\"] + \"/\" + label[\"cid\"] + \"/\" + label[\"id\"]}/>\n        </div>\n    );\n}\n","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AvatarIcon from \"../AvatarIcon/AvatarIcon\";\nimport {useHistory} from \"react-router-dom\";\n\nexport default function UserChip(props) {\n    const {user} = props;\n    const history = useHistory();\n\n    if (user === undefined) return (<></>);\n\n    const handleClick = () => {\n        history.push(\"/user/\" + user[\"uid\"]);\n    };\n\n    return (\n        <Chip variant=\"outlined\" aria-label=\"User Chip\" onClick={handleClick} clickable\n              avatar={<AvatarIcon avatar={user[\"avatar\"]} name={user[\"nickname\"]}/>} label={user[\"nickname\"]} {...props}/>\n    );\n}","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Stepper from \"@material-ui/core/Stepper\";\nimport StepButton from \"@material-ui/core/StepButton\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Step from \"@material-ui/core/Step\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\nimport UserChip from '../../Component/UserChip/UserChip';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    nominee: {\n        marginBottom: 10\n    },\n    completed: {\n        color: theme.palette.primary\n    }\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const {vertical, chapter, mid} = props;\n\n    const tasks = chapter[\"tasks\"];\n    const cid = chapter[\"id\"];\n\n    return (\n        <div className={classes.root}>\n            <Stepper alternativeLabel={!vertical} nonLinear activeStep={-1} orientation={vertical ? \"vertical\" : \"horizontal\"}>\n                {tasks.map((label, index) => (\n                    <Step key={label[\"name\"]}>\n                        <StepButton component={Link} to={\"/manga/\" + mid + \"/\" + cid + \"/\" + label[\"id\"]}\n                                    completed={label[\"status\"] === 1}>\n                            <StepLabel>\n                                <TaskChip label={label}/>\n                            </StepLabel>\n                        </StepButton>\n                        {label[\"accept_on\"] !== 0 && (!vertical ? (\n                            <StepLabel icon={null}>\n                                <UserChip user={label[\"accept_by\"]} size=\"small\"/>\n                            </StepLabel>\n                        ):\n                        <StepLabel icon={\n                            <span style={{ display: 'inline-block', width: '24px', height: '24px' }}></span>}> \n                            <UserChip user={label[\"accept_by\"]} size=\"small\" style={{ marginTop: '5px' }}/>\n                        </StepLabel>\n                        )}\n                    </Step>\n                ))}\n            </Stepper>\n        </div>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport {taskIcon} from \"../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport {TextField, Select} from \"mui-rff\";\n\n\nexport default function NewTaskButton(props) {\n    const {chapter, order} = props;\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.put(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"] + \"/task\", values, {\n            params: {order: order},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                新建任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: 0}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Box from \"@material-ui/core/Box\";\n\nimport {ReactSortable} from \"react-sortablejs\";\nimport NewTaskButton from \"../NewTaskButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport {taskIcon} from \"../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {TextField} from \"mui-rff\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useHistory} from \"react-router\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function EditChapterButton(props) {\n    const {chapter} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const [tasksList, setTasksList] = React.useState([]);\n\n    React.useEffect(() => {\n        let tasks = chapter[\"tasks\"].slice();\n        for (let i = 0; i < tasks.length; i++) {\n            tasks[i][\"order\"] = i;\n        }\n        setTasksList(tasks);\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"tasks\"] = tasksList.map(task => task.order);\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== chapter[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                编辑章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑章节</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{name: chapter[\"name\"], id: chapter[\"id\"], ps: chapter[\"ps\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <TextField margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth/>\n                    <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。建议：章节数字。\"/>\n                    <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                    <List subheader={\n                        <ListSubheader component=\"div\">\n                            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"flex-end\">\n                                <Box flexGrow={1}><DialogContentText>任务</DialogContentText></Box>\n                                <Box><NewTaskButton chapter={chapter} order={chapter[\"tasks\"].length}/></Box>\n                            </Box>\n                        </ListSubheader>\n                    }>\n                        <ReactSortable list={tasksList} setList={setTasksList} animation={150}>\n                            {tasksList.map((task, order) => (\n                                <ListItem key={order}>\n                                    <ListItemIcon>\n                                        {taskIcon(task[\"type\"])}\n                                    </ListItemIcon>\n                                    <ListItemText primary={task[\"name\"]}/>\n                                    <DragHandleIcon/>\n                                </ListItem>\n                            ))}\n                        </ReactSortable>\n                    </List>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        取消\n                    </Button>\n                    <Button type=\"submit\" color=\"primary\">\n                        保存\n                    </Button>\n                </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from \"@material-ui/core/TextField\";\n\nimport axios from \"axios\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function DeleteButton(props) {\n    const {id, name, api, callback, reload, ...others} = props;\n    const [open, setOpen] = React.useState(false);\n    const [input, setInput] = React.useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleInput = (event) => {setInput(event.target.value)};\n\n    const onSubmit = () => {\n        axios.delete(api, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            if (reload) window.location.reload();\n            history.replace(callback);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} {...others}>删除{name}</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                        <DialogTitle id=\"form-dialog-title\">确认删除</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText>\n                                删除后将不可恢复\n                            </DialogContentText>\n                            {id && <><DialogContentText>请在下方重复输入ID以确认</DialogContentText>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label={id} type=\"string\" onChange={handleInput} fullWidth required/></>}\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\" disabled={input !== id}>\n                                删除\n                            </Button>\n                        </DialogActions>\n            </Dialog>\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterStepper from \"../ChapterStepper/ChapterStepper\";\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport {useTheme} from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"./EditChapterButton\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    taskChip: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up('md'));\n\n    const {chapter, adminAuth, mid, expanded, setExpanded} = props;\n\n    const handleExpand = () => {\n        if (expanded === chapter[\"id\"]) setExpanded(\"\");\n        else setExpanded(chapter[\"id\"]);\n    };\n\n    return (\n        <div className={expanded === chapter[\"id\"] ? classes.rootExpanded : classes.root}>\n            <ExpansionPanel TransitionProps={{ unmountOnExit: true }} expanded={expanded === chapter[\"id\"]} onChange={handleExpand}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Box display=\"flex\" flexDirection=\"row\" className={classes.summary}>\n                        <Box flexGrow={1}>\n                            <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                        </Box>\n                        <Box display=\"flex\" flexDirection=\"row\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                return task[\"status\"] === 0 &&\n                                    <TaskChip label={task} key={key} className={classes.taskChip} component={Link} />\n                            })}\n                        </Box>\n                    </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box  display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                    <ChapterStepper vertical={!isDesktop} chapter={chapter} mid={mid}/>\n                    <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + mid + \"/chapter/\" + chapter[\"id\"]}\n                                      callback={\"/manga/\" + mid} className={classes.button} size=\"small\" variant=\"outlined\" reload/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterListItem from \"./ChapterListItem\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    }\n}));\n\n\nexport default function ChapterList(props) {\n    const classes = useStyles();\n    const {mid, adminAuth} = props;\n    const [value, setValue] = React.useState(0);\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" color={\"transparent\"}>\n                <Tabs value={value} onChange={handleChange}>\n                    <Tab label=\"未完成\"/>\n                    <Tab label=\"已完成\"/>\n                </Tabs>\n            </AppBar>\n            <SubChapterList mid={mid} listName={value} adminAuth={adminAuth}/>\n\n        </div>\n    );\n}\n\nexport function SubChapterList(props) {\n    const {mid, listName, adminAuth} = props;\n    const [loading, setLoading] = useState(true);\n    const [chapters, setChapters] = useState([]);\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setLoading(true);\n        setChapters([]);\n        axios.get(API_MANGA + \"/\" + mid + \"/chapter\", {\n            params: {\n                query_status: listName\n            },\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"chapters\"] === \"object\" && setChapters(res[\"chapters\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => setLoading(false));\n    },[listName]);\n\n    return <>{loading ? <LinearProgress/> : chapters.map((chapter) =>\n            (<ChapterListItem chapter={chapter} adminAuth={adminAuth} mid={mid} key={chapter.id} expanded={expanded} setExpanded={setExpanded}/>)\n        )}</>;\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\n\nimport {Form, Field} from 'react-final-form';\nimport {TextField, Checkboxes} from 'mui-rff';\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function EditMangaButton(props) {\n    const {manga} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"producer\"] = document.getElementById(\"producer\").value;\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"status\"] = values[\"status\"] === true ? 1 : 0;\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + manga[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== manga[\"id\"])\n                history.replace(\"/manga/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>编辑漫画</Button>\n\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form initialValues={{name: manga.name, id: manga.id, cherry: manga.cherry, status: manga.status === 1, ps: manga.ps}}\n                    onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">编辑漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。\"/>\n                            <Checkboxes\n                                name=\"cherry\"\n                                data={{label: \"夏蜜樱桃\", value: \"cherry\"}}\n                            />\n                            <Checkboxes\n                                name=\"status\"\n                                data={{label: \"不再更新\", value: \"cherry\"}}\n                            />\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\" disabled={privilege < 2} initVal={manga.producer}/>\n                            <Field component={ImgUrlTextField} name=\"cover\" initVal={manga.cover}/>\n                            <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                修改\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","import React from \"react\";\r\nimport MaterialTable from \"material-table\";\r\n\r\nimport {useHistory} from \"react-router\";\r\nimport {tableIcons} from \"../../Component/MaterialTable/tableIcons\";\r\nimport {localtime} from \"../../controller/utils\";\r\n\r\n  \r\n\r\nexport default function ChapterAuthTable(props) {\r\n    const history = useHistory();\r\n    const {auths} = props;\r\n\r\n    return (\r\n        <MaterialTable icons={tableIcons} columns={[\r\n            {title: \"用户\", field: \"nickname\"},\r\n            {title: \"完成话数\", field: \"count\"},\r\n            {title: \"最近活跃\", field: \"lastComplete\",render: rowData => localtime(rowData.lastComplete), }\r\n        ]} options={{\r\n            pageSize: 7 ,\r\n            paging: false,\r\n        }} data={auths} components={{\r\n            Pagination: () => null,\r\n            Toolbar: props => (<></>)\r\n        }} onRowClick={(event, rowData, togglePanel) => {\r\n            history.push(\"/user/\" + rowData[\"accept_uid\"]);\r\n        }} \r\n        />\r\n        );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport ChapterAuthTable from \"./ChapterAuthTable\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport axios from \"axios\";\r\nimport {API_MANGA} from \"../../constant\";\r\nimport {setSnackbar} from \"../../controller/site\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    tabsWrap: { // 新增样式类\r\n        '& .MuiTabs-scrollableX': {\r\n            overflowX: 'auto', // 添加滚动条，如果需要\r\n        },\r\n        '& .MuiTabs-flexContainer': {\r\n            justifyContent: 'space-around', // 或 'space-between' 根据需要调整对齐方式\r\n            flexWrap: 'wrap', // 允许标签换行\r\n        },\r\n        '& .MuiTab-root': {\r\n            minWidth: '33%', // 可以根据实际情况调整，确保三个标签能够舒适地显示\r\n            textAlign: 'center', // 让标签文本居中\r\n        },\r\n    },\r\n}));\r\n\r\n\r\nexport default function ChapterAuthList(props) {\r\n    const classes = useStyles();\r\n    const {mid} = props;\r\n    const [value, setValue] = React.useState(0);\r\n    const [isAll, setIsAll] = React.useState(false);\r\n    const [buttonName, setButtonName] = React.useState(\"近期\");\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const handleClickOpen = () => {\r\n        if(!isAll)\r\n            setButtonName(\"所有\")\r\n        else\r\n            setButtonName(\"近期\")\r\n\r\n        setIsAll(!isAll);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Grid container alignItems=\"center\" spacing={0}>\r\n                <Grid item xs>\r\n                    <Tabs value={value} onChange={handleChange} className={classes.tabsWrap}>\r\n                        <Tab label=\"翻译\" />\r\n                        <Tab label=\"校对\" />\r\n                        <Tab label=\"嵌字\" />\r\n                    </Tabs>\r\n                </Grid>\r\n                <Grid item>\r\n                    <Button variant=\"outlined\" onClick={handleClickOpen}  style={{ borderColor: 'lightblue', color: '#34ACE8',\r\n                        '&:hover': { backgroundColor: 'lightblue',borderColor: 'lightblue',}\r\n                    }}>{buttonName}</Button>\r\n                </Grid>\r\n            </Grid>\r\n            <SubChapterAuthList mid={mid} listNumber={value} isAll={isAll}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function SubChapterAuthList(props) {\r\n    const {mid, listNumber, isAll} = props;\r\n    const [loading, setLoading] = useState(true);\r\n    const [auths, setAuths] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    React.useEffect(() => {\r\n        if (mid !== undefined && mid !== null) { // 确保mid有值\r\n            setLoading(true);\r\n            setAuths([]); // 清空auths以准备接受新数据\r\n            axios.get(`${API_MANGA}/${mid}/chapterAuth`, {\r\n                params: {\r\n                    query_status: listNumber,\r\n                    is_all_flag: isAll\r\n                },\r\n                withCredentials: true,\r\n                validateStatus: status => status === 200\r\n            })\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                    if (typeof res[\"chapterauth\"] === \"object\") {\r\n                        setAuths(res[\"chapterauth\"]);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\r\n                })\r\n                .finally(() => setLoading(false));\r\n        }\r\n    }, [mid, listNumber,isAll]);\r\n\r\n    return (\r\n        <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\r\n            <ChapterAuthTable auths={auths}/>\r\n        </Box>\r\n    );\r\n}","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport EditMangaButton from \"./EditMangaButton\";\nimport UserChip from \"../Component/UserChip/UserChip\";\n\nimport {localtime} from \"../controller/utils\";\nimport {API_MANGA} from \"../constant\";\nimport DeleteButton from \"../Component/DeleteButton/DeleteButton\";\nimport ChapterAuthList from './ChapterAuthList/ChapterAuthList';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        marginTop: theme.spacing(1)\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n}));\n\nexport default function Metadata(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const [expanded, setExpanded] = React.useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    return (\n        <Box display={\"flex\"} flexDirection={\"column\"} className={classes.root}>\n            <Box display={\"flex\"}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">详细信息</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"详情\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n            <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>制作人</Typography></Box>\n                            <Box><UserChip user={manga.producer} size=\"small\"/></Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>开坑时间</Typography></Box>\n                            <Box>{localtime(manga.create_on)}</Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                            <Box>{localtime(manga.last_update)}</Box>\n                        </Box>\n                        <Box>\n                            <Typography paragraph>{manga.ps}</Typography>\n                        </Box>\n                    </Box>\n                </ExpansionPanelDetails>\n                <Divider/>\n                <ExpansionPanelActions>\n                    {adminAuth && <>\n                        <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"]} size=\"small\" variant=\"outlined\"\n                                      callback={\"\"} className={classes.button} id={manga[\"id\"]} name={\"漫画\"}/>\n                                      <EditMangaButton manga={manga}/></>}\n                </ExpansionPanelActions>\n            </Collapse>\n            <ChapterAuthList mid={manga[\"id\"]}/>\n        </Box>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Chip from \"@material-ui/core/Chip\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport TagChip from \"../TagChip/TagChip\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\n\nimport {TextField, Select} from \"mui-rff\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_TAG} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function AddTagChip(props) {\n    const [open, setOpen] = React.useState(false);\n    const {level, mid, cid, tid} = props;\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"level\"] = level;\n        values[\"mid\"] = mid;\n        values[\"cid\"] = typeof cid === \"string\" ? cid : \"\";\n        values[\"tid\"] = typeof tid === \"string\" ? tid : \"\";\n        console.log(values);\n        axios.put(API_TAG, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n\n    return (\n        <>\n            <Chip label={\"+\"} size=\"small\" clickable onClick={handleClickOpen} {...props}/>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">添加标签</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"名称\" type=\"string\" fullWidth required/>\n                            <InputLabel>颜色</InputLabel>\n                            <Select name=\"color\" required>\n                                <MenuItem value={\"red\"}><TagChip tag={{color: \"red\", name: \"红色\"}} size=\"small\"\n                                                                 clickable/></MenuItem>\n                                <MenuItem value={\"pink\"}><TagChip tag={{color: \"pink\", name: \"粉色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"blue\"}><TagChip tag={{color: \"blue\", name: \"蓝色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"purple\"}><TagChip tag={{color: \"purple\", name: \"紫色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"indigo\"}><TagChip tag={{color: \"indigo\", name: \"靛蓝色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"cyan\"}><TagChip tag={{color: \"cyan\", name: \"青色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"teal\"}><TagChip tag={{color: \"teal\", name: \"水鸭色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"lime\"}><TagChip tag={{color: \"lime\", name: \"绿黄色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"orange\"}><TagChip tag={{color: \"orange\", name: \"橘黄色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"brown\"}><TagChip tag={{color: \"brown\", name: \"棕色\"}} size=\"small\"\n                                                                   clickable/></MenuItem>\n                                <MenuItem value={\"gray\"}><TagChip tag={{color: \"gray\", name: \"灰色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                            </Select>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={handleSubmit} color=\"primary\">\n                                添加\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {useDispatch} from \"react-redux\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {tokenHeader} from \"../../../controller/user\";\nimport {setSnackbar} from \"../../../controller/site\";\nimport {TextField, Select} from \"mui-rff\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function EditTaskButton(props) {\n    const {task} = props;\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + task[\"mid\"] + \"/chapter/\" + task[\"cid\"] + \"/task/\" + task[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== task[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"] + \"/\" + res[\"cid\"] + \"/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen} {...props}>\n                编辑任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: task[\"type\"], name: task[\"name\"], \"id\": task[\"id\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\n\nexport default function DataRender(props) {\n    return (\n        <></>\n    );\n}\n","import React from \"react\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport LockIcon from '@material-ui/icons/Lock';\n\n\nexport default function StatusIcon(props) {\n    const {status, ...others} = props;\n\n    return (<>\n        {status === 0 && <EditIcon {...others}/>}\n        {status === 1 && <DoneIcon {...others}/>}\n        {status === 2 && <LockIcon {...others}/>}\n    </>);\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Box from \"@material-ui/core/Box\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport DataRender from \"./DataRender\";\nimport {localtime_exact} from \"../../../controller/utils\";\nimport UserChip from \"../../../Component/UserChip/UserChip\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setGoo, tokenHeader} from \"../../../controller/user\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport {Field, Form} from \"react-final-form\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport UserAutocomplete from \"../../../Component/UserAutocomplete/UserAutocomplete\";\nimport StatusIcon from \"../../../Component/StatusIcon/StatusIcon\";\nimport Chip from \"@material-ui/core/Chip\";\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Radio from \"@material-ui/core/Radio\"\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    listItem: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nconst statusToColor = (status) => {\n    switch (status % 4) {\n        case 1:\n            return { color: 'lightBlue', label: '三成熟' }\n        case 2:\n            return { color: 'rgba(255, 255, 0, 0.5)', label: '五成熟' }\n        case 3:\n            return { color: 'rgba(255, 82, 82, 0.5)', label: '七成熟' }\n        default:\n            return { color: 'rgba(46, 255, 60, 0.7)', label: '新鲜' }\n    }\n};\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {task, adminAuth} = props;\n    const [taskState, setTaskState] = useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setTaskState(task);\n    }, [task]);\n\n    const handleDismiss = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(Object.assign({}, taskState, {accept_by: {uid: \"\", nickname: \"\", avatar: \"\"}}));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <div className={classes.root}>\n            <Box display=\"flex\" flexDirection=\"column\">\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">承接人</Typography></Box>\n                    <Box>\n                        {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n                        <UserChip user={taskState[\"accept_by\"]}\n                                  onDelete={adminAuth && (taskState[\"status\"] === 0 || taskState[\"status\"] === 2) && handleDismiss}/>}\n                        {taskState && taskState[\"accept_by\"][\"uid\"] === \"\" &&\n                        <ToggleButtons taskState={taskState} setTaskState={setTaskState} {...props} />}\n                    </Box>\n                </Box>\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">状态</Typography></Box>\n                    <Box><Typography variant=\"h6\">{taskState && taskState[\"status\"] === 0 && <StatusIcon status={0}/>}\n                        {taskState && taskState[\"status\"] === 1 && <StatusIcon status={1}/>}\n                        {taskState && taskState[\"status\"] === 2 && <StatusIcon status={2}/>}\n                    </Typography></Box>\n                    <Box>{taskState &&\n                    <ToggleStatusButtons taskState={taskState} setTaskState={setTaskState} {...props}/>}</Box>\n\n                </Box>\n                {taskState && taskState[\"wait_status\"] !== null && taskState[\"status\"] === 0 && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography variant=\"h6\">鸽度</Typography></Box>\n                        {console.log(taskState)}\n                        <WaitStatusChip taskState={taskState} setTaskState={setTaskState} {...props}></WaitStatusChip>\n                    </Box>\n                </>}\n                {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>承接时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"accept_on\"])}</Box>\n                    </Box>\n                </>}\n                {taskState && taskState[\"status\"] === 1 && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>完成时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"complete_on\"])}</Box>\n                    </Box>\n                </>}\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography>创建时间</Typography></Box>\n                    <Box>{taskState && localtime_exact(taskState[\"create_on\"])}</Box>\n                </Box>\n            </Box>\n            <DataRender data={taskState && taskState[\"data\"]}/>\n        </div>\n    );\n}\n\nfunction ToggleButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        handleAssign(values[\"assign_to\"])();\n        handleClose();\n    };\n\n    const handleAssign = (assign_to) => () => {\n        if (assign_to === uid) dispatch(setGoo());\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            params: {assign_to: assign_to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    if (privilege === 0) return <Typography>无</Typography>;\n\n    return <>\n        {adminAuth && <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen} className={classes.button}>分配</Button>}\n        {taskState[\"status\"] === 0 && <Button variant=\"contained\" color=\"primary\" onClick={handleAssign(uid)} className={classes.button}>承接</Button>}\n\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\n            <DialogTitle id=\"form-dialog-title\">分配</DialogTitle>\n            <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogContent>\n                        <Field component={ UserAutocomplete } name=\"assign_to\" label=\"分配\"/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>;\n}\n\nfunction ToggleStatusButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const handleStatusClick = (to) => () => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/status\", {\n            params: {to: to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n            if (to === 1 && taskState[\"accept_by\"][\"uid\"] === uid) dispatch(setGoo());\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return <>{taskState[\"status\"] === 0 && <>\n        {adminAuth && <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={handleStatusClick(2)} className={classes.button}><StatusIcon status={2}/>停止</Button>}\n        {(taskState[\"accept_by\"][\"uid\"] === uid || adminAuth) && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(1)} className={classes.button}><StatusIcon status={1}/>完成</Button>}\n    </>}\n        {adminAuth && <>{taskState && taskState[\"status\"] === 1 &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>再开</Button>}\n            {taskState && taskState[\"status\"] === 2 &&\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>开始</Button>}</>}\n    </>;\n}\n\n\nfunction WaitStatusChip(props) {\n    const {taskState, adminAuth, setTaskState} = props;\n    const [selectedValue, setSelectedValue] = useState(taskState[\"wait_status\"]); // 初始化状态\n\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = () => {\n        handleAssign(selectedValue)();\n        handleClose();\n    };\n\n    const handleRadioChange = (event) => {\n        setSelectedValue(event.target.value); // 更新状态\n    };\n\n    const handleAssign = (selectedValue) => () => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/waitStatusChange\", {\n            params: {selected_value: selectedValue},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return <>\n        {adminAuth && <Chip style={{ backgroundColor: statusToColor(taskState[\"wait_status\"]).color }} onClick={handleClickOpen} label={statusToColor(taskState[\"wait_status\"]).label}/>}\n        {(!adminAuth) && <Chip style={{ backgroundColor: statusToColor(taskState[\"wait_status\"]).color }} label={statusToColor(taskState[\"wait_status\"]).label}/>}\n\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\n            <DialogTitle id=\"form-dialog-title\">修改</DialogTitle>\n            <DialogContent>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup aria-label=\"gender\" name=\"gender1\" value={String(selectedValue)} onChange={handleRadioChange} row>\n                        <FormControlLabel value=\"4\" control={<Radio />} label=\"新鲜\" />\n                        <FormControlLabel value=\"5\" control={<Radio />} label=\"三成熟\" />\n                        <FormControlLabel value=\"6\" control={<Radio />} label=\"五成熟\" />\n                        <FormControlLabel value=\"7\" control={<Radio />} label=\"七成熟\" />\n                        <FormControlLabel value=\"0\" control={<Radio />} label=\"自动设置\" />\n                    </RadioGroup>\n                </FormControl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} color=\"primary\">\n                    取消\n                </Button>\n                <Button onClick={onSubmit} color=\"primary\">\n                    保存\n                </Button>\n            </DialogActions>\n        </Dialog>\n    </>;\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setTitle} from \"../../../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport EditTaskButton from \"./EditTaskButton\";\nimport TagChip from \"../../../Component/TagChip/TagChip\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport AddTagChip from \"../../../Component/TagChip/AddTagChip\";\nimport TaskInfo from \"./TaskInfo\";\nimport DeleteButton from \"../../../Component/DeleteButton/DeleteButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {manga, chapter, tid, adminAuth} = props;\n    const [task, setTask] = useState();\n    const dispatch = useDispatch();\n\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTask(res);\n                    setTitle(manga.name + chapter.name + res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取任务信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tid]);\n\n    return (\n        <div className={classes.root}>\n            <Typography variant=\"h5\">\n                {(typeof task === \"object\" && typeof task.tags === \"object\" && task.tags.map((tag, key) => {\n                    return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                    deletable={adminAuth ? \"true\" : \"false\"} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>;\n                })) || <Skeleton/>}\n                {typeof manga.tags === \"object\" && adminAuth &&\n                <AddTagChip className={classes.label} level={2} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>}\n            </Typography>\n            <Box display=\"flex\" flexDirection=\"row\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h3\">{(task && <>{taskIcon(task[\"type\"])}{task[\"name\"]}</>) || <Skeleton/>}</Typography>\n                </Box>\n                {task && adminAuth && <>\n                    <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid} name=\"任务\"\n                                  variant=\"outlined\" size=\"small\" callback={\"/manga/\" + manga[\"id\"]} className={classes.button}/>\n                    <EditTaskButton task={task} className={classes.button}/></>}\n            </Box>\n            {task && <TaskInfo task={task} adminAuth={adminAuth}/>}\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"../ChapterList/EditChapterButton\";\nimport UserChip from \"../../Component/UserChip/UserChip\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    staffItem: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterInfo(props) {\n    const classes = useStyles();\n    const {chapter, adminAuth} = props;\n\n    return (\n        <div className={classes.root}>\n            <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                        <Typography>Staff</Typography>\n                        <Box display=\"flex\" alignItems=\"center\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                if (task[\"accept_by\"][\"uid\"] !== \"\") {\n                                    return <span className={classes.staffItem} key={key}>\n                                        <span>{task[\"name\"]}</span><UserChip user={task[\"accept_by\"]} size=\"small\"/>\n                                    </span>\n                                }\n                            })}\n                        </Box>\n                        <Typography>備考</Typography>\n                        <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"]} name=\"章节\"\n                                      callback={\"/manga/\" + chapter[\"mid\"]} className={classes.button} size=\"small\" variant=\"outlined\"/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useHistory, useParams} from \"react-router-dom\";\nimport TaskBlock from \"./TaskBlock/TaskBlock\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {useDispatch} from \"react-redux\";\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport ChapterInfo from \"./ChapterInfo\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n}));\n\nexport default function ChapterBlock(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const {cid, tid} = useParams();\n    const [chapter, setChapter] = useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [order, setOrder] = useState(0);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + cid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    for (let i = 0; i < res[\"tasks\"].length; i++) {\n                        if (res[\"tasks\"][i][\"id\"] === tid) {\n                            setOrder(i);\n                            break;\n                        }\n                    }\n                    setChapter(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取章节信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleBack = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order - 1][\"id\"]);\n        setOrder(order - 1);\n    };\n\n    const handleNext = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order + 1][\"id\"]);\n        setOrder(order + 1);\n    };\n\n\n    return (\n        <div className={classes.root}>\n            {chapter && <ChapterInfo chapter={chapter} mid={manga.id} adminAuth={adminAuth}/>}\n            {chapter && <MobileStepper position=\"static\" activeStep={order} backButton={\n                <Button size=\"small\" onClick={handleBack} disabled={order === 0}>\n                    <KeyboardArrowLeft/>上一个任务\n                </Button>\n            } nextButton={\n                <Button size=\"small\" onClick={handleNext} disabled={order === chapter[\"tasks\"].length - 1}>\n                    下一个任务<KeyboardArrowRight/>\n                </Button>\n            } steps={chapter[\"tasks\"].length}/>}\n            {chapter && <TaskBlock chapter={chapter} {...props} tid={chapter[\"tasks\"][order][\"id\"]}/>}\n        </div>\n    );\n}\n","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {Route, Switch, useParams, useRouteMatch, Link as RouterLink} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport cover from \"../cover.jpeg\";\n\nimport NewChapterButton from \"./NewChapterButton\";\nimport ChapterList from \"./ChapterList/ChapterList\";\nimport Metadata from \"./Metadata\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport TagChip from \"../Component/TagChip/TagChip\";\nimport {setTitle} from \"../controller/utils\";\nimport AddTagChip from \"../Component/TagChip/AddTagChip\";\nimport Link from \"@material-ui/core/Link\";\nimport ChapterBlock from \"./ChapterBlock/ChapterBlock\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function MangaPage(props) {\n    const classes = useStyles();\n    const {mid} = useParams();\n    const {path} = useRouteMatch();\n    const dispatch = useDispatch();\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const [adminAuth, setAdminAuth] = useState(false);\n\n    const [manga, setManga] = useState({});\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + mid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setManga(res);\n                    setTitle(res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取漫画信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        setAdminAuth(privilege >= 2 || (typeof manga.producer === \"object\" && manga.producer.uid === uid));\n    }, [privilege, uid, manga]);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        {(typeof manga.tags === \"object\" && manga.tags.map((tag, key) => {\n                            return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                            deletable={adminAuth ? \"true\" : \"false\"} mid={mid}/>;\n                        })) || <Skeleton/>}\n                        {typeof manga.tags === \"object\" && adminAuth &&\n                        <AddTagChip className={classes.label} level={0} mid={manga[\"id\"]}/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/manga/\" + manga[\"id\"]}\n                               color=\"inherit\">{manga.name}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Switch>\n                    <Route exact path={path}>\n                        <Box>{adminAuth && <NewChapterButton mid={manga[\"id\"]}/>}</Box>\n                    </Route>\n                </Switch>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={manga.cover || cover}\n                                title={manga.name}\n                            />\n                        </Card>\n                        <Metadata manga={manga} adminAuth={adminAuth}/>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Switch>\n                        <Route exact path={path}>\n                            <ChapterList mid={mid} adminAuth={adminAuth}/>\n                        </Route>\n                        <Route path={`${path}/:cid/:tid`}>\n                            {manga[\"id\"] && <ChapterBlock adminAuth={adminAuth} manga={manga}/>}\n                        </Route>\n                    </Switch>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nexport default function PrivateRoute({ children, ...rest }) {\n    const privilege = useSelector(state => state.user.privilege);\n    const logging = useSelector(state => state.user.logging);\n\n    return (!logging ? (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                privilege > 0 ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    ) : (<div/>));\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\n\nexport function Tasks(props) {\n    const [tasks, setTasks] = React.useState();\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n        <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n            {tasks &&\n            <MaterialTable icons={tableIcons} columns={[\n                {title: \"漫画\", field: \"mname\"},\n                {title: \"章节\", field: \"cname\"},\n                {title: \"任务\", field: \"name\"},\n                {title: \"类型\", field: \"type\", lookup: {\n                        0: \"其他\",\n                        1: \"图源\",\n                        2: \"翻译\",\n                        3: \"校对\",\n                        4: \"嵌字\",\n                        5: \"审核\",\n                        6: \"发布\",\n                    }},\n                {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n            ]} options={{\n                pageSize: 20,\n            }} data={tasks} components={{\n                Toolbar: props => (<></>)\n            }} onRowClick={(event, rowData, togglePanel) => {\n                history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n            }} localization={{\n                grouping: {\n                    placeholder: \"拖拽表头至此以聚合显示...\",\n                    groupedBy: \"聚合:\"\n                },\n                pagination: {\n                    labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                    labelRowsSelect: '行',\n                    labelRowsPerPage: '每页行数:',\n                    firstAriaLabel: '首页',\n                    firstTooltip: '首页',\n                    previousAriaLabel: '上一页',\n                    previousTooltip: '上一页',\n                    nextAriaLabel: '下一页',\n                    nextTooltip: '下一页',\n                    lastAriaLabel: '末页',\n                    lastTooltip: '末页'\n                },\n            }}/>}\n        </Box>\n    </>\n}","import React from \"react\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function ChangePasswordButton(props) {\n    const {uid} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid + \"/password\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"secondary\" style={{marginTop: \"0.5rem\"}} onClick={handleClickOpen}>修改密码</Button>\n        <Dialog open={open} onClose={handleClose}>\n            <Form onSubmit={onChangePassword} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改密码</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\n                        </DialogContentText>\n                        <TextField autoFocus margin=\"dense\" name=\"password\" label=\"新密码\" type=\"password\" fullWidth required/>\n                        <TextField margin=\"dense\" name=\"re-password\" label=\"重复新密码\" type=\"password\" fullWidth required/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            修改\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport React, {useEffect} from \"react\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {Form} from \"react-final-form\";\nimport Box from \"@material-ui/core/Box\";\nimport {TextField} from \"mui-rff\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport Button from \"@material-ui/core/Button\";\n\nexport function Settings(props) {\n    const uid = useSelector(state => state.user.uid);\n    const [user, setUser] = React.useState();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"introduction\"] = values[\"introduction\"] || \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>账户设置</Typography>\n        <Form initialValues={user && {uid: user[\"uid\"], nickname: user[\"nickname\"], introduction: user[\"introduction\"]}}\n              onSubmit={onSubmit} render={({handleSubmit}) => (\n            <form onSubmit={handleSubmit}>\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n                    <TextField name=\"uid\" label=\"用户ID\" disabled required/>\n                    <TextField name=\"nickname\" label=\"昵称\" required/>\n                    <TextField name=\"introduction\" label=\"自我介绍\" multiline rowsMax={5}/>\n                    <ChangePasswordButton uid={uid}/>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{marginTop: \"1rem\"}}>保存</Button>\n                </Box>\n            </form>)}/>\n\n    </>\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBroadcast, setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ClipboardText from \"mdi-material-ui/ClipboardText\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nexport function Admin(props) {\n    const [codes, setCodes] = React.useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/i_code\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setCodes(res[\"icodes\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取邀请码列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const handleAdd = () => {\n        axios.put(API_BASE + \"/profile/i_code\", null, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            let new_codes = codes.slice(0);\n            new_codes.push(res);\n            setCodes(Object.assign(new_codes));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>管理</Typography>\n        <Box display=\"flex\" flexDirection=\"column\">\n            <Box><EditBroadcast style={{marginBottom: \"1rem\"}}/></Box>\n            <Box>\n                <Button variant=\"contained\" color=\"primary\" onClick={handleAdd}>添加邀请码</Button>\n                {codes && codes.map((code, key) =>\n                    <Paper style={{width: \"100%\"}} key={key}>\n                        <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n                            <CopyToClipboard text={\"https://mikan.mom/signup?icode=\" + code[\"icode\"]} onCopy={() => {\n                                dispatch(setSnackbar(\"已复制邀请链接\", \"success\"))\n                            }}>\n                                <IconButton><ClipboardText/></IconButton>\n                            </CopyToClipboard>\n                            <Typography variant=\"body1\" noWrap flexGrow={1}>{code[\"icode\"]}</Typography>\n                        </Box>\n                    </Paper>\n                )}\n            </Box>\n        </Box>\n    </>\n}\n\nfunction EditBroadcast(props) {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const broadcast = useSelector(state => state.site.broadcast);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        if (!values[\"broadcast\"]) values[\"broadcast\"] = \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/env\", null, {\n            params: {\n                key: \"broadcast\",\n                value: values[\"broadcast\"]\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setBroadcast(values[\"broadcast\"]));\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"primary\" style={{marginTop: \"0.5rem\"}}\n                onClick={handleClickOpen} {...props}>修改公告</Button>\n        <Dialog open={open} onClose={handleClose} maxWidth=\"md\">\n            <Form onSubmit={onChangePassword} initialValues={{broadcast: broadcast}} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改公告</DialogTitle>\n                    <DialogContent>\n                        <TextField autoFocus margin=\"dense\" name=\"broadcast\" label=\"公告\" fullWidth multiline\n                                   rowsMax={5}/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {CLEAN_USER} from \"../reducers/user\";\nimport {useHistory} from \"react-router\";\nimport {setTitle} from \"../controller/utils\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {Tasks} from \"./TasksBlock\";\nimport {Settings} from \"./SettingsBlock\";\nimport {Admin} from \"./AdminBlock\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n}));\n\nexport default function DashboardPage(props) {\n    const classes = useStyles();\n    const [value, setValue] = React.useState(0);\n    const username = useSelector(state => state.user.nickname);\n    const privilege = useSelector(state => state.user.privilege);\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    useEffect(() => setTitle(username), []);\n\n    const onLogOut = () => {\n        window.localStorage.removeItem(\"access_token\");\n        dispatch({type: CLEAN_USER});\n        history.push(\"/\");\n    };\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1} alignItems=\"flex-end\">\n                    <Typography variant=\"h5\">欢迎您,</Typography>\n                    <Typography variant=\"h2\">{username}</Typography>\n                </Box>\n                <Box><Button onClick={onLogOut}>登出</Button></Box>\n            </Box>\n\n            <Box display=\"flex\" flexGrow={1} alignItems=\"flex-start\" flexDirection={isDesktop ? \"row\" : \"column\"}>\n                <Tabs\n                    orientation={isDesktop ? \"vertical\" : \"horizontal\"}\n                    variant=\"scrollable\"\n                    value={value}\n                    onChange={handleChange}\n                    className={classes.tabs}\n                >\n                    <Tab label=\"任务\"/>\n                    <Tab label=\"设置\"/>\n                    {privilege > 2 && <Tab label=\"管理\"/>}\n                </Tabs>\n                <TabPanel value={value} index={0}>\n                    <Tasks/>\n                </TabPanel>\n                <TabPanel value={value} index={1}>\n                    <Settings/>\n                </TabPanel>\n                <TabPanel value={value} index={2}>\n                    <Admin/>\n                </TabPanel>\n            </Box>\n        </Container>\n    );\n}\n\nfunction TabPanel(props) {\n    const {children, value, index, ...other} = props;\n\n    return (\n        <div style={{width: \"100%\"}} hidden={value !== index} {...other}>\n            {value === index && (\n                <Box p={3}>\n                    {children}\n                </Box>\n            )}\n        </div>\n    );\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport {useSelector} from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function Snackbar(props) {\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    const errorMsg = useSelector(state => state.site.snackMsg);\n\n    const omitAction = (key) => () => closeSnackbar(key);\n\n    React.useEffect(() => {\n        if (typeof errorMsg === \"object\" &&\n            typeof errorMsg.message === \"string\" &&\n            errorMsg.message !== \"\") {\n            const messageProps = {variant: errorMsg.variant};\n            if (errorMsg.dismissable)\n                Object.assign(messageProps, {\n                action: (key) => (\n                <Button onClick={omitAction(key)}>\n                    忽略\n                </Button>\n            )});\n            enqueueSnackbar(errorMsg.message, messageProps);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [errorMsg]);\n\n    return (<div/>);\n}","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport axios from \"axios\";\nimport {useLocation} from \"react-router\";\nimport {API_THIRD_PARTY} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function OAuthPage(props) {\n    const classes = useStyles();\n    const [fail, setFail] = useState(false);\n    const query = useQuery();\n\n    React.useEffect(() => {\n        setTitle(\"授权\");\n        axios.get(API_THIRD_PARTY + \"/auth_code\", {\n            params: {\n                client_id: query.get(\"client_id\")\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data)\n            .then(res => {\n                let auth_code = res[\"access_token\"];\n                window.location.href = query.get(\"redirect_uri\") + \"?code=\" + auth_code + \"&state=\" + query.get(\"state\");\n            }).catch(() => setFail(true))\n    }, []);\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">{fail ? \"请重试\" : \"登录到\" + query.get(\"client_id\")}</Typography>\n                    <Typography variant=\"h2\">{fail ? \"授权失败\" : \"正在授权...\"}</Typography>\n                </Box>\n            </Box>\n        </Container>\n    );\n}","import React from 'react';\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {CLOUD_URL} from \"../constant\";\n\nexport default function CloudPage() {\n\n    React.useEffect(() => {\n        window.location.href = CLOUD_URL;\n    }, []);\n\n    return (<Container>\n        <Typography variant={\"h3\"}>正在跳转...</Typography>\n        <Typography variant={\"h5\"}>如无跳转, <a href={CLOUD_URL}>请点击这里。</a></Typography>\n    </Container>);\n}\n","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\n\nexport default function UsersTable(props) {\n    const history = useHistory();\n    const {users} = props;\n\n    return (\n        <MaterialTable icons={tableIcons} columns={[\n            {title: \"昵称\", field: \"nickname\"},\n            {title: \"用户ID\", field: \"uid\"},\n        ]} options={{\n            pageSize: 20\n        }} data={users} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/user/\" + rowData[\"uid\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n        );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport TextField from \"@material-ui/core/TextField\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\nimport UsersTable from \"./UsersTable\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n}));\n\nexport default function PeoplePage() {\n    const classes = useStyles();\n    const [users, setUsers] = useState([]); // 原始的用户列表\n    const [filteredUsers, setFilteredUsers] = useState([]); // 过滤后的用户列表\n    const [filterText, setFilterText] = useState(\"\"); // 用户输入的筛选文本\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"组员\");\n        dispatch(setBusy(true));\n        axios.get(API_USER, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                setUsers(res[\"users\"]);\n                setFilteredUsers(res[\"users\"]); // 初始情况下过滤结果和原始列表相同\n            })\n            .catch(err => {\n            dispatch(setSnackbar(\"拉取组员列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    // 当筛选文本改变时，重新过滤用户列表\n    useEffect(() => {\n        if (filterText.trim() === \"\") {\n            setFilteredUsers(users); // 如果没有筛选条件，则显示全部用户\n        } else {\n            const regex = new RegExp(filterText, \"i\"); // 创建不区分大小写的正则表达式\n            const filtered = users.filter(user =>\n                user && Object.values(user).some(value =>\n                    typeof value === 'string' && regex.test(value)\n                )\n            );\n            setFilteredUsers(filtered);\n        }\n    }, [filterText, users]);\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">组员</Typography>\n                </div>\n                <TextField\n                    label=\"搜索\"\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    value={filterText}\n                    onChange={e => setFilterText(e.target.value)}\n                />\n                {filteredUsers.length === 0 ? (\n                    <Typography variant=\"body1\" color=\"textSecondary\">\n                        没有找到符合条件的组员。\n                    </Typography>\n                ) : (\n                    <UsersTable users={filteredUsers} />\n                )}\n            </Box>\n        </Container>\n    );\n}\n","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport {localtime_exact, setTitle} from \"../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport UserChip from \"../Component/UserChip/UserChip\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {setNotifications, tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    details: {\n        alignItems: 'center',\n    },\n    summary: {\n        width: '100%',\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    userChip: {\n        marginRight: theme.spacing(1),\n    },\n    unreadHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        fontWeight: \"bold\",\n    }\n}));\n\nexport default function MessagePage(props) {\n    const classes = useStyles();\n    const [messages, setMessages] = useState();\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const deleteFromList = (mrn) => {\n        let result = [];\n        for (let message of messages) {\n            message[\"mrn\"] !== mrn && result.push(message);\n        }\n        setMessages(result);\n    };\n\n    useEffect(() => {\n        setTitle(\"通知\");\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/inbox\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"messages\"] === \"object\" && setMessages(res[\"messages\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea} flexDirection=\"column\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h2\">我的通知</Typography>\n                </Box>\n                <Box display={\"flex\"} flexWrap={\"wrap\"}\n                     justifyContent={\"center\"} alignItems={\"center\"} flexDirection=\"column\">\n                    {messages && messages.map((message) => (\n                        <MessageItem message={message} expanded={expanded} setExpanded={setExpanded}\n                                     deleteFromList={deleteFromList} key={message[\"mrn\"]}/>\n                    ))}\n                </Box>\n            </Box>\n        </Container>\n    );\n}\n\nfunction MessageItem(props) {\n    const classes = useStyles();\n    const {message, expanded, setExpanded, deleteFromList} = props;\n    const [unread, setUnread] = useState(false);\n    const dispatch = useDispatch();\n\n    const [body, setBody] = useState();\n\n    const handleDelete = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_BASE + \"/message/\" + message[\"mrn\"], {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        }).then(res => {\n                deleteFromList(message[\"mrn\"]);\n            }\n        ).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    React.useEffect(() => setUnread(message[\"unread\"]), []);\n\n    React.useEffect(() => {\n        if (expanded === message[\"mrn\"] && !body) {\n            dispatch(setBusy(true));\n            axios.get(API_BASE + \"/message/\" + message[\"mrn\"], {\n                headers: tokenHeader(),\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res[\"body\"] === \"string\" && setBody(res[\"body\"]);\n                        if (unread) {\n                            setUnread(false);\n                            dispatch(setNotifications(-1));\n                        }\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"获取消息失败, 请刷新重试\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        }\n    }, [expanded]);\n\n    const handleExpand = () => {\n        if (expanded === message[\"mrn\"]) setExpanded(\"\");\n        else setExpanded(message[\"mrn\"]);\n    };\n\n    return <div className={expanded === message[\"mrn\"] ? classes.rootExpanded : classes.root}>\n        <ExpansionPanel TransitionProps={{unmountOnExit: true}} expanded={expanded === message[\"mrn\"]}\n                        onChange={handleExpand}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"message-summary\">\n                <Box display=\"flex\" alignItems={\"center\"} flexDirection=\"row\" className={classes.summary}>\n                    <UserChip user={message[\"from_by\"]} className={classes.userChip}/>\n                    <Box flexGrow={1}>\n                        <Typography className={unread ? classes.unreadHeading : classes.heading}\n                                    noWrap>{message[\"title\"]}</Typography>\n                    </Box>\n                    <Typography>{localtime_exact(message[\"create_on\"])}</Typography>\n                </Box>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails className={classes.details}>\n                <Typography variant=\"body1\">{body}</Typography>\n            </ExpansionPanelDetails>\n            <Divider/>\n            <ExpansionPanelActions>\n                <Button onClick={handleDelete} color=\"secondary\" variant=\"outlined\" size=\"small\">删除消息</Button>\n            </ExpansionPanelActions>\n        </ExpansionPanel>\n    </div>\n}","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {useParams, Link as RouterLink, useHistory} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {localtime, localtime_exact, setTitle} from \"../controller/utils\";\nimport Link from \"@material-ui/core/Link\";\nimport {tokenHeader} from \"../controller/user\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\nimport MaterialTable from \"material-table\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function UserPage(props) {\n    const classes = useStyles();\n    const {uid} = useParams();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const privilege = useSelector(state => state.user.privilege);\n\n    const [user, setUser] = useState({});\n    const [tasks, setTasks] = useState();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                    setTitle(res.nickname);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取用户信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        @{user[\"uid\"] || <Skeleton/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/user/\" + uid}\n                               color=\"inherit\">{user[\"nickname\"]}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Box>{privilege > 2 && <ChangePasswordButton uid={user[\"uid\"]}/>}</Box>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        {user && user[\"avatar\"] !== \"\" && <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={user[\"avatar\"]}\n                                title={user[\"nickname\"]}\n                            />\n                        </Card>}\n                        <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>加入时间</Typography></Box>\n                                <Box>{user && localtime(user[\"join_time\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                                <Box>{user && localtime(user[\"goo_timestamp\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>权限</Typography></Box>\n                                <Box>{user && user[\"privilege\"]}</Box>\n                            </Box>\n                            <Box>\n                                <Typography paragraph>{user && user[\"introduction\"]}</Typography>\n                            </Box>\n                        </Box>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n                    <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                        {tasks &&\n                        <MaterialTable icons={tableIcons} columns={[\n                            {title: \"漫画\", field: \"mname\"},\n                            {title: \"章节\", field: \"cname\"},\n                            {title: \"任务\", field: \"name\"},\n                            {title: \"类型\", field: \"type\", lookup: {\n                                    0: \"其他\",\n                                    1: \"图源\",\n                                    2: \"翻译\",\n                                    3: \"校对\",\n                                    4: \"嵌字\",\n                                    5: \"审核\",\n                                    6: \"发布\",\n                                }},\n                            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                            {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n                        ]} options={{\n                            pageSize: 20,\n                        }} data={tasks} components={{\n                            Toolbar: props => (<></>)\n                        }} onRowClick={(event, rowData, togglePanel) => {\n                            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n                        }} localization={{\n                            grouping: {\n                                placeholder: \"拖拽表头至此以聚合显示...\",\n                                groupedBy: \"聚合:\"\n                            },\n                            pagination: {\n                                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                                labelRowsSelect: '行',\n                                labelRowsPerPage: '每页行数:',\n                                firstAriaLabel: '首页',\n                                firstTooltip: '首页',\n                                previousAriaLabel: '上一页',\n                                previousTooltip: '上一页',\n                                nextAriaLabel: '下一页',\n                                nextTooltip: '下一页',\n                                lastAriaLabel: '末页',\n                                lastTooltip: '末页'\n                            },\n                        }}/>}\n                    </Box>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React, {useEffect} from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport {useHistory} from \"react-router-dom\";\nimport {setTitle} from \"./controller/utils\";\nimport GoogleDownasaur from \"mdi-material-ui/GoogleDownasaur\"\n\nexport default function NotFound() {\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"404\"), []);\n\n    useEffect(() => {\n        setTimeout(redirect, 3000);\n    });\n\n    const redirect = () => history.push(\"\");\n\n    return (\n        <Container component=\"main\">\n\n            <Typography variant=\"h1\"><GoogleDownasaur style={{fontSize: 90}}/>404什么也没有找到</Typography>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {TextField} from \"mui-rff\";\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Leaf from \"mdi-material-ui/Leaf\";\nimport {useDispatch} from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {setTitle} from \"../controller/utils\";\nimport {Form} from \"react-final-form\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function SignUpPage() {\n    const classes = useStyles();\n    let query = useQuery();\n    const dispatch = useDispatch();\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"注册\"), []);\n\n    let onSubmit = (values) => {\n        values[\"icode\"] = query.get(\"icode\");\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/signup\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"注册成功，请登录。\", \"success\"));\n            history.push(\"/\");\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    欢迎加入汉化工房九九组\n                </Typography>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"用户ID\" name=\"uid\"\n                                   autoComplete=\"uid\" autoFocus helperText=\"ID将被用于登录\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"昵称\" name=\"nickname\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"password\" label=\"密码\"\n                                   type=\"password\" autoComplete=\"current-password\" helperText=\"密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"re-password\" label=\"重复密码\"\n                                   type=\"password\"/>\n                        <Button fullWidth variant=\"contained\" color=\"primary\" type=\"submit\">\n                            注册\n                        </Button>\n                    </form>)}/>\n            </div>\n        </Container>\n    );\n}","import React from \"react\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport AvatarIcon from \"../AvatarIcon/AvatarIcon\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    userChip: {\r\n        backgroundColor: 'white',\r\n        color: 'black', // 文本颜色\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: 'lightgray', // 鼠标悬停时的颜色\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function ForTableUserChip(props) {\r\n    const {user} = props;\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    if (user === undefined) return (<></>);\r\n\r\n    return (\r\n        <Chip aria-label=\"User Chip\" onClick={(e) => { e.stopPropagation();  history.push(\"/user/\" + user[\"uid\"]); }} className={classes.userChip}\r\n        clickable avatar={<AvatarIcon avatar={user[\"avatar\"]} name={user[\"nickname\"]}/>} label={user[\"nickname\"]} {...props}/>\r\n    );\r\n}","import React from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport {useHistory} from \"react-router\";\r\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\r\nimport {localtime_exact} from \"../controller/utils\";\r\nimport TagChip from \"../Component/TagChip/TagChip\";\r\nimport { Badge } from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\"\r\nimport UserChip from \"../Component/UserChip/UserChip\";\r\nimport ForTableUserChip from \"../Component/UserChip/ForTableUserChip\";\r\n\r\n//1个月lightBule\r\n//2个月#FFFF00 lightYellow\r\n//3个月#FF5252 lightRed\r\nconst useStyles = makeStyles((theme) => ({\r\n    smallBadge: {\r\n        minWidth: '14px', // 设置最小宽度\r\n        width: '14px', // 设置宽度\r\n        height: '14px', // 设置高度\r\n        fontSize: '10px', // 设置字体大小\r\n        padding: '0', // 移除内边距\r\n        borderRadius: '50%', // 保持圆形\r\n    },\r\n    lightBlueBadge: {\r\n        backgroundColor: \"lightBlue\",\r\n    },\r\n    lightYellowBadge: {\r\n        backgroundColor: 'rgba(255, 255, 0, 0.5)',\r\n    },\r\n    lightRedBadge: {\r\n        backgroundColor: \"rgba(255, 82, 82, 0.5)\",\r\n    },\r\n}));\r\n\r\nconst getBadgeContent = (tasks, task, type) => {\r\n    // 假设tasks是一个包含所有漫画任务的数组\r\n    // 计算等待状态大于0的任务数量\r\n    return tasks.filter(t => t.mname === task && String(t.type) === type && t.wait_status%4 > 0).length;\r\n};\r\n\r\nconst getBadgeStatus = (tasks, task, type) => {\r\n    const waitStatuses = tasks\r\n        .filter(t => t.mname === task && String(t.type) === type && t.wait_status % 4 > 0)\r\n        .map(t => t.wait_status % 4);\r\n    return waitStatuses.length > 0 ? Math.max(...waitStatuses) : 0;\r\n};\r\n\r\nexport default function RunningTasksTable(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const {tasks} = props;\r\n    const getBadgeClass = (value) => {\r\n        switch (value) {\r\n            case 1:\r\n                return `${classes.smallBadge} ${classes.lightBlueBadge}`;\r\n            case 2:\r\n                return `${classes.smallBadge} ${classes.lightYellowBadge}`;\r\n            case 3:\r\n                return `${classes.smallBadge} ${classes.lightRedBadge}`;\r\n            default:\r\n                return classes.smallBadge;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MaterialTable icons={tableIcons} columns={[\r\n            {title: \"漫画\", field: \"mname\", defaultGroupOrder: 1,\r\n                render: (task) => { // 自定义渲染函数\r\n                const [mname, type] = task.split('鸪鸪鸪');\r\n                return(\r\n                <Badge badgeContent={getBadgeContent(tasks,task,type)} anchorOrigin={{ vertical: 'top', horizontal: 'right' }} overlap=\"rectangle\" classes={{ badge: getBadgeClass(getBadgeStatus(tasks,task,type)) }}>\r\n                    <span style={{ paddingRight: '10px' }}>{mname}</span>\r\n                </Badge>\r\n                );\r\n            },},\r\n            {title: \"章节\", field: \"cname\"},\r\n            {title: \"任务\", field: \"name\"},\r\n            {title: \"类型\", field: \"type\", lookup: {\r\n                    0: \"其他\",\r\n                    1: \"图源\",\r\n                    2: \"翻译\",\r\n                    3: \"校对\",\r\n                    4: \"嵌字\",\r\n                    5: \"审核\",\r\n                    6: \"发布\",\r\n                }, defaultGroupOrder: 0},\r\n            {title: \"标签\", field: \"tags\", grouping: false, render: task =>\r\n                <>{task[\"tags\"].map((tag, key) => {\r\n                    return <TagChip tag={tag} size=\"small\" key={key}/>;\r\n                })}</>\r\n                , sorting: false},\r\n            {title: \"用户\",field: \"accept_by\",grouping: false,render: task =>\r\n            {\r\n                return <ForTableUserChip user={task[\"accept_by\"]}></ForTableUserChip>;\r\n            }\r\n            },\r\n            {title: \"接取时间\", field: \"accept_on\", render: task => localtime_exact(task[\"accept_on\"]), grouping: false},\r\n        ]} options={{\r\n            pageSize: 20,\r\n            grouping: true,\r\n            rowStyle: rowData => {\r\n                const colorMapping = {\r\n                    0: 'transparent',\r\n                    1: 'lightBlue', // 第一种颜色\r\n                    2: 'rgba(255, 255, 0, 0.5)', // 第二种颜色\r\n                    3: 'rgba(255, 82, 82, 0.5)', // 第三种颜色\r\n                };\r\n                const backgroundColor = colorMapping[rowData.wait_status % 4] || 'transparent';\r\n\r\n                return { backgroundColor };\r\n            }\r\n        }} data={tasks} components={{\r\n            Toolbar: props => (<></>)\r\n        }} onRowClick={(event, rowData, togglePanel) => {\r\n            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\r\n        }} localization={{\r\n            grouping: {\r\n                placeholder: \"拖拽表头至此以聚合显示...\",\r\n                groupedBy: \"聚合:\"\r\n            },\r\n            pagination: {\r\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\r\n                labelRowsSelect: '行',\r\n                labelRowsPerPage: '每页行数:',\r\n                firstAriaLabel: '首页',\r\n                firstTooltip: '首页',\r\n                previousAriaLabel: '上一页',\r\n                previousTooltip: '上一页',\r\n                nextAriaLabel: '下一页',\r\n                nextTooltip: '下一页',\r\n                lastAriaLabel: '末页',\r\n                lastTooltip: '末页'\r\n            },\r\n        }}/>\r\n    );\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {setTitle} from \"../controller/utils\";\r\nimport {setBusy, setSnackbar} from \"../controller/site\";\r\nimport axios from \"axios\";\r\nimport {API_RUNNING_TASK, API_TASK} from \"../constant\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport RunningTasksTable from \"./RunningTasksTable\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        marginTop: theme.spacing(5),\r\n        marginBottom: theme.spacing(5),\r\n    },\r\n    taskListItem: {\r\n        marginTop: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nexport default function RunningTasksPage() {\r\n    const classes = useStyles();\r\n    const [tasks, setTasks] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setTitle(\"进行中的任务\");\r\n        dispatch(setBusy(true));\r\n        axios.get(API_RUNNING_TASK, {\r\n            withCredentials: true,\r\n            validateStatus: status => status === 200\r\n        })\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                const processedTasks = res[\"tasks\"].map(task => ({\r\n                    ...task,\r\n                    mname: `${task.mname}鸪鸪鸪${task.type}`\r\n                }));\r\n                setTasks(processedTasks);\r\n                }\r\n            ).catch(err => {\r\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\r\n        }).finally(() => dispatch(setBusy(false)));\r\n    }, []);\r\n\r\n    return (\r\n        <Container>\r\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\r\n                <div className={classes.title}>\r\n                    <Typography variant=\"h2\">进行中的任务</Typography>\r\n                </div>\r\n                <RunningTasksTable tasks={tasks}/>\r\n            </Box>\r\n        </Container>\r\n    );\r\n}","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\n\nimport Border from \"./Border/Border\";\nimport MainPage from \"./MainPage/MainPage\";\nimport TasksPage from \"./TasksPage/TasksPage\";\nimport LoginPage from \"./LoginPage/LoginPage\";\nimport MangaPage from \"./MangaPage/MangaPage\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport DashboardPage from \"./DashboardPage/DashboardPage\";\nimport Snackbar from \"./Snackbar\";\nimport OAuthPage from \"./OAuthPage/OAuthPage\";\nimport CloudPage from \"./CloudPage/CloudPage\";\nimport PeoplePage from \"./PeoplePage/PeoplePage\";\nimport MessagePage from \"./MessagePage/MessagePage\";\nimport UserPage from \"./UserPage/UserPage\";\nimport NotFound from \"./NotFound\";\nimport SignUpPage from \"./LoginPage/SignUpPage\";\nimport RunningTasksPage from './RunningTasksPage/RunningTasksPage';\n\nexport default function Routes() {\n\n    return (\n        <Router>\n            <Border>\n                <Switch>\n                    <Route exact path={\"/\"}>\n                        <MainPage/>\n                    </Route>\n                    <Route path={\"/tasks\"}>\n                        <TasksPage/>\n                    </Route>\n                    <Route path={\"/runningTasks\"}>\n                        <RunningTasksPage/>\n                    </Route>\n                    <Route path={\"/login\"}>\n                        <LoginPage/>\n                    </Route>\n                    <Route path={\"/signup\"}>\n                        <SignUpPage/>\n                    </Route>\n                    <PrivateRoute path={\"/me\"}>\n                        <DashboardPage/>\n                    </PrivateRoute>\n                    <Route path={\"/cloud\"}>\n                        <CloudPage/>\n                    </Route>\n                    <PrivateRoute path={\"/oauth2\"}>\n                        <OAuthPage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/users\"}>\n                        <PeoplePage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/message\"}>\n                        <MessagePage/>\n                    </PrivateRoute>\n                    <Route path={\"/manga/:mid\"} children={<MangaPage/>} />\n                    <PrivateRoute path={\"/user/:uid\"} children={<UserPage/>} />\n                    <Route path=\"*\">\n                        <NotFound/>\n                    </Route>\n                </Switch>\n            </Border>\n            <Snackbar/>\n        </Router>\n    );\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Border is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux'\nimport site from './site'\nimport user from './user'\n\nconst mikanPeel = combineReducers({\n    site,\n    user,\n});\n\nexport default mikanPeel","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {ThemeProvider} from '@material-ui/core/styles';\nimport {responsiveMainThem} from './theme'\nimport Routes from \"./Routes\"\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from 'react-redux'\nimport {createStore, applyMiddleware} from 'redux'\nimport mikanPeel from './reducers'\n\nimport thunk from \"redux-thunk\";\nimport {SnackbarProvider} from \"notistack\";\n\nlet store = createStore(mikanPeel, applyMiddleware(thunk));\n\nReactDOM.render(\n    <Provider store={store}>\n        <ThemeProvider theme={responsiveMainThem}>\n            <SnackbarProvider anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}>\n                <Routes/>\n            </SnackbarProvider>\n        </ThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}